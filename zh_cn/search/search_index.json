{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"\u9996\u9875"},{"location":"ABOUT/","text":"BFE\u662f\u57fa\u4e8e\u767e\u5ea6\u7edf\u4e00\u63a5\u5165\u524d\u7aef(Baidu FrontEnd)\u5f00\u6e90\u7684\u4e03\u5c42\u6d41\u91cf\u63a5\u5165\u7cfb\u7edf BFE\u6587\u6863\u7531\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u90e8\u5206\u7ec4\u6210: \u4ecb\u7ecd: \u672c\u8282\u4ecb\u7ecdBFE\u7684\u57fa\u672c\u6982\u5ff5\u3001\u7cfb\u7edf\u67b6\u6784\u6982\u8ff0\u7b49 \u5feb\u901f\u5f00\u59cb: \u5feb\u901f\u5b89\u88c5\u53ca\u4f7f\u7528BFE \u5b89\u88c5\u8bf4\u660e: \u591a\u79cd\u5b89\u88c5BFE\u7684\u65b9\u5f0f\u8bf4\u660e \u914d\u7f6e\u8bf4\u660e: \u5173\u4e8eBFE\u914d\u7f6e\u7684\u8be6\u7ec6\u8bf4\u660e \u8fd0\u7ef4\u7ba1\u7406: \u5173\u4e8e\u5982\u4f55\u8fd0\u7ef4\u7ba1\u7406BFE\u7684\u8bf4\u660e \u53c2\u4e0e\u8d21\u732e: \u5173\u4e8e\u5982\u4f55\u8d21\u732eBFE\u9879\u76ee\u7684\u8bf4\u660e \u5e38\u89c1\u95ee\u9898: \u5bf9\u5e38\u89c1\u95ee\u9898\u7684\u89e3\u7b54 \u76d1\u63a7\u6307\u6807: BFE\u5185\u7f6e\u6307\u6807\u8be6\u7ec6\u8bf4\u660e \u6761\u4ef6\u539f\u8bed: BFE\u6761\u4ef6\u539f\u8bed\u7684\u8be6\u7ec6\u8bf4\u660e \u5982\u679c\u6587\u6863\u6ca1\u6709\u5305\u542b\u60a8\u5173\u6ce8\u7684\u5185\u5bb9\u6216\u95ee\u9898, \u8bf7\u5728 Github \u63d0\u4ea4\u53cd\u9988","title":"\u5173\u4e8e"},{"location":"COMMUNITY/","text":"\u6211\u4eec\u81f4\u529b\u4e8e\u56f4\u7ed5BFE\u5efa\u7acb\u5f00\u6e90\u793e\u533a\u3002\u5982\u679c\u60a8\u6709\u5174\u8da3\u4f7f\u7528\u6216\u5e0c\u671b\u83b7\u53d6\u5e2e\u52a9\uff0c\u6b22\u8fce\u8054\u7cfb\u6211\u4eec\u3002 BFE\u793e\u533a BFE Slack\u793e\u533a : \u767b\u9646 \u5e76\u5173\u6ce8\u4f60\u611f\u5174\u8da3\u7684\u8bdd\u9898\u3002 BFE\u5f00\u53d1\u8005\u5fae\u4fe1\u7fa4 : \u53d1\u9001\u7533\u8bf7\u90ae\u4ef6 \u5e76\u6ce8\u660e\u60a8\u7684\u5fae\u4fe1\u8d26\u53f7\u53ca\u8d21\u732e(\u4f8b\u5982\u63d0\u4ea4\u7684PR/Issue\u94fe\u63a5)\uff0c\u6211\u4eec\u5c06\u7acb\u5373\u9080\u8bf7\u60a8\u52a0\u5165\u3002 Twitter : @BFE-Networks Issue tracker : \u5728 GitHub issue tracker \u53cd\u9988bug\u6216\u529f\u80fd\u9700\u6c42\u3002 \u53c2\u4e0e\u5f00\u53d1 \u8877\u5fc3\u611f\u8c22\u60a8\u7684\u8d21\u732e\uff0c\u6b22\u8fce\u60a8\u8bbf\u95eeGithub\u4e0a BFE\u9879\u76ee , \u5e76\u6309 \u6d41\u7a0b \u53c2\u4e0e\u8d21\u732e\u4ee3\u7801\u53ca\u6587\u6863\u3002 \u9879\u76ee\u6cbb\u7406 BFE\u662f\u72ec\u7acb\u7684\u5f00\u6e90\u9879\u76ee\uff0cBFE\u9879\u76ee\u9075\u5faa\u5982\u4e0b \u7ba1\u7406\u529e\u6cd5 \u3002 \u884c\u4e3a\u51c6\u5219 \u4e3a\u4e86\u6784\u5efa\u4e00\u4e2a\u53d7\u6b22\u8fce\u4e14\u65e0\u9a9a\u6270\u7684\u793e\u533a\uff0cBFE\u793e\u533a\u5e94\u9075\u5faa\u5982\u4e0b \u884c\u4e3a\u51c6\u5219 \u3002 \u7533\u8bf7\u4e13\u9879\u5408\u4f5c \u6b22\u8fce\u90ae\u4ef6\u6211\u4eec bfe-osc@baidu.com \u6d3d\u8c08\u3002","title":"COMMUNITY"},{"location":"COMMUNITY/#bfe","text":"BFE Slack\u793e\u533a : \u767b\u9646 \u5e76\u5173\u6ce8\u4f60\u611f\u5174\u8da3\u7684\u8bdd\u9898\u3002 BFE\u5f00\u53d1\u8005\u5fae\u4fe1\u7fa4 : \u53d1\u9001\u7533\u8bf7\u90ae\u4ef6 \u5e76\u6ce8\u660e\u60a8\u7684\u5fae\u4fe1\u8d26\u53f7\u53ca\u8d21\u732e(\u4f8b\u5982\u63d0\u4ea4\u7684PR/Issue\u94fe\u63a5)\uff0c\u6211\u4eec\u5c06\u7acb\u5373\u9080\u8bf7\u60a8\u52a0\u5165\u3002 Twitter : @BFE-Networks Issue tracker : \u5728 GitHub issue tracker \u53cd\u9988bug\u6216\u529f\u80fd\u9700\u6c42\u3002","title":"BFE\u793e\u533a"},{"location":"COMMUNITY/#_1","text":"\u8877\u5fc3\u611f\u8c22\u60a8\u7684\u8d21\u732e\uff0c\u6b22\u8fce\u60a8\u8bbf\u95eeGithub\u4e0a BFE\u9879\u76ee , \u5e76\u6309 \u6d41\u7a0b \u53c2\u4e0e\u8d21\u732e\u4ee3\u7801\u53ca\u6587\u6863\u3002","title":"\u53c2\u4e0e\u5f00\u53d1"},{"location":"COMMUNITY/#_2","text":"BFE\u662f\u72ec\u7acb\u7684\u5f00\u6e90\u9879\u76ee\uff0cBFE\u9879\u76ee\u9075\u5faa\u5982\u4e0b \u7ba1\u7406\u529e\u6cd5 \u3002","title":"\u9879\u76ee\u6cbb\u7406"},{"location":"COMMUNITY/#_3","text":"\u4e3a\u4e86\u6784\u5efa\u4e00\u4e2a\u53d7\u6b22\u8fce\u4e14\u65e0\u9a9a\u6270\u7684\u793e\u533a\uff0cBFE\u793e\u533a\u5e94\u9075\u5faa\u5982\u4e0b \u884c\u4e3a\u51c6\u5219 \u3002","title":"\u884c\u4e3a\u51c6\u5219"},{"location":"COMMUNITY/#_4","text":"\u6b22\u8fce\u90ae\u4ef6\u6211\u4eec bfe-osc@baidu.com \u6d3d\u8c08\u3002","title":"\u7533\u8bf7\u4e13\u9879\u5408\u4f5c"},{"location":"DOWNLOAD/","text":"BFE\u63d0\u4f9b\u9884\u7f16\u8bd1\u4e8c\u8fdb\u5236\u6587\u4ef6\u4f9b\u4e0b\u8f7d\u3002\u4e5f\u53ef\u5728GitHub\u4e0b\u8f7d\u5404\u5e73\u53f0 \u6700\u65b0\u7248\u672cBFE \u3002 bfe v0.9.0 2020-04-16 \u53d1\u5e03\u8bf4\u660e \u6587\u4ef6\u540d \u64cd\u4f5c\u7cfb\u7edf \u5e73\u53f0 \u5927\u5c0f SHA256\u68c0\u9a8c\u548c bfe_0.9.0_darwin_amd64.tar.gz darwin amd64 9.75 MB 3bdbb80cc4946bc85b7295fc86ca86800e7811d20f37b36037aadfc7df718ad9 bfe_0.9.0_linux_amd64.tar.gz linux amd64 10.90 MB 9b6aaac88651d88e86e67835b5ae0bdbe1c76076382b198f0aeb0b94b7572887 bfe_0.9.0_windows_amd64.tar.gz windows amd64 9.73 MB 44221fe4c423ebe8d31c6da5bc28fe1ff9dbc84619094097871cb6e3e85ca4ef","title":"\u4e0b\u8f7d"},{"location":"DOWNLOAD/#bfe-v090","text":"2020-04-16 \u53d1\u5e03\u8bf4\u660e \u6587\u4ef6\u540d \u64cd\u4f5c\u7cfb\u7edf \u5e73\u53f0 \u5927\u5c0f SHA256\u68c0\u9a8c\u548c bfe_0.9.0_darwin_amd64.tar.gz darwin amd64 9.75 MB 3bdbb80cc4946bc85b7295fc86ca86800e7811d20f37b36037aadfc7df718ad9 bfe_0.9.0_linux_amd64.tar.gz linux amd64 10.90 MB 9b6aaac88651d88e86e67835b5ae0bdbe1c76076382b198f0aeb0b94b7572887 bfe_0.9.0_windows_amd64.tar.gz windows amd64 9.73 MB 44221fe4c423ebe8d31c6da5bc28fe1ff9dbc84619094097871cb6e3e85ca4ef","title":"bfe v0.9.0"},{"location":"SUMMARY/","text":"Summary \u5173\u4e8e \u4ecb\u7ecd BFE\u6982\u89c8 \u7ade\u54c1\u5bf9\u6bd4 \u8bbe\u8ba1\u7b80\u4ecb \u76f8\u5173\u672f\u8bed \u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u6a21\u578b \u57fa\u4e8e\u5185\u5bb9\u8def\u7531 \u6d41\u91cf\u8d1f\u8f7d\u5747\u8861 \u83b7\u53d6\u5e2e\u52a9 \u53d1\u5e03\u5386\u53f2 \u5feb\u901f\u5f00\u59cb \u5b89\u88c5\u53ca\u8fd0\u884c \u4f7f\u7528\u793a\u4f8b \u6d41\u91cf\u8f6c\u53d1 \u9ed1\u540d\u5355\u5c01\u7981 \u91cd\u5b9a\u5411 \u91cd\u5199 TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1 \u5b89\u88c5\u8bf4\u660e \u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0b\u8f7d\u5b89\u88c5 go\u65b9\u5f0f\u5b89\u88c5 snap\u65b9\u5f0f\u5b89\u88c5 \u914d\u7f6e\u8bf4\u660e \u914d\u7f6e\u6982\u8ff0 \u6838\u5fc3\u914d\u7f6e \u534f\u8bae SSL/TLS \u8bc1\u4e66 Session ticket key \u8def\u7531 \u57df\u540d\u89c4\u5219 VIP\u89c4\u5219 \u8def\u7531\u89c4\u5219 \u540e\u7aef\u96c6\u7fa4 \u8d1f\u8f7d\u5747\u8861 \u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861 \u5b9e\u4f8b\u8d1f\u8f7d\u5747\u8861 \u540d\u5b57\u670d\u52a1 \u540d\u5b57\u89c4\u5219 \u6269\u5c55\u6a21\u5757 mod_access mod_auth_basic mod_auth_jwt mod_block mod_compress mod_doh mod_errors mod_geo mod_header mod_http_code mod_key_log mod_logid mod_prison mod_redirect mod_rewrite mod_static mod_tag mod_trace mod_trust_clientip mod_userid \u8fd0\u7ef4\u7ba1\u7406 \u547d\u4ee4\u884c\u5de5\u5177\u53ca\u53c2\u6570 \u73af\u5883\u53d8\u91cf\u8bf4\u660e \u7cfb\u7edf\u4fe1\u53f7\u8bf4\u660e \u914d\u7f6e\u70ed\u52a0\u8f7d \u76d1\u63a7\u6307\u6807\u83b7\u53d6 \u65e5\u5fd7\u5207\u5272\u5907\u4efd \u6d41\u91cf\u6293\u5305\u5206\u6790 \u6027\u80fd\u6570\u636e\u91c7\u96c6 \u53c2\u4e0e\u8d21\u732e \u5982\u4f55\u8d21\u732e\u4ee3\u7801 \u672c\u5730\u5f00\u53d1\u6307\u5357 \u63d0\u4ea4PR\u6ce8\u610f\u4e8b\u9879 \u5982\u4f55\u8d21\u732e\u6587\u6863 \u7248\u672c\u53d1\u5e03\u8bf4\u660e \u5f00\u53d1\u53c2\u8003\u6587\u6863 \u4ee3\u7801\u7ed3\u6784\u8bf4\u660e \u6a21\u5757\u5f00\u53d1\u4ecb\u7ecd BFE\u56de\u8c03\u673a\u5236\u8bf4\u660e \u5982\u4f55\u5f00\u53d1\u6a21\u5757 \u5e38\u89c1\u95ee\u9898 \u5b89\u88c5\u76f8\u5173 \u914d\u7f6e\u76f8\u5173 \u6027\u80fd\u76f8\u5173 \u5f00\u53d1\u76f8\u5173 \u9644\u5f55A: \u76d1\u63a7 \u534f\u8bae SSL/TLS HTTP HTTP2 SPDY WebSocket Stream \u8def\u7531 \u57df\u540d\u8868 \u8d1f\u8f7d\u5747\u8861 \u5747\u8861\u8be6\u60c5 \u5747\u8861\u9519\u8bef \u53cd\u5411\u4ee3\u7406 \u8f6c\u53d1\u72b6\u6001 \u6269\u5c55\u6a21\u5757 \u5ef6\u8fdf \u5ef6\u8fdf\u5206\u5e03 \u9644\u5f55B\uff1a\u6761\u4ef6\u539f\u8bed \u6761\u4ef6\u7684\u6982\u5ff5\u53ca\u8bed\u6cd5 \u6761\u4ef6\u539f\u8bed\u547d\u540d\u89c4\u8303 \u6761\u4ef6\u539f\u8bed\u7d22\u5f15 \u8bf7\u6c42\u76f8\u5173\u6761\u4ef6\u539f\u8bed Method URI Protocol Header Cookie Tag IP \u54cd\u5e94\u76f8\u5173\u6761\u4ef6\u539f\u8bed Code Header \u4f1a\u8bdd\u76f8\u5173\u6761\u4ef6\u539f\u8bed IP TLS \u7cfb\u7edf\u76f8\u5173\u6761\u4ef6\u539f\u8bed Time","title":"Summary"},{"location":"SUMMARY/#summary","text":"\u5173\u4e8e \u4ecb\u7ecd BFE\u6982\u89c8 \u7ade\u54c1\u5bf9\u6bd4 \u8bbe\u8ba1\u7b80\u4ecb \u76f8\u5173\u672f\u8bed \u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u6a21\u578b \u57fa\u4e8e\u5185\u5bb9\u8def\u7531 \u6d41\u91cf\u8d1f\u8f7d\u5747\u8861 \u83b7\u53d6\u5e2e\u52a9 \u53d1\u5e03\u5386\u53f2 \u5feb\u901f\u5f00\u59cb \u5b89\u88c5\u53ca\u8fd0\u884c \u4f7f\u7528\u793a\u4f8b \u6d41\u91cf\u8f6c\u53d1 \u9ed1\u540d\u5355\u5c01\u7981 \u91cd\u5b9a\u5411 \u91cd\u5199 TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1 \u5b89\u88c5\u8bf4\u660e \u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0b\u8f7d\u5b89\u88c5 go\u65b9\u5f0f\u5b89\u88c5 snap\u65b9\u5f0f\u5b89\u88c5 \u914d\u7f6e\u8bf4\u660e \u914d\u7f6e\u6982\u8ff0 \u6838\u5fc3\u914d\u7f6e \u534f\u8bae SSL/TLS \u8bc1\u4e66 Session ticket key \u8def\u7531 \u57df\u540d\u89c4\u5219 VIP\u89c4\u5219 \u8def\u7531\u89c4\u5219 \u540e\u7aef\u96c6\u7fa4 \u8d1f\u8f7d\u5747\u8861 \u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861 \u5b9e\u4f8b\u8d1f\u8f7d\u5747\u8861 \u540d\u5b57\u670d\u52a1 \u540d\u5b57\u89c4\u5219 \u6269\u5c55\u6a21\u5757 mod_access mod_auth_basic mod_auth_jwt mod_block mod_compress mod_doh mod_errors mod_geo mod_header mod_http_code mod_key_log mod_logid mod_prison mod_redirect mod_rewrite mod_static mod_tag mod_trace mod_trust_clientip mod_userid \u8fd0\u7ef4\u7ba1\u7406 \u547d\u4ee4\u884c\u5de5\u5177\u53ca\u53c2\u6570 \u73af\u5883\u53d8\u91cf\u8bf4\u660e \u7cfb\u7edf\u4fe1\u53f7\u8bf4\u660e \u914d\u7f6e\u70ed\u52a0\u8f7d \u76d1\u63a7\u6307\u6807\u83b7\u53d6 \u65e5\u5fd7\u5207\u5272\u5907\u4efd \u6d41\u91cf\u6293\u5305\u5206\u6790 \u6027\u80fd\u6570\u636e\u91c7\u96c6 \u53c2\u4e0e\u8d21\u732e \u5982\u4f55\u8d21\u732e\u4ee3\u7801 \u672c\u5730\u5f00\u53d1\u6307\u5357 \u63d0\u4ea4PR\u6ce8\u610f\u4e8b\u9879 \u5982\u4f55\u8d21\u732e\u6587\u6863 \u7248\u672c\u53d1\u5e03\u8bf4\u660e \u5f00\u53d1\u53c2\u8003\u6587\u6863 \u4ee3\u7801\u7ed3\u6784\u8bf4\u660e \u6a21\u5757\u5f00\u53d1\u4ecb\u7ecd BFE\u56de\u8c03\u673a\u5236\u8bf4\u660e \u5982\u4f55\u5f00\u53d1\u6a21\u5757 \u5e38\u89c1\u95ee\u9898 \u5b89\u88c5\u76f8\u5173 \u914d\u7f6e\u76f8\u5173 \u6027\u80fd\u76f8\u5173 \u5f00\u53d1\u76f8\u5173 \u9644\u5f55A: \u76d1\u63a7 \u534f\u8bae SSL/TLS HTTP HTTP2 SPDY WebSocket Stream \u8def\u7531 \u57df\u540d\u8868 \u8d1f\u8f7d\u5747\u8861 \u5747\u8861\u8be6\u60c5 \u5747\u8861\u9519\u8bef \u53cd\u5411\u4ee3\u7406 \u8f6c\u53d1\u72b6\u6001 \u6269\u5c55\u6a21\u5757 \u5ef6\u8fdf \u5ef6\u8fdf\u5206\u5e03 \u9644\u5f55B\uff1a\u6761\u4ef6\u539f\u8bed \u6761\u4ef6\u7684\u6982\u5ff5\u53ca\u8bed\u6cd5 \u6761\u4ef6\u539f\u8bed\u547d\u540d\u89c4\u8303 \u6761\u4ef6\u539f\u8bed\u7d22\u5f15 \u8bf7\u6c42\u76f8\u5173\u6761\u4ef6\u539f\u8bed Method URI Protocol Header Cookie Tag IP \u54cd\u5e94\u76f8\u5173\u6761\u4ef6\u539f\u8bed Code Header \u4f1a\u8bdd\u76f8\u5173\u6761\u4ef6\u539f\u8bed IP TLS \u7cfb\u7edf\u76f8\u5173\u6761\u4ef6\u539f\u8bed Time","title":"Summary"},{"location":"condition/condition_grammar/","text":"\u6761\u4ef6\u8bed\u6cd5 \u57fa\u672c\u6982\u5ff5: \u539f\u8bed\u3001\u8868\u8fbe\u5f0f\u548c\u53d8\u91cf \u6761\u4ef6\u539f\u8bed\uff08Condition Primitive\uff09 \u6700\u57fa\u672c\u7684\u6761\u4ef6\u5224\u65ad\u5355\u5143\uff0c\u5b9a\u4e49\u4e86\u6bd4\u8f83\u7684\u539f\u8bed # host\u662f\u4e24\u4e2a\u57df\u540d\u4e4b\u4e00 req_host_in(\"www.bfe-networks.com|bfe-networks.com\") \u6761\u4ef6\u8868\u8fbe\u5f0f\uff08Condition Expression\uff09 \u57fa\u4e8e\u6761\u4ef6\u539f\u8bed\u7684\u201c\u4e0e/\u6216/\u975e\u7ec4\u5408\u201d # \u57df\u540d\u662fbfe-networks.com\u4e14\u65b9\u6cd5\u662fGET req_host_in(\"bfe-networks.com\") && req_method_in(\"GET\") \u6761\u4ef6\u53d8\u91cf\uff08Condition Variable\uff09 \u53ef\u4ee5\u5c06 \u6761\u4ef6\u8868\u8fbe\u5f0f \u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u4e2a\u53d8\u91cf\u88ab\u5b9a\u4e49\u4e3a\u6761\u4ef6\u53d8\u91cf # \u5c06\u6761\u4ef6\u8868\u8fbe\u5f0f\u8d4b\u503c\u7ed9\u53d8\u91cfbfe_host bfe_host = req_host_in(\"bfe-networks.com\") \u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\uff08Advanced Condition Expression\uff09 \u57fa\u4e8e\u6761\u4ef6\u539f\u8bed\u548c\u6761\u4ef6\u53d8\u91cf\u7684\u201c\u4e0e/\u6216/\u975e\u7ec4\u5408\u201d \u5728\u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e2d\uff0c\u6761\u4ef6\u53d8\u91cf\u4ee5$\u524d\u7f00\u4f5c\u4e3a\u6807\u793a # \u7b26\u5408\u53d8\u91cfnews_host\u4e14\u65b9\u6cd5\u662fGET $news_host && req_method_in(\"GET\") \u6761\u4ef6\u539f\u8bed\u7684\u8bed\u6cd5 \u6761\u4ef6\u539f\u8bed \u662f\u6700\u57fa\u672c\u7684\u6761\u4ef6\u5224\u65ad\u5355\u5143\uff0c\u5f62\u5f0f\u4e3a\uff1a \u200b func_name( params ) \u6761\u4ef6\u539f\u8bed\u7c7b\u4f3c\u4e8e\u51fd\u6570\u5b9a\u4e49: func_name\u662f\u6761\u4ef6\u539f\u8bed\u540d\u79f0; params\u662f\u53c2\u6570\uff0c\u53ef\u80fd\u662f1\u4e2a\u6216\u591a\u4e2a \u6761\u4ef6\u539f\u8bed\u7684\u8fd4\u56de\u503c\u90fd\u662fbool\u7c7b\u578b BFE\u652f\u6301\u4e00\u7cfb\u5217\u9884\u5b9a\u4e49\u7684\u5185\u7f6e \u6761\u4ef6\u539f\u8bed \u4f8b: req_method_in(\"GET|POST\") \uff0c\u8868\u793a\u5224\u65adhttp\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u4e0d\u662fGET\u6216POST \u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5 \u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u5b9a\u4e49\u5982\u4e0b\uff1a \u4e0ec\u8bed\u8a00\u4e2d\u7684&&\u3001||\u3001\uff01\u6709\u4e00\u81f4\u7684\u4f18\u5148\u7ea7\u548c\u7ed3\u5408\u5f8b \u8bed\u6cd5\u63cf\u8ff0 Condition Expression(CE) -> CE && CE | CE || CE | ( CE ) | ! CE | Condition Primitive \u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5 \u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u5b9a\u4e49\u5982\u4e0b\uff1a \u4e0ec\u8bed\u8a00\u4e2d\u7684&&\u3001||\u3001\uff01\u6709\u4e00\u81f4\u7684\u4f18\u5148\u7ea7\u548c\u7ed3\u5408\u5f8b \u8bed\u6cd5\u63cf\u8ff0 Advanced Condition Expression(ACE) -> ACE && ACE | ACE || ACE | ( ACE) | ! ACE | Condition Primitive | Condition Variable","title":"\u6761\u4ef6\u7684\u6982\u5ff5\u53ca\u8bed\u6cd5"},{"location":"condition/condition_grammar/#_1","text":"","title":"\u6761\u4ef6\u8bed\u6cd5"},{"location":"condition/condition_grammar/#_2","text":"","title":"\u57fa\u672c\u6982\u5ff5: \u539f\u8bed\u3001\u8868\u8fbe\u5f0f\u548c\u53d8\u91cf"},{"location":"condition/condition_grammar/#condition-primitive","text":"\u6700\u57fa\u672c\u7684\u6761\u4ef6\u5224\u65ad\u5355\u5143\uff0c\u5b9a\u4e49\u4e86\u6bd4\u8f83\u7684\u539f\u8bed # host\u662f\u4e24\u4e2a\u57df\u540d\u4e4b\u4e00 req_host_in(\"www.bfe-networks.com|bfe-networks.com\")","title":"\u6761\u4ef6\u539f\u8bed\uff08Condition Primitive\uff09"},{"location":"condition/condition_grammar/#condition-expression","text":"\u57fa\u4e8e\u6761\u4ef6\u539f\u8bed\u7684\u201c\u4e0e/\u6216/\u975e\u7ec4\u5408\u201d # \u57df\u540d\u662fbfe-networks.com\u4e14\u65b9\u6cd5\u662fGET req_host_in(\"bfe-networks.com\") && req_method_in(\"GET\")","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f\uff08Condition Expression\uff09"},{"location":"condition/condition_grammar/#condition-variable","text":"\u53ef\u4ee5\u5c06 \u6761\u4ef6\u8868\u8fbe\u5f0f \u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u4e2a\u53d8\u91cf\u88ab\u5b9a\u4e49\u4e3a\u6761\u4ef6\u53d8\u91cf # \u5c06\u6761\u4ef6\u8868\u8fbe\u5f0f\u8d4b\u503c\u7ed9\u53d8\u91cfbfe_host bfe_host = req_host_in(\"bfe-networks.com\")","title":"\u6761\u4ef6\u53d8\u91cf\uff08Condition Variable\uff09"},{"location":"condition/condition_grammar/#advanced-condition-expression","text":"\u57fa\u4e8e\u6761\u4ef6\u539f\u8bed\u548c\u6761\u4ef6\u53d8\u91cf\u7684\u201c\u4e0e/\u6216/\u975e\u7ec4\u5408\u201d \u5728\u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e2d\uff0c\u6761\u4ef6\u53d8\u91cf\u4ee5$\u524d\u7f00\u4f5c\u4e3a\u6807\u793a # \u7b26\u5408\u53d8\u91cfnews_host\u4e14\u65b9\u6cd5\u662fGET $news_host && req_method_in(\"GET\")","title":"\u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\uff08Advanced Condition Expression\uff09"},{"location":"condition/condition_grammar/#_3","text":"\u6761\u4ef6\u539f\u8bed \u662f\u6700\u57fa\u672c\u7684\u6761\u4ef6\u5224\u65ad\u5355\u5143\uff0c\u5f62\u5f0f\u4e3a\uff1a \u200b func_name( params ) \u6761\u4ef6\u539f\u8bed\u7c7b\u4f3c\u4e8e\u51fd\u6570\u5b9a\u4e49: func_name\u662f\u6761\u4ef6\u539f\u8bed\u540d\u79f0; params\u662f\u53c2\u6570\uff0c\u53ef\u80fd\u662f1\u4e2a\u6216\u591a\u4e2a \u6761\u4ef6\u539f\u8bed\u7684\u8fd4\u56de\u503c\u90fd\u662fbool\u7c7b\u578b BFE\u652f\u6301\u4e00\u7cfb\u5217\u9884\u5b9a\u4e49\u7684\u5185\u7f6e \u6761\u4ef6\u539f\u8bed \u4f8b: req_method_in(\"GET|POST\") \uff0c\u8868\u793a\u5224\u65adhttp\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u4e0d\u662fGET\u6216POST","title":"\u6761\u4ef6\u539f\u8bed\u7684\u8bed\u6cd5"},{"location":"condition/condition_grammar/#_4","text":"\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u5b9a\u4e49\u5982\u4e0b\uff1a \u4e0ec\u8bed\u8a00\u4e2d\u7684&&\u3001||\u3001\uff01\u6709\u4e00\u81f4\u7684\u4f18\u5148\u7ea7\u548c\u7ed3\u5408\u5f8b \u8bed\u6cd5\u63cf\u8ff0 Condition Expression(CE) -> CE && CE | CE || CE | ( CE ) | ! CE | Condition Primitive","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5"},{"location":"condition/condition_grammar/#_5","text":"\u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u5b9a\u4e49\u5982\u4e0b\uff1a \u4e0ec\u8bed\u8a00\u4e2d\u7684&&\u3001||\u3001\uff01\u6709\u4e00\u81f4\u7684\u4f18\u5148\u7ea7\u548c\u7ed3\u5408\u5f8b \u8bed\u6cd5\u63cf\u8ff0 Advanced Condition Expression(ACE) -> ACE && ACE | ACE || ACE | ( ACE) | ! ACE | Condition Primitive | Condition Variable","title":"\u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5"},{"location":"condition/condition_naming_convention/","text":"\u6761\u4ef6\u539f\u8bed\u540d\u79f0\u7684\u89c4\u8303 \u6761\u4ef6\u539f\u8bed\u540d\u79f0\u4f1a\u4f7f\u7528\u4ee5\u4e0b\u89c4\u8303\uff1a \u6761\u4ef6\u539f\u8bed\u524d\u7f00: \u9488\u5bf9Request\u7684\u539f\u8bed\uff0c\u4f1a\u4ee5\u201d req_ \u201c\u5f00\u5934 \u5982\uff1a req_host_in() \u9488\u5bf9Response\u7684\u539f\u8bed\uff0c\u4f1a\u4ee5\u201d res_ \u201c\u5f00\u5934 \u5982\uff1a res_code_in() \u9488\u5bf9Session\u7684\u539f\u8bed\uff0c\u4f1a\u4ee5\" ses_ \"\u5f00\u5934 \u5982\uff1a ses_vip_in() \u9488\u5bf9\u7cfb\u7edf\u539f\u8bed\uff0c\u4f1a\u4ee5\u201c bfe_ \" \u5f00\u5934 \u5982\uff1a bfe_time_range () \u6761\u4ef6\u539f\u8bed\u4e2d\u6bd4\u8f83\u7684\u201c\u52a8\u4f5c\u201d\u540d\u79f0: match \uff1a\u7cbe\u786e\u5339\u914d \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53c2\u6570\u4e2d\u4f1a\u63d0\u4f9b\u552f\u4e00\u7684\u4e00\u4e2a\u503c\u4f9b\u6bd4\u8f83 \u5982\uff1a req_tag_match() in \uff1a\u503c\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_host_in() prefix_in \uff1a\u503c\u7684\u524d\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_path_prefix_in() suffix_in \uff1a\u503c\u7684\u540e\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_path_suffix_in() key_exist \uff1a\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7684key \u5982\uff1a req_query_key_exist() value_in \uff1a\u5bf9\u7ed9\u5b9a\u7684key\uff0c\u5176value\u662f\u5426\u843d\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_query_key_exist() value_prefix_in \uff1a\u5bf9\u7ed9\u5b9a\u7684key\uff0c\u5176value\u7684\u524d\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_header_value_prefix_in() value_suffix_in \uff1a\u5bf9\u7ed9\u5b9a\u7684key\uff0c\u5176value\u7684\u540e\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_header_value_suffix_in() range :\u8303\u56f4\u5339\u914d \u5982\uff1a req_cip_range() regmatch \uff1a\u6b63\u5219\u5339\u914d \u5982\uff1a req_url_regmatch() \u6ce8\uff1a\u8fd9\u7c7b\u6761\u4ef6\u539f\u8bed\u4e0d\u5408\u7406\u4f7f\u7528\u5c06\u660e\u663e\u5f71\u54cd\u6027\u80fd\uff0c\u8c28\u614e\u4f7f\u7528 contain : \u5b57\u7b26\u4e32\u5305\u542b\u5339\u914d \u5982\uff1a req_cookie_value_contain()","title":"\u6761\u4ef6\u539f\u8bed\u547d\u540d\u89c4\u8303"},{"location":"condition/condition_naming_convention/#_1","text":"\u6761\u4ef6\u539f\u8bed\u540d\u79f0\u4f1a\u4f7f\u7528\u4ee5\u4e0b\u89c4\u8303\uff1a","title":"\u6761\u4ef6\u539f\u8bed\u540d\u79f0\u7684\u89c4\u8303"},{"location":"condition/condition_naming_convention/#_2","text":"\u9488\u5bf9Request\u7684\u539f\u8bed\uff0c\u4f1a\u4ee5\u201d req_ \u201c\u5f00\u5934 \u5982\uff1a req_host_in() \u9488\u5bf9Response\u7684\u539f\u8bed\uff0c\u4f1a\u4ee5\u201d res_ \u201c\u5f00\u5934 \u5982\uff1a res_code_in() \u9488\u5bf9Session\u7684\u539f\u8bed\uff0c\u4f1a\u4ee5\" ses_ \"\u5f00\u5934 \u5982\uff1a ses_vip_in() \u9488\u5bf9\u7cfb\u7edf\u539f\u8bed\uff0c\u4f1a\u4ee5\u201c bfe_ \" \u5f00\u5934 \u5982\uff1a bfe_time_range ()","title":"\u6761\u4ef6\u539f\u8bed\u524d\u7f00:"},{"location":"condition/condition_naming_convention/#_3","text":"match \uff1a\u7cbe\u786e\u5339\u914d \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53c2\u6570\u4e2d\u4f1a\u63d0\u4f9b\u552f\u4e00\u7684\u4e00\u4e2a\u503c\u4f9b\u6bd4\u8f83 \u5982\uff1a req_tag_match() in \uff1a\u503c\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_host_in() prefix_in \uff1a\u503c\u7684\u524d\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_path_prefix_in() suffix_in \uff1a\u503c\u7684\u540e\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_path_suffix_in() key_exist \uff1a\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7684key \u5982\uff1a req_query_key_exist() value_in \uff1a\u5bf9\u7ed9\u5b9a\u7684key\uff0c\u5176value\u662f\u5426\u843d\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_query_key_exist() value_prefix_in \uff1a\u5bf9\u7ed9\u5b9a\u7684key\uff0c\u5176value\u7684\u524d\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_header_value_prefix_in() value_suffix_in \uff1a\u5bf9\u7ed9\u5b9a\u7684key\uff0c\u5176value\u7684\u540e\u7f00\u662f\u5426\u5728\u67d0\u4e2a\u96c6\u5408\u4e2d \u5982\uff1a req_header_value_suffix_in() range :\u8303\u56f4\u5339\u914d \u5982\uff1a req_cip_range() regmatch \uff1a\u6b63\u5219\u5339\u914d \u5982\uff1a req_url_regmatch() \u6ce8\uff1a\u8fd9\u7c7b\u6761\u4ef6\u539f\u8bed\u4e0d\u5408\u7406\u4f7f\u7528\u5c06\u660e\u663e\u5f71\u54cd\u6027\u80fd\uff0c\u8c28\u614e\u4f7f\u7528 contain : \u5b57\u7b26\u4e32\u5305\u542b\u5339\u914d \u5982\uff1a req_cookie_value_contain()","title":"\u6761\u4ef6\u539f\u8bed\u4e2d\u6bd4\u8f83\u7684\u201c\u52a8\u4f5c\u201d\u540d\u79f0:"},{"location":"condition/condition_primitive_index/","text":"\u6761\u4ef6\u539f\u8bed\u7d22\u5f15 \u8bf7\u6c42\u76f8\u5173 req_cip_hash_in(value_list) req_cip_range(start_ip, end_ip) req_cip_trusted() req_cookie_key_in(key_list) req_cookie_value_contain(key, value, case_insensitive) req_cookie_value_in(key, value_list, case_insensitive) req_cookie_value_hash_in(key, value_list, case_insensitive) req_cookie_value_prefix_in(key, value_prefix_list, case_insensitive) req_cookie_value_suffix_in(key, value_suffix_list, case_insensitive) req_header_key_in(key_list) req_header_value_contain(key, value_list, case_insensitive) req_header_value_in(header_name, value_list, case_insensitive) req_header_value_hash_in(header_name, value_list, case_insensitive) req_header_value_prefix_in(header_name, value_prefix_list, case_insensitive) req_header_value_suffix_in(header_name, value_suffix_list, case_insensitive) req_host_in(host_list) req_method_in(method_list) req_proto_secure() req_tag_match(tagName, tagValue) req_path_in(path_list, case_insensitive) req_path_prefix_in(prefix_list, case_insensitive) req_path_suffix_in(suffix_list, case_insensitive) req_query_key_in(key_list) req_query_key_prefix_in(prefix_list) req_query_value_in(key, value_list, case_insensitive) req_query_value_hash_in(key, value_list, case_insensitive) req_query_value_prefix_in(key, prefix_list, case_insensitive) req_query_value_suffix_in(key, suffix_list, case_insensitive) req_port_in(port_list) req_url_regmatch(reg_exp) req_vip_in(vip_list) req_vip_range(start_ip, end_ip) \u54cd\u5e94\u76f8\u5173 res_code_in(codes) res_header_key_in(key_list) res_header_value_in(key, value_list, case_insensitive) \u4f1a\u8bdd\u76f8\u5173 ses_sip_range(start_ip, end_ip) ses_vip_range(start_ip, end_ip) ses_tls_sni_in(host_list) ses_tls_client_auth() ses_tls_client_ca_in(ca_list) \u7cfb\u7edf\u76f8\u5173 bfe_time_range(start_time, end_time)","title":"\u6761\u4ef6\u539f\u8bed\u7d22\u5f15"},{"location":"condition/condition_primitive_index/#_1","text":"","title":"\u6761\u4ef6\u539f\u8bed\u7d22\u5f15"},{"location":"condition/condition_primitive_index/#_2","text":"req_cip_hash_in(value_list) req_cip_range(start_ip, end_ip) req_cip_trusted() req_cookie_key_in(key_list) req_cookie_value_contain(key, value, case_insensitive) req_cookie_value_in(key, value_list, case_insensitive) req_cookie_value_hash_in(key, value_list, case_insensitive) req_cookie_value_prefix_in(key, value_prefix_list, case_insensitive) req_cookie_value_suffix_in(key, value_suffix_list, case_insensitive) req_header_key_in(key_list) req_header_value_contain(key, value_list, case_insensitive) req_header_value_in(header_name, value_list, case_insensitive) req_header_value_hash_in(header_name, value_list, case_insensitive) req_header_value_prefix_in(header_name, value_prefix_list, case_insensitive) req_header_value_suffix_in(header_name, value_suffix_list, case_insensitive) req_host_in(host_list) req_method_in(method_list) req_proto_secure() req_tag_match(tagName, tagValue) req_path_in(path_list, case_insensitive) req_path_prefix_in(prefix_list, case_insensitive) req_path_suffix_in(suffix_list, case_insensitive) req_query_key_in(key_list) req_query_key_prefix_in(prefix_list) req_query_value_in(key, value_list, case_insensitive) req_query_value_hash_in(key, value_list, case_insensitive) req_query_value_prefix_in(key, prefix_list, case_insensitive) req_query_value_suffix_in(key, suffix_list, case_insensitive) req_port_in(port_list) req_url_regmatch(reg_exp) req_vip_in(vip_list) req_vip_range(start_ip, end_ip)","title":"\u8bf7\u6c42\u76f8\u5173"},{"location":"condition/condition_primitive_index/#_3","text":"res_code_in(codes) res_header_key_in(key_list) res_header_value_in(key, value_list, case_insensitive)","title":"\u54cd\u5e94\u76f8\u5173"},{"location":"condition/condition_primitive_index/#_4","text":"ses_sip_range(start_ip, end_ip) ses_vip_range(start_ip, end_ip) ses_tls_sni_in(host_list) ses_tls_client_auth() ses_tls_client_ca_in(ca_list)","title":"\u4f1a\u8bdd\u76f8\u5173"},{"location":"condition/condition_primitive_index/#_5","text":"bfe_time_range(start_time, end_time)","title":"\u7cfb\u7edf\u76f8\u5173"},{"location":"condition/request/cookie/","text":"\u8bf7\u6c42Cookie\u76f8\u5173\u6761\u4ef6\u539f\u8bed req_cookie_key_in(key_list) \u542b\u4e49\uff1a \u5224\u65adCookie key\u662f\u5426\u4e3akey_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String key\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_cookie_key_in(\"uid|cid|uss\") req_cookie_value_in(key, value_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u5bf9\u5e94\u7684\u503c\u662f\u5426\u4e3avalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_in(\"deviceid\", \"testid\", true) req_cookie_value_prefix_in(key, prefix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u7684\u503c\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key prefix_list String prefix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_prefix_in(\"deviceid\", \"x\", true) req_cookie_value_suffix_in(key, suffix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u7684\u503c\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key suffix_list String suffix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_suffix_in(\"deviceid\", \"1\", true) req_cookie_value_hash_in(key, hash_value_list, case_insensitive) \u542b\u4e49\uff1a \u5bf9cookie\u4e2dkey\u7684\u503c\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u662f\u5426\u5339\u914dhash_value_list\u4e4b\u4e00\uff08\u6a21\u503c0\uff5e9999\uff09 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key hash_value_list String hash value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_hash_in(\"uid\", \"100\", true) req_cookie_value_contain(key, value_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u7684\u503c\u662f\u5426\u5305\u542bvalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_contain(\"deviceid\", \"test\", true)","title":"Cookie"},{"location":"condition/request/cookie/#cookie","text":"","title":"\u8bf7\u6c42Cookie\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/request/cookie/#req_cookie_key_inkey_list","text":"\u542b\u4e49\uff1a \u5224\u65adCookie key\u662f\u5426\u4e3akey_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String key\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_cookie_key_in(\"uid|cid|uss\")","title":"req_cookie_key_in(key_list)"},{"location":"condition/request/cookie/#req_cookie_value_inkey-value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u5bf9\u5e94\u7684\u503c\u662f\u5426\u4e3avalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_in(\"deviceid\", \"testid\", true)","title":"req_cookie_value_in(key, value_list, case_insensitive)"},{"location":"condition/request/cookie/#req_cookie_value_prefix_inkey-prefix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u7684\u503c\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key prefix_list String prefix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_prefix_in(\"deviceid\", \"x\", true)","title":"req_cookie_value_prefix_in(key, prefix_list, case_insensitive)"},{"location":"condition/request/cookie/#req_cookie_value_suffix_inkey-suffix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u7684\u503c\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key suffix_list String suffix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_suffix_in(\"deviceid\", \"1\", true)","title":"req_cookie_value_suffix_in(key, suffix_list, case_insensitive)"},{"location":"condition/request/cookie/#req_cookie_value_hash_inkey-hash_value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5bf9cookie\u4e2dkey\u7684\u503c\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u662f\u5426\u5339\u914dhash_value_list\u4e4b\u4e00\uff08\u6a21\u503c0\uff5e9999\uff09 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key hash_value_list String hash value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_hash_in(\"uid\", \"100\", true)","title":"req_cookie_value_hash_in(key, hash_value_list, case_insensitive)"},{"location":"condition/request/cookie/#req_cookie_value_containkey-value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adcookie\u4e2dkey\u7684\u503c\u662f\u5426\u5305\u542bvalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String cookie\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_cookie_value_contain(\"deviceid\", \"test\", true)","title":"req_cookie_value_contain(key, value_list, case_insensitive)"},{"location":"condition/request/header/","text":"\u8bf7\u6c42\u5934\u90e8\u76f8\u5173\u6761\u4ef6\u539f\u8bed req_header_key_in(key_list) \u542b\u4e49\uff1a \u5224\u65ad\u8bf7\u6c42\u5934\u90e8\u4e2dkey\u662f\u5426\u4e3akey_list\u4e4b\u4e00 \u6ce8\uff1aHeader\u540d\u79f0\u4f7f\u7528HTTP\u534f\u8bae\u89c4\u8303\u5f62\u5f0f \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String key\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b # \u6b63\u786e\uff1a req_header_key_in ( \"Header-Test\" ) # \u9519\u8bef\uff1a req_header_key_in ( \"Header-test\" ) req_header_key_in ( \"header-test\" ) req_header_key_in ( \"header-Test\" ) req_header_value_in(header_name, value_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u662f\u5426\u4e3avalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_in(\"Referer\", \"https://example.org/login\", true) req_header_value_prefix_in(header_name, prefix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key prefix_list String prefix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_prefix_in(\"Referer\", \"https://example.org\", true) req_header_value_suffix_in(header_name, suffix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key suffix_list String suffix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_suffix_in(\"User-Agent\", \"2.0.4\", true) req_header_value_hash_in(header_name, hash_value_list, case_insensitive) \u542b\u4e49\uff1a \u5bf9http\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u662f\u5426\u5339\u914dhash_value_list\u4e4b\u4e00\uff08\u6a21\u503c0\uff5e9999\uff09 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key hash_value_list String hash value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_hash_in(\"X-Device-Id\", \"100-200|400\", true) req_header_value_contain(header_name, value_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u662f\u5426\u5305\u542bvalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_contain(\"User-Agent\", \"Firefox|Chrome\", true)","title":"Header"},{"location":"condition/request/header/#_1","text":"","title":"\u8bf7\u6c42\u5934\u90e8\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/request/header/#req_header_key_inkey_list","text":"\u542b\u4e49\uff1a \u5224\u65ad\u8bf7\u6c42\u5934\u90e8\u4e2dkey\u662f\u5426\u4e3akey_list\u4e4b\u4e00 \u6ce8\uff1aHeader\u540d\u79f0\u4f7f\u7528HTTP\u534f\u8bae\u89c4\u8303\u5f62\u5f0f \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String key\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b # \u6b63\u786e\uff1a req_header_key_in ( \"Header-Test\" ) # \u9519\u8bef\uff1a req_header_key_in ( \"Header-test\" ) req_header_key_in ( \"header-test\" ) req_header_key_in ( \"header-Test\" )","title":"req_header_key_in(key_list)"},{"location":"condition/request/header/#req_header_value_inheader_name-value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u662f\u5426\u4e3avalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_in(\"Referer\", \"https://example.org/login\", true)","title":"req_header_value_in(header_name, value_list, case_insensitive)"},{"location":"condition/request/header/#req_header_value_prefix_inheader_name-prefix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key prefix_list String prefix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_prefix_in(\"Referer\", \"https://example.org\", true)","title":"req_header_value_prefix_in(header_name, prefix_list, case_insensitive)"},{"location":"condition/request/header/#req_header_value_suffix_inheader_name-suffix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key suffix_list String suffix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_suffix_in(\"User-Agent\", \"2.0.4\", true)","title":"req_header_value_suffix_in(header_name, suffix_list, case_insensitive)"},{"location":"condition/request/header/#req_header_value_hash_inheader_name-hash_value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5bf9http\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u662f\u5426\u5339\u914dhash_value_list\u4e4b\u4e00\uff08\u6a21\u503c0\uff5e9999\uff09 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key hash_value_list String hash value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_hash_in(\"X-Device-Id\", \"100-200|400\", true)","title":"req_header_value_hash_in(header_name, hash_value_list, case_insensitive)"},{"location":"condition/request/header/#req_header_value_containheader_name-value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u6d88\u606f\u5934\u90e8\u5b57\u6bb5\u503c\u662f\u5426\u5305\u542bvalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 header_name String \u8bf7\u6c42header\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_header_value_contain(\"User-Agent\", \"Firefox|Chrome\", true)","title":"req_header_value_contain(header_name, value_list, case_insensitive)"},{"location":"condition/request/ip/","text":"\u8bf7\u6c42IP\u76f8\u5173\u6761\u4ef6\u539f\u8bed req_cip_range(start_ip, end_ip) \u542b\u4e49\uff1a\u5224\u65ad\u8bf7\u6c42\u7684clientip\u662f\u5426\u5728 [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b req_cip_range(\"10.0.0.1\", \"10.0.0.10\") req_cip_trusted() \u542b\u4e49\uff1a\u5224\u65adclientip\u662f\u5426\u4e3a\u4fe1\u4efbIP req_cip_hash_in(value_list) \u542b\u4e49\uff1a\u5bf9cip\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u503c\u662f\u5426\u5339\u914dvalue_list \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 value_list String \u54c8\u5e0c\u503c\u5217\u8868, \u591a\u4e2a\u5143\u7d20\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694; \u5217\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u662f\u5355\u4e2a\u6570\u503c\uff0c\u6216\u53d6\u503c\u8303\u56f4; \u54c8\u5e0c\u503c\u8303\u56f40~9999 \u793a\u4f8b req_cip_hash_in(\"100\") req_cip_hash_in(\"100-200\") req_cip_hash_in(\"100-200|1000-1100\") req_vip_in(vip_list) \u542b\u4e49: \u5224\u65ad\u8bbf\u95eeVIP\u662f\u5426\u5728\u6307\u5b9avip_list\u4e2d \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 vip_list String VIP\u5217\u8868, \u591a\u4e2aVIP\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b req_vip_in(\"10.0.0.1|10.0.0.2\") req_vip_range(start_ip, end_ip) \u542b\u4e49: \u5224\u65ad\u8bbf\u95eeVIP\u662f\u5426\u5728\u6307\u5b9a [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b req_vip_range(\"10.0.0.1\", \"10.0.0.10\")","title":"IP"},{"location":"condition/request/ip/#ip","text":"","title":"\u8bf7\u6c42IP\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/request/ip/#req_cip_rangestart_ip-end_ip","text":"\u542b\u4e49\uff1a\u5224\u65ad\u8bf7\u6c42\u7684clientip\u662f\u5426\u5728 [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b req_cip_range(\"10.0.0.1\", \"10.0.0.10\")","title":"req_cip_range(start_ip, end_ip)"},{"location":"condition/request/ip/#req_cip_trusted","text":"\u542b\u4e49\uff1a\u5224\u65adclientip\u662f\u5426\u4e3a\u4fe1\u4efbIP","title":"req_cip_trusted()"},{"location":"condition/request/ip/#req_cip_hash_invalue_list","text":"\u542b\u4e49\uff1a\u5bf9cip\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u503c\u662f\u5426\u5339\u914dvalue_list \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 value_list String \u54c8\u5e0c\u503c\u5217\u8868, \u591a\u4e2a\u5143\u7d20\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694; \u5217\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u662f\u5355\u4e2a\u6570\u503c\uff0c\u6216\u53d6\u503c\u8303\u56f4; \u54c8\u5e0c\u503c\u8303\u56f40~9999 \u793a\u4f8b req_cip_hash_in(\"100\") req_cip_hash_in(\"100-200\") req_cip_hash_in(\"100-200|1000-1100\")","title":"req_cip_hash_in(value_list)"},{"location":"condition/request/ip/#req_vip_invip_list","text":"\u542b\u4e49: \u5224\u65ad\u8bbf\u95eeVIP\u662f\u5426\u5728\u6307\u5b9avip_list\u4e2d \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 vip_list String VIP\u5217\u8868, \u591a\u4e2aVIP\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b req_vip_in(\"10.0.0.1|10.0.0.2\")","title":"req_vip_in(vip_list)"},{"location":"condition/request/ip/#req_vip_rangestart_ip-end_ip","text":"\u542b\u4e49: \u5224\u65ad\u8bbf\u95eeVIP\u662f\u5426\u5728\u6307\u5b9a [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b req_vip_range(\"10.0.0.1\", \"10.0.0.10\")","title":"req_vip_range(start_ip, end_ip)"},{"location":"condition/request/method/","text":"\u8bf7\u6c42\u65b9\u6cd5\u76f8\u5173\u6761\u4ef6\u539f\u8bed req_method_in(method_list) \u542b\u4e49: \u8bf7\u6c42\u65b9\u6cd5\u662f\u5426\u5339\u914dmethod_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 method_list String \u8bf7\u6c42\u65b9\u6cd5\u5217\u8868\uff0c\u591a\u4e2a\u65b9\u6cd5\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u65b9\u6cd5\u53d6\u503cGET/POST/PUT/DELETE \u793a\u4f8b req_method_in(\"GET|POST\")","title":"Method"},{"location":"condition/request/method/#_1","text":"","title":"\u8bf7\u6c42\u65b9\u6cd5\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/request/method/#req_method_inmethod_list","text":"\u542b\u4e49: \u8bf7\u6c42\u65b9\u6cd5\u662f\u5426\u5339\u914dmethod_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 method_list String \u8bf7\u6c42\u65b9\u6cd5\u5217\u8868\uff0c\u591a\u4e2a\u65b9\u6cd5\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u65b9\u6cd5\u53d6\u503cGET/POST/PUT/DELETE \u793a\u4f8b req_method_in(\"GET|POST\")","title":"req_method_in(method_list)"},{"location":"condition/request/protocol/","text":"\u8bf7\u6c42\u534f\u8bae\u76f8\u5173\u6761\u4ef6\u539f\u8bed req_proto_secure() \u8bed\u4e49: \u5224\u65ad\u8bf7\u6c42\u662f\u5426\u57fa\u4e8eTLS\u5b89\u5168\u4f20\u8f93\u534f\u8bae\uff0c\u5305\u62ecHTTPS/SPDY/HTTP2","title":"Protocol"},{"location":"condition/request/protocol/#_1","text":"","title":"\u8bf7\u6c42\u534f\u8bae\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/request/protocol/#req_proto_secure","text":"\u8bed\u4e49: \u5224\u65ad\u8bf7\u6c42\u662f\u5426\u57fa\u4e8eTLS\u5b89\u5168\u4f20\u8f93\u534f\u8bae\uff0c\u5305\u62ecHTTPS/SPDY/HTTP2","title":"req_proto_secure()"},{"location":"condition/request/tag/","text":"\u8bf7\u6c42\u6807\u7b7e\u76f8\u5173\u6761\u4ef6\u539f\u8bed req_tag_match(tagName, tagValue) \u542b\u4e49: \u5224\u65ad\u8bf7\u6c42\u6807\u7b7etagName\u7684\u503c\u662f\u5426\u4e3atagValue \u6ce8\uff1a\u8bf7\u6c42\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u4e00\u4e9b\u6807\u7b7e; \u4f8b: \u8bf7\u6c42\u5728\u7ecf\u8fc7\u8bcd\u5178\u6a21\u5757\u5904\u7406\u540e\uff0c\u8bbe\u7f6eclientIP\u6807\u7b7e\u7684\u503c\u4e3ablacklist \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 tagName String \u6807\u7b7e\u540d\u79f0 tagValue String \u6807\u7b7e\u53d6\u503c \u793a\u4f8b req_tag_match(\"clientIP\", \"blacklist\")","title":"Tag"},{"location":"condition/request/tag/#_1","text":"","title":"\u8bf7\u6c42\u6807\u7b7e\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/request/tag/#req_tag_matchtagname-tagvalue","text":"\u542b\u4e49: \u5224\u65ad\u8bf7\u6c42\u6807\u7b7etagName\u7684\u503c\u662f\u5426\u4e3atagValue \u6ce8\uff1a\u8bf7\u6c42\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u4e00\u4e9b\u6807\u7b7e; \u4f8b: \u8bf7\u6c42\u5728\u7ecf\u8fc7\u8bcd\u5178\u6a21\u5757\u5904\u7406\u540e\uff0c\u8bbe\u7f6eclientIP\u6807\u7b7e\u7684\u503c\u4e3ablacklist \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 tagName String \u6807\u7b7e\u540d\u79f0 tagValue String \u6807\u7b7e\u53d6\u503c \u793a\u4f8b req_tag_match(\"clientIP\", \"blacklist\")","title":"req_tag_match(tagName, tagValue)"},{"location":"condition/request/uri/","text":"\u8bf7\u6c42URI\u76f8\u5173\u6761\u4ef6\u539f\u8bed req_host_in(host_list) \u542b\u4e49\uff1a \u5224\u65adhttp\u7684host\u662f\u5426\u4e3ahost_list\u4e4b\u4e00 \u6ce8\uff1a\u5ffd\u7565\u5927\u5c0f\u5199\u7cbe\u786e\u5339\u914d \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 host_list String host\u5217\u8868\uff0chost\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_host_in(\"www.bfe-networks.com|bfe-networks.com\") req_path_in(path_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adhttp\u7684path\u662f\u5426\u4e3apath_list\u4e4b\u4e00 \u6ce8\uff1a\u9700\u8981\u5305\u542b\u5f00\u5934\u7684/ \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 path_list String path\u5217\u8868\uff0c\u591a\u4e2apath\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_path_in(\"/api/search|/api/list\", true) req_path_prefix_in(prefix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adhttp\u7684path\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u6ce8\uff1a\u9700\u8981\u5305\u542b\u5f00\u5934\u7684/ \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 prefix_list String path prefix\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_path_prefix_in(\"/api/report|/api/analytics\", false) req_path_suffix_in(suffix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adhttp\u7684path\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 suffix_list String path suffix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_path_suffix_in(\".php|.jsp\", false) req_query_key_in(key_list) \u542b\u4e49\uff1a \u5224\u65ad\u8bf7\u6c42query key\u662f\u5426\u4e3akey_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String query key\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_query_key_in(\"word|wd\") req_query_key_prefix_in(prefix_list) \u542b\u4e49\uff1a \u5224\u65adquery key\u662f\u5426\u4e3a\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 prefix_list String key prefix\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_query_key_prefix_in(\"rid\") req_query_value_in(key, value_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adquery\u4e2dkey\u7684\u503c\u662f\u5426\u7cbe\u786e\u5339\u914dvalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_in(\"uid\", \"x|y|z\", true) req_query_value_prefix_in(key, prefix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adquery\u4e2dkey\u7684\u503c\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key prefix_list String prefix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_prefix_in(\"uid\", \"100|200\", true) req_query_value_suffix_in(key, suffix_list, case_insensitive) \u542b\u4e49\uff1a \u5224\u65adquery\u4e2dkey\u7684\u503c\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key suffix_list String suffix\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_suffix_in(\"uid\", \"1|2|3\", true) req_query_value_hash_in(key, hash_value_list, case_insensitive) \u542b\u4e49\uff1a \u5bf9query\u4e2dkey\u7684\u503c\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u662f\u5426\u5339\u914dhash_value_list\u4e4b\u4e00\uff08\u6a21\u503c0\uff5e9999\uff09 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key hash_value_list String hash value\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_hash_in(\"cid\", \"100\", true) req_port_in(port_list) \u542b\u4e49\uff1a \u5224\u65ad\u8bf7\u6c42\u7aef\u53e3\u662f\u5426\u4e3aport_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 port_list String port\u5217\u8868\uff0c\u591a\u4e2aport\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_port_in(\"80|8080\") req_url_regmatch(reg_exp) \u542b\u4e49\uff1a \u5224\u65ad url \u662f\u5426\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0freg_exp \u6ce8\uff1a \u63a8\u8350\u4f7f\u7528\u53cd\u5f15\u53f7\uff0c\u4e0d\u9700\u8981\u989d\u5916\u8fdb\u884c\u8f6c\u4e49 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 reg_exp String \u8868\u793a\u6b63\u5219\u8868\u8fbe\u5f0f \u793a\u4f8b req_url_regmatch(`/s\\?word=123`)","title":"URI"},{"location":"condition/request/uri/#uri","text":"","title":"\u8bf7\u6c42URI\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/request/uri/#req_host_inhost_list","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u7684host\u662f\u5426\u4e3ahost_list\u4e4b\u4e00 \u6ce8\uff1a\u5ffd\u7565\u5927\u5c0f\u5199\u7cbe\u786e\u5339\u914d \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 host_list String host\u5217\u8868\uff0chost\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_host_in(\"www.bfe-networks.com|bfe-networks.com\")","title":"req_host_in(host_list)"},{"location":"condition/request/uri/#req_path_inpath_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u7684path\u662f\u5426\u4e3apath_list\u4e4b\u4e00 \u6ce8\uff1a\u9700\u8981\u5305\u542b\u5f00\u5934\u7684/ \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 path_list String path\u5217\u8868\uff0c\u591a\u4e2apath\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_path_in(\"/api/search|/api/list\", true)","title":"req_path_in(path_list, case_insensitive)"},{"location":"condition/request/uri/#req_path_prefix_inprefix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u7684path\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u6ce8\uff1a\u9700\u8981\u5305\u542b\u5f00\u5934\u7684/ \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 prefix_list String path prefix\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_path_prefix_in(\"/api/report|/api/analytics\", false)","title":"req_path_prefix_in(prefix_list, case_insensitive)"},{"location":"condition/request/uri/#req_path_suffix_insuffix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adhttp\u7684path\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 suffix_list String path suffix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_path_suffix_in(\".php|.jsp\", false)","title":"req_path_suffix_in(suffix_list, case_insensitive)"},{"location":"condition/request/uri/#req_query_key_inkey_list","text":"\u542b\u4e49\uff1a \u5224\u65ad\u8bf7\u6c42query key\u662f\u5426\u4e3akey_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String query key\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_query_key_in(\"word|wd\")","title":"req_query_key_in(key_list)"},{"location":"condition/request/uri/#req_query_key_prefix_inprefix_list","text":"\u542b\u4e49\uff1a \u5224\u65adquery key\u662f\u5426\u4e3a\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 prefix_list String key prefix\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_query_key_prefix_in(\"rid\")","title":"req_query_key_prefix_in(prefix_list)"},{"location":"condition/request/uri/#req_query_value_inkey-value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adquery\u4e2dkey\u7684\u503c\u662f\u5426\u7cbe\u786e\u5339\u914dvalue_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key value_list String value\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_in(\"uid\", \"x|y|z\", true)","title":"req_query_value_in(key, value_list, case_insensitive)"},{"location":"condition/request/uri/#req_query_value_prefix_inkey-prefix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adquery\u4e2dkey\u7684\u503c\u662f\u5426\u524d\u7f00\u5339\u914dprefix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key prefix_list String prefix\u5217\u8868\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_prefix_in(\"uid\", \"100|200\", true)","title":"req_query_value_prefix_in(key, prefix_list, case_insensitive)"},{"location":"condition/request/uri/#req_query_value_suffix_inkey-suffix_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5224\u65adquery\u4e2dkey\u7684\u503c\u662f\u5426\u540e\u7f00\u5339\u914dsuffix_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key suffix_list String suffix\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_suffix_in(\"uid\", \"1|2|3\", true)","title":"req_query_value_suffix_in(key, suffix_list, case_insensitive)"},{"location":"condition/request/uri/#req_query_value_hash_inkey-hash_value_list-case_insensitive","text":"\u542b\u4e49\uff1a \u5bf9query\u4e2dkey\u7684\u503c\u54c8\u5e0c\u53d6\u6a21\uff0c\u5224\u65ad\u662f\u5426\u5339\u914dhash_value_list\u4e4b\u4e00\uff08\u6a21\u503c0\uff5e9999\uff09 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String query\u4e2d\u7684key hash_value_list String hash value\u5217\u8868, \u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 case_insensitive Boolean \u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b req_query_value_hash_in(\"cid\", \"100\", true)","title":"req_query_value_hash_in(key, hash_value_list, case_insensitive)"},{"location":"condition/request/uri/#req_port_inport_list","text":"\u542b\u4e49\uff1a \u5224\u65ad\u8bf7\u6c42\u7aef\u53e3\u662f\u5426\u4e3aport_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 port_list String port\u5217\u8868\uff0c\u591a\u4e2aport\u4e4b\u95f4\u4f7f\u7528\u2018|\u2019\u8fde\u63a5 \u793a\u4f8b req_port_in(\"80|8080\")","title":"req_port_in(port_list)"},{"location":"condition/request/uri/#req_url_regmatchreg_exp","text":"\u542b\u4e49\uff1a \u5224\u65ad url \u662f\u5426\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0freg_exp \u6ce8\uff1a \u63a8\u8350\u4f7f\u7528\u53cd\u5f15\u53f7\uff0c\u4e0d\u9700\u8981\u989d\u5916\u8fdb\u884c\u8f6c\u4e49 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 reg_exp String \u8868\u793a\u6b63\u5219\u8868\u8fbe\u5f0f \u793a\u4f8b req_url_regmatch(`/s\\?word=123`)","title":"req_url_regmatch(reg_exp)"},{"location":"condition/response/code/","text":"\u54cd\u5e94\u72b6\u6001\u7801\u76f8\u5173\u6761\u4ef6\u539f\u8bed res_code_in(codes) \u8bed\u4e49: \u5224\u65ad\u54cd\u5e94\u72b6\u6001\u7801\u662f\u5426\u4e3a\u6307\u5b9a\u7684\u72b6\u6001\u7801codes\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 codes String \u72b6\u6001\u7801\u5217\u8868, \u591a\u4e2a\u72b6\u6001\u7801\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b res_code_in(\"200|500\")","title":"Code"},{"location":"condition/response/code/#_1","text":"","title":"\u54cd\u5e94\u72b6\u6001\u7801\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/response/code/#res_code_incodes","text":"\u8bed\u4e49: \u5224\u65ad\u54cd\u5e94\u72b6\u6001\u7801\u662f\u5426\u4e3a\u6307\u5b9a\u7684\u72b6\u6001\u7801codes\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 codes String \u72b6\u6001\u7801\u5217\u8868, \u591a\u4e2a\u72b6\u6001\u7801\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b res_code_in(\"200|500\")","title":"res_code_in(codes)"},{"location":"condition/response/header/","text":"\u54cd\u5e94\u5934\u90e8\u76f8\u5173\u6761\u4ef6\u539f\u8bed res_header_key_in(key_list) \u8bed\u4e49: \u5224\u65ad\u54cd\u5e94\u5934\u90e8\u4e2dkey\u662f\u5426\u6ee1\u8db3key_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String Header Key\u5217\u8868, \u591a\u4e2aKey\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b res_header_key_in(\"X-Bfe-Debug\") res_header_value_in(key, value_list, case_insensitive) \u8bed\u4e49: \u5224\u65adheader\u4e2dkey\u503c\u662f\u5426\u6ee1\u8db3value_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String Header Key value_list String Header Value\u5217\u8868\uff0c\u591a\u4e2aValue\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 case_insensitive Boolean \u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b res_header_value_in(\"X-Bfe-Debug\", \"1\", true)","title":"Header"},{"location":"condition/response/header/#_1","text":"","title":"\u54cd\u5e94\u5934\u90e8\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/response/header/#res_header_key_inkey_list","text":"\u8bed\u4e49: \u5224\u65ad\u54cd\u5e94\u5934\u90e8\u4e2dkey\u662f\u5426\u6ee1\u8db3key_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key_list String Header Key\u5217\u8868, \u591a\u4e2aKey\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b res_header_key_in(\"X-Bfe-Debug\")","title":"res_header_key_in(key_list)"},{"location":"condition/response/header/#res_header_value_inkey-value_list-case_insensitive","text":"\u8bed\u4e49: \u5224\u65adheader\u4e2dkey\u503c\u662f\u5426\u6ee1\u8db3value_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 key String Header Key value_list String Header Value\u5217\u8868\uff0c\u591a\u4e2aValue\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 case_insensitive Boolean \u5ffd\u7565\u5927\u5c0f\u5199 \u793a\u4f8b res_header_value_in(\"X-Bfe-Debug\", \"1\", true)","title":"res_header_value_in(key, value_list, case_insensitive)"},{"location":"condition/session/ip/","text":"\u4f1a\u8bddIP\u76f8\u5173\u6761\u4ef6\u539f\u8bed ses_sip_range(start_ip, end_ip) \u8bed\u4e49: \u5224\u65ad\u4f1a\u8bdd\u7684\u6e90ip\u662f\u5426\u5728 [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b ses_sip_range(\"10.0.0.1\", \"10.0.0.10\") ses_vip_range(start_ip, end_ip) \u8bed\u4e49: \u5224\u65ad\u8bbf\u95eeVIP\u662f\u5426\u5728 [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b ses_vip_range(\"10.0.0.1\", \"10.0.0.10\")","title":"IP"},{"location":"condition/session/ip/#ip","text":"","title":"\u4f1a\u8bddIP\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/session/ip/#ses_sip_rangestart_ip-end_ip","text":"\u8bed\u4e49: \u5224\u65ad\u4f1a\u8bdd\u7684\u6e90ip\u662f\u5426\u5728 [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b ses_sip_range(\"10.0.0.1\", \"10.0.0.10\")","title":"ses_sip_range(start_ip, end_ip)"},{"location":"condition/session/ip/#ses_vip_rangestart_ip-end_ip","text":"\u8bed\u4e49: \u5224\u65ad\u8bbf\u95eeVIP\u662f\u5426\u5728 [start_ip, end_ip] \u533a\u95f4\u5185 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_ip String \u8d77\u59cbIP\u5730\u5740 end_ip String \u7ed3\u675fIP\u5730\u5740 \u793a\u4f8b ses_vip_range(\"10.0.0.1\", \"10.0.0.10\")","title":"ses_vip_range(start_ip, end_ip)"},{"location":"condition/session/tls/","text":"TLS\u76f8\u5173\u6761\u4ef6\u539f\u8bed ses_tls_sni_in(host_list) \u8bed\u4e49: \u5224\u65adTLS\u63e1\u624b\u4e2d\u7684sni\u5b57\u6bb5\u662f\u5426\u4e3ahost_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 host_list String \u57df\u540d\u5217\u8868, \u591a\u4e2a\u57df\u540d\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b ses_tls_sni_in(\"example.com|example.org\") ses_tls_client_auth() \u8bed\u4e49: \u5224\u65ad\u662f\u5426\u542f\u7528TLS\u53cc\u5411\u8ba4\u8bc1 ses_tls_client_ca_in(ca_list) \u8bed\u4e49: \u5224\u65ad\u662f\u5426\u542f\u7528TLS\u53cc\u5411\u8ba4\u8bc1\u4e14\u5ba2\u6237\u7aef\u8bc1\u4e66\u7b7e\u53d1\u6839CA\u4e3aca_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 ca_list String CA\u6807\u8bc6\u5217\u8868, \u591a\u4e2aCA\u6807\u8bc6\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b ses_tls_client_ca_in(\"ca1|ca2\")","title":"TLS"},{"location":"condition/session/tls/#tls","text":"","title":"TLS\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/session/tls/#ses_tls_sni_inhost_list","text":"\u8bed\u4e49: \u5224\u65adTLS\u63e1\u624b\u4e2d\u7684sni\u5b57\u6bb5\u662f\u5426\u4e3ahost_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 host_list String \u57df\u540d\u5217\u8868, \u591a\u4e2a\u57df\u540d\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b ses_tls_sni_in(\"example.com|example.org\")","title":"ses_tls_sni_in(host_list)"},{"location":"condition/session/tls/#ses_tls_client_auth","text":"\u8bed\u4e49: \u5224\u65ad\u662f\u5426\u542f\u7528TLS\u53cc\u5411\u8ba4\u8bc1","title":"ses_tls_client_auth()"},{"location":"condition/session/tls/#ses_tls_client_ca_inca_list","text":"\u8bed\u4e49: \u5224\u65ad\u662f\u5426\u542f\u7528TLS\u53cc\u5411\u8ba4\u8bc1\u4e14\u5ba2\u6237\u7aef\u8bc1\u4e66\u7b7e\u53d1\u6839CA\u4e3aca_list\u4e4b\u4e00 \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 ca_list String CA\u6807\u8bc6\u5217\u8868, \u591a\u4e2aCA\u6807\u8bc6\u4e4b\u95f4\u4f7f\u7528|\u5206\u9694 \u793a\u4f8b ses_tls_client_ca_in(\"ca1|ca2\")","title":"ses_tls_client_ca_in(ca_list)"},{"location":"condition/system/time/","text":"\u65f6\u95f4\u76f8\u5173\u6761\u4ef6\u539f\u8bed bfe_time_range(start_time, end_time) \u8bed\u4e49: \u5224\u65ad\u5f53\u524d\u65f6\u95f4\u662f\u5426\u5c5e\u4e8e[start_time, end_time] \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_time String \u8d77\u59cb\u65f6\u95f4 end_time String \u7ed3\u675f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\uff1ayyyymmddhhmmssZ\uff0c\u5176\u4e2dZ\u4ee3\u8868\u65f6\u533a\uff0c\u8be6\u89c1\u9644B\u8bf4\u660e \u793a\u4f8b bfe_time_range(\"20190204203000H\", \"20190204204500H\") \u9644A.\u65f6\u95f4\u539f\u8bed\u6d4b\u8bd5 \u4e3a\u4fbf\u4e8e\u6d4b\u8bd5\u6761\u4ef6\u65f6\u95f4\u539f\u8bed\uff0c\u53ef\u4ee5\u5728\u8bf7\u6c42\u4e2d\u589e\u52a0 X-Bfe-Debug-Time \u5934\u90e8\u643a\u5e26\u65f6\u95f4\uff0c\u6765mock\u7cfb\u7edf\u65f6\u95f4 \u9644B.\u65f6\u533a\u5b57\u7b26\u7f16\u7801 Time zone name Letter Offset \u8bf4\u660e Alfa Time Zone A +1 Bravo Time Zone B +2 Charlie Time Zone C +3 Delta Time Zone D +4 Echo Time Zone E +5 Foxtrot Time Zone F +6 Golf Time Zone G +7 Hotel Time Zone H +8 \u5317\u4eac\u6807\u51c6\u65f6\u95f4 India Time Zone I +9 Kilo Time Zone K +10 Lima Time Zone L +11 Mike Time Zone M +12 November Time Zone N \u22121 Oscar Time Zone O \u22122 Papa Time Zone P \u22123 Quebec Time Zone Q \u22124 Romeo Time Zone R \u22125 Sierra Time Zone S \u22126 Tango Time Zone T \u22127 Uniform Time Zone U \u22128 Victor Time Zone V \u22129 Whiskey Time Zone W \u221210 X-ray Time Zone X \u221211 Yankee Time Zone Y \u221212 Zulu Time Zone Z 0 \u683c\u6797\u5a01\u6cbb\u6807\u51c6\u65f6\u95f4","title":"Time"},{"location":"condition/system/time/#_1","text":"","title":"\u65f6\u95f4\u76f8\u5173\u6761\u4ef6\u539f\u8bed"},{"location":"condition/system/time/#bfe_time_rangestart_time-end_time","text":"\u8bed\u4e49: \u5224\u65ad\u5f53\u524d\u65f6\u95f4\u662f\u5426\u5c5e\u4e8e[start_time, end_time] \u53c2\u6570 \u53c2\u6570 \u63cf\u8ff0 start_time String \u8d77\u59cb\u65f6\u95f4 end_time String \u7ed3\u675f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\uff1ayyyymmddhhmmssZ\uff0c\u5176\u4e2dZ\u4ee3\u8868\u65f6\u533a\uff0c\u8be6\u89c1\u9644B\u8bf4\u660e \u793a\u4f8b bfe_time_range(\"20190204203000H\", \"20190204204500H\")","title":"bfe_time_range(start_time, end_time)"},{"location":"condition/system/time/#a","text":"\u4e3a\u4fbf\u4e8e\u6d4b\u8bd5\u6761\u4ef6\u65f6\u95f4\u539f\u8bed\uff0c\u53ef\u4ee5\u5728\u8bf7\u6c42\u4e2d\u589e\u52a0 X-Bfe-Debug-Time \u5934\u90e8\u643a\u5e26\u65f6\u95f4\uff0c\u6765mock\u7cfb\u7edf\u65f6\u95f4","title":"\u9644A.\u65f6\u95f4\u539f\u8bed\u6d4b\u8bd5"},{"location":"condition/system/time/#b","text":"Time zone name Letter Offset \u8bf4\u660e Alfa Time Zone A +1 Bravo Time Zone B +2 Charlie Time Zone C +3 Delta Time Zone D +4 Echo Time Zone E +5 Foxtrot Time Zone F +6 Golf Time Zone G +7 Hotel Time Zone H +8 \u5317\u4eac\u6807\u51c6\u65f6\u95f4 India Time Zone I +9 Kilo Time Zone K +10 Lima Time Zone L +11 Mike Time Zone M +12 November Time Zone N \u22121 Oscar Time Zone O \u22122 Papa Time Zone P \u22123 Quebec Time Zone Q \u22124 Romeo Time Zone R \u22125 Sierra Time Zone S \u22126 Tango Time Zone T \u22127 Uniform Time Zone U \u22128 Victor Time Zone V \u22129 Whiskey Time Zone W \u221210 X-ray Time Zone X \u221211 Yankee Time Zone Y \u221212 Zulu Time Zone Z 0 \u683c\u6797\u5a01\u6cbb\u6807\u51c6\u65f6\u95f4","title":"\u9644B.\u65f6\u533a\u5b57\u7b26\u7f16\u7801"},{"location":"configuration/bfe.conf/","text":"\u6838\u5fc3\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb bfe.conf\u662fBFE\u7684\u6838\u5fc3\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u670d\u52a1\u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 Server.HttpPort Integer HTTP\u76d1\u542c\u7aef\u53e3 \u9ed8\u8ba4\u503c8080 Server.HttpsPort Integer HTTPS(TLS)\u76d1\u542c\u7aef\u53e3 \u9ed8\u8ba4\u503c8443 Server.MonitorPort Integer Monitor\u76d1\u542c\u7aef\u53e3 \u9ed8\u8ba4\u503c8421 Server.MaxCpus Integer \u6700\u5927\u4f7f\u7528CPU\u6838\u6570; 0\u4ee3\u8868\u4f7f\u7528\u6240\u6709CPU\u6838 \u9ed8\u8ba4\u503c0 Server.Layer4LoadBalancer String \u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\u7c7b\u578b(PROXY/NONE) \u9ed8\u8ba4\u503cNONE Server.TlsHandshakeTimeout Integer TLS\u63e1\u624b\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c30 Server.ClientReadTimeout Integer \u8bfb\u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c60 Server.ClientWriteTimeout Integer \u5199\u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c60 Server.GracefulShutdownTimeout Integer \u4f18\u96c5\u9000\u51fa\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u6700\u5927300\u79d2 \u9ed8\u8ba4\u503c10 Server.KeepAliveEnabled Boolean \u4e0e\u7528\u6237\u7aef\u8fde\u63a5\u662f\u5426\u542f\u7528HTTP KeepAlive \u9ed8\u8ba4\u503cTrue Server.MaxHeaderBytes Integer \u8bf7\u6c42\u5934\u90e8\u7684\u6700\u5927\u957f\u5ea6\uff0c\u5355\u4f4d\u4e3aByte \u9ed8\u8ba4\u503c1048576 Server.MaxHeaderUriBytes Integer \u8bf7\u6c42\u5934\u90e8URI\u7684\u6700\u5927\u957f\u5ea6\uff0c\u5355\u4f4d\u4e3aByte \u9ed8\u8ba4\u503c8192 Server.HostRuleConf String \u79df\u6237\u57df\u540d\u8868\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/host_rule.data Server.VipRuleConf String \u79df\u6237VIP\u8868\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/vip_rule.data Server.RouteRuleConf String \u8f6c\u53d1\u89c4\u5219\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/route_rule.data Server.ClusterConf String \u540e\u7aef\u96c6\u7fa4\u76f8\u5173\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/cluster_conf.data Server.GslbConf String \u5b50\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e \u6587\u4ef6(GSLB)\u8def\u5f84 \u9ed8\u8ba4\u503ccluster_conf/gslb.data Server.ClusterTableConf String \u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ccluster_conf/cluster_table.data Server.NameConf String \u540d\u5b57\u4e0e\u5b9e\u4f8b\u6620\u5c04\u8868\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/name_conf.data Server.Modules String \u542f\u7528\u7684\u6a21\u5757\u5217\u8868; \u542f\u7528\u591a\u4e2a\u6a21\u5757\u8bf7\u589e\u52a0\u591a\u884cModules\u914d\u7f6e\uff0c\u53c2\u89c1\u914d\u7f6e\u793a\u4f8b \u9ed8\u8ba4\u503c\u7a7a Server.MonitorInterval Integer Monitor\u6570\u636e\u7edf\u8ba1\u5468\u671f\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c20 Server.DebugServHttp Boolean \u662f\u5426\u5f00\u542f\u53cd\u5411\u4ee3\u7406\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse Server.DebugBfeRoute Boolean \u662f\u5426\u5f00\u542f\u6d41\u91cf\u8def\u7531\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse Server.DebugBal Boolean \u662f\u5426\u5f00\u542f\u8d1f\u8f7d\u5747\u8861\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse Server.DebugHealthCheck Boolean \u662f\u5426\u5f00\u542f\u5065\u5eb7\u68c0\u67e5\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse TLS\u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 HttpsBasic.ServerCertConf String \u670d\u52a1\u7aef\u8bc1\u4e66\u4e0e\u5bc6\u94a5\u7684\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ctls_conf/server_cert_conf.data HttpsBasic.TlsRuleConf String TLS\u534f\u8bae\u53c2\u6570\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ctls_conf/tls_rule_conf.data HttpsBasic.CipherSuites String \u542f\u7528\u7684\u52a0\u5bc6\u5957\u4ef6\u5217\u8868; \u542f\u7528\u591a\u4e2a\u5957\u4ef6\u8bf7\u589e\u52a0\u591a\u884ccipherSuites\u914d\u7f6e\uff0c\u8be6\u89c1\u793a\u4f8b \u9ed8\u8ba4\u503cTLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA HttpsBasic.CurvePreferences String \u542f\u7528\u7684ECC\u692d\u5706\u66f2\u7ebf\uff0c\u8be6\u89c1\u793a\u4f8b \u9ed8\u8ba4\u503cCurveP256 HttpsBasic.EnableSslv2ClientHello Boolean \u9488\u5bf9SSLv3\u534f\u8bae\uff0c\u542f\u7528\u5bf9SSLv2\u683c\u5f0fClientHello\u7684\u517c\u5bb9 \u9ed8\u8ba4\u503cTrue HttpsBasic.ClientCABaseDir String \u5ba2\u6237\u7aef\u6839CA\u8bc1\u4e66\u57fa\u76ee\u5f55; \u6ce8\u610f\uff1a\u8bc1\u4e66\u6587\u4ef6\u540e\u7f00\u7ea6\u5b9a\u5fc5\u987b\u662f \".crt\" \u9ed8\u8ba4\u503ctls_conf/client_ca SessionCache.SessionCacheDisabled Boolean \u662f\u5426\u7981\u7528TLS Session Cache\u673a\u5236 \u9ed8\u8ba4\u503cFalse SessionCache.Servers String Cache\u670d\u52a1\u7684\u8bbf\u95ee\u5730\u5740 \u9ed8\u8ba4\u503c\u65e0 SessionCache.KeyPrefix String \u7f13\u5b58key\u524d\u7f00 \u9ed8\u8ba4\u503cbfe SessionCache.ConnectTimeout Integer \u8fde\u63a5Cache\u670d\u52a1\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2 \u9ed8\u8ba4\u503c50 SessionCache.ReadTimeout Integer \u8bfb\u53d6Cache\u670d\u52a1\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2 \u9ed8\u8ba4\u503c50 SessionCache.WriteTimeout Integer \u5199\u5165Cache\u670d\u52a1\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2 \u9ed8\u8ba4\u503c50 SessionCache.MaxIdle Integer \u4e0eCache\u670d\u52a1\u7684\u6700\u5927\u7a7a\u95f2\u957f\u8fde\u63a5\u6570 \u9ed8\u8ba4\u503c20 SessionCache.SessionExpire Integer \u5b58\u50a8\u5728Cache\u670d\u52a1\u4e2d\u4f1a\u8bdd\u4fe1\u606f\u7684\u8fc7\u671f\u65f6\u95f4, \u5355\u4f4d\u79d2 \u9ed8\u8ba4\u503c3600 SessionTicket.SessionTicketsDisabled Boolean \u662f\u5426\u7981\u7528TLS Session Ticket \u9ed8\u8ba4\u503cTrue SessionTicket.SessionTicketKeyFile String Session Ticket Key\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ctls_conf/session_ticket_key.data \u914d\u7f6e\u793a\u4f8b [Server] # listen port for http request HttpPort = 8080 # listen port for https request HttpsPort = 8443 # listen port for monitor request MonitorPort = 8421 # max number of CPUs to use (0 to use all CPUs) MaxCpus = 0 # type of layer-4 load balancer (PROXY/NONE) # # Note: # - PROXY: layer-4 balancer talking the proxy protocol # eg. F5 BigIP/Citrix ADC # - NONE: layer-4 balancer disabled Layer4LoadBalancer = \"\" # tls handshake timeout, in seconds TlsHandshakeTimeout = 30 # read timeout, in seconds ClientReadTimeout = 60 # write timeout, in seconds ClientWriteTimeout = 60 # if false, client connection is shutdown disregard of http headers KeepAliveEnabled = true # timeout for graceful shutdown (maximum 300 sec) GracefulShutdownTimeout = 10 # max header length in bytes in request MaxHeaderBytes = 1048576 # max URI(in header) length in bytes in request MaxHeaderUriBytes = 8192 # routing related conf HostRuleConf = server_data_conf/host_rule.data VipRuleConf = server_data_conf/vip_rule.data RouteRuleConf = server_data_conf/route_rule.data ClusterConf = server_data_conf/cluster_conf.data # load balancing related conf GslbConf = cluster_conf/gslb.data ClusterTableConf = cluster_conf/cluster_table.data # naming related conf NameConf = server_data_conf/name_conf.data # moduels enabled Modules = mod_trust_clientip Modules = mod_block Modules = mod_header Modules = mod_rewrite Modules = mod_redirect Modules = mod_logid # interval for get diff of proxy-state MonitorInterval = 20 # debug flags DebugServHttp = false DebugBfeRoute = false DebugBal = false DebugHealthCheck = false [HttpsBasic] # tls cert conf ServerCertConf = tls_conf/server_cert_conf.data # tls rule TlsRuleConf = tls_conf/tls_rule_conf.data # supported cipherSuites preference settings # # ciphersuites implemented in golang: # TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 # TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 # TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 # TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 # TLS_ECDHE_RSA_WITH_RC4_128_SHA # TLS_ECDHE_ECDSA_WITH_RC4_128_SHA # TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA # TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA # TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA # TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA # TLS_RSA_WITH_RC4_128_SHA # TLS_RSA_WITH_AES_128_CBC_SHA # TLS_RSA_WITH_AES_256_CBC_SHA # TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA # TLS_RSA_WITH_3DES_EDE_CBC_SHA # # Note: # -. Equivalent cipher suites (cipher suites with same priority in server side): # CipherSuites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 # CipherSuites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 # CipherSuites = TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 CipherSuites = TLS_ECDHE_RSA_WITH_RC4_128_SHA CipherSuites = TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA CipherSuites = TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA CipherSuites = TLS_RSA_WITH_RC4_128_SHA CipherSuites = TLS_RSA_WITH_AES_128_CBC_SHA CipherSuites = TLS_RSA_WITH_AES_256_CBC_SHA # supported curve perference settings # # curves implemented in golang: # CurveP256 # CurveP384 # CurveP521 # # Note: # - Do not use CurveP384/CurveP521 which is with poor performance # CurvePreferences = CurveP256 # support Sslv2 ClientHello for compatible with ancient # TLS capable clients (mozilla 5, java 5/6, openssl 0.9.8 etc) EnableSslv2ClientHello = true # base directory of client ca certificates # Note: filename suffix of ca certificate file should be \".crt\" ClientCABaseDir = tls_conf/client_ca [SessionCache] # disable tls session cache or not SessionCacheDisabled = true # address of cache server Servers = \"example.redis.cluster\" # prefix for cache key KeyPrefix = \"bfe\" # connection params (ms) ConnectTimeout = 50 ReadTimeout = 50 WriteTimeout = 50 # max idle connections in connection pool MaxIdle = 20 # expire time for tls session state (second) SessionExpire = 3600 [SessionTicket] # disable tls session ticket or not SessionTicketsDisabled = true # session ticket key SessionTicketKeyFile = tls_conf/session_ticket_key.data","title":"\u6838\u5fc3\u914d\u7f6e"},{"location":"configuration/bfe.conf/#_1","text":"","title":"\u6838\u5fc3\u914d\u7f6e"},{"location":"configuration/bfe.conf/#_2","text":"bfe.conf\u662fBFE\u7684\u6838\u5fc3\u914d\u7f6e","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/bfe.conf/#_3","text":"","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/bfe.conf/#_4","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Server.HttpPort Integer HTTP\u76d1\u542c\u7aef\u53e3 \u9ed8\u8ba4\u503c8080 Server.HttpsPort Integer HTTPS(TLS)\u76d1\u542c\u7aef\u53e3 \u9ed8\u8ba4\u503c8443 Server.MonitorPort Integer Monitor\u76d1\u542c\u7aef\u53e3 \u9ed8\u8ba4\u503c8421 Server.MaxCpus Integer \u6700\u5927\u4f7f\u7528CPU\u6838\u6570; 0\u4ee3\u8868\u4f7f\u7528\u6240\u6709CPU\u6838 \u9ed8\u8ba4\u503c0 Server.Layer4LoadBalancer String \u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u5668\u7c7b\u578b(PROXY/NONE) \u9ed8\u8ba4\u503cNONE Server.TlsHandshakeTimeout Integer TLS\u63e1\u624b\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c30 Server.ClientReadTimeout Integer \u8bfb\u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c60 Server.ClientWriteTimeout Integer \u5199\u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c60 Server.GracefulShutdownTimeout Integer \u4f18\u96c5\u9000\u51fa\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u6700\u5927300\u79d2 \u9ed8\u8ba4\u503c10 Server.KeepAliveEnabled Boolean \u4e0e\u7528\u6237\u7aef\u8fde\u63a5\u662f\u5426\u542f\u7528HTTP KeepAlive \u9ed8\u8ba4\u503cTrue Server.MaxHeaderBytes Integer \u8bf7\u6c42\u5934\u90e8\u7684\u6700\u5927\u957f\u5ea6\uff0c\u5355\u4f4d\u4e3aByte \u9ed8\u8ba4\u503c1048576 Server.MaxHeaderUriBytes Integer \u8bf7\u6c42\u5934\u90e8URI\u7684\u6700\u5927\u957f\u5ea6\uff0c\u5355\u4f4d\u4e3aByte \u9ed8\u8ba4\u503c8192 Server.HostRuleConf String \u79df\u6237\u57df\u540d\u8868\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/host_rule.data Server.VipRuleConf String \u79df\u6237VIP\u8868\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/vip_rule.data Server.RouteRuleConf String \u8f6c\u53d1\u89c4\u5219\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/route_rule.data Server.ClusterConf String \u540e\u7aef\u96c6\u7fa4\u76f8\u5173\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/cluster_conf.data Server.GslbConf String \u5b50\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e \u6587\u4ef6(GSLB)\u8def\u5f84 \u9ed8\u8ba4\u503ccluster_conf/gslb.data Server.ClusterTableConf String \u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ccluster_conf/cluster_table.data Server.NameConf String \u540d\u5b57\u4e0e\u5b9e\u4f8b\u6620\u5c04\u8868\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503cserver_data_conf/name_conf.data Server.Modules String \u542f\u7528\u7684\u6a21\u5757\u5217\u8868; \u542f\u7528\u591a\u4e2a\u6a21\u5757\u8bf7\u589e\u52a0\u591a\u884cModules\u914d\u7f6e\uff0c\u53c2\u89c1\u914d\u7f6e\u793a\u4f8b \u9ed8\u8ba4\u503c\u7a7a Server.MonitorInterval Integer Monitor\u6570\u636e\u7edf\u8ba1\u5468\u671f\uff0c\u5355\u4f4d\u4e3a\u79d2 \u9ed8\u8ba4\u503c20 Server.DebugServHttp Boolean \u662f\u5426\u5f00\u542f\u53cd\u5411\u4ee3\u7406\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse Server.DebugBfeRoute Boolean \u662f\u5426\u5f00\u542f\u6d41\u91cf\u8def\u7531\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse Server.DebugBal Boolean \u662f\u5426\u5f00\u542f\u8d1f\u8f7d\u5747\u8861\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse Server.DebugHealthCheck Boolean \u662f\u5426\u5f00\u542f\u5065\u5eb7\u68c0\u67e5\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse","title":"\u670d\u52a1\u57fa\u7840\u914d\u7f6e"},{"location":"configuration/bfe.conf/#tls","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 HttpsBasic.ServerCertConf String \u670d\u52a1\u7aef\u8bc1\u4e66\u4e0e\u5bc6\u94a5\u7684\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ctls_conf/server_cert_conf.data HttpsBasic.TlsRuleConf String TLS\u534f\u8bae\u53c2\u6570\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ctls_conf/tls_rule_conf.data HttpsBasic.CipherSuites String \u542f\u7528\u7684\u52a0\u5bc6\u5957\u4ef6\u5217\u8868; \u542f\u7528\u591a\u4e2a\u5957\u4ef6\u8bf7\u589e\u52a0\u591a\u884ccipherSuites\u914d\u7f6e\uff0c\u8be6\u89c1\u793a\u4f8b \u9ed8\u8ba4\u503cTLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA HttpsBasic.CurvePreferences String \u542f\u7528\u7684ECC\u692d\u5706\u66f2\u7ebf\uff0c\u8be6\u89c1\u793a\u4f8b \u9ed8\u8ba4\u503cCurveP256 HttpsBasic.EnableSslv2ClientHello Boolean \u9488\u5bf9SSLv3\u534f\u8bae\uff0c\u542f\u7528\u5bf9SSLv2\u683c\u5f0fClientHello\u7684\u517c\u5bb9 \u9ed8\u8ba4\u503cTrue HttpsBasic.ClientCABaseDir String \u5ba2\u6237\u7aef\u6839CA\u8bc1\u4e66\u57fa\u76ee\u5f55; \u6ce8\u610f\uff1a\u8bc1\u4e66\u6587\u4ef6\u540e\u7f00\u7ea6\u5b9a\u5fc5\u987b\u662f \".crt\" \u9ed8\u8ba4\u503ctls_conf/client_ca SessionCache.SessionCacheDisabled Boolean \u662f\u5426\u7981\u7528TLS Session Cache\u673a\u5236 \u9ed8\u8ba4\u503cFalse SessionCache.Servers String Cache\u670d\u52a1\u7684\u8bbf\u95ee\u5730\u5740 \u9ed8\u8ba4\u503c\u65e0 SessionCache.KeyPrefix String \u7f13\u5b58key\u524d\u7f00 \u9ed8\u8ba4\u503cbfe SessionCache.ConnectTimeout Integer \u8fde\u63a5Cache\u670d\u52a1\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2 \u9ed8\u8ba4\u503c50 SessionCache.ReadTimeout Integer \u8bfb\u53d6Cache\u670d\u52a1\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2 \u9ed8\u8ba4\u503c50 SessionCache.WriteTimeout Integer \u5199\u5165Cache\u670d\u52a1\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2 \u9ed8\u8ba4\u503c50 SessionCache.MaxIdle Integer \u4e0eCache\u670d\u52a1\u7684\u6700\u5927\u7a7a\u95f2\u957f\u8fde\u63a5\u6570 \u9ed8\u8ba4\u503c20 SessionCache.SessionExpire Integer \u5b58\u50a8\u5728Cache\u670d\u52a1\u4e2d\u4f1a\u8bdd\u4fe1\u606f\u7684\u8fc7\u671f\u65f6\u95f4, \u5355\u4f4d\u79d2 \u9ed8\u8ba4\u503c3600 SessionTicket.SessionTicketsDisabled Boolean \u662f\u5426\u7981\u7528TLS Session Ticket \u9ed8\u8ba4\u503cTrue SessionTicket.SessionTicketKeyFile String Session Ticket Key\u914d\u7f6e \u6587\u4ef6\u8def\u5f84 \u9ed8\u8ba4\u503ctls_conf/session_ticket_key.data","title":"TLS\u57fa\u7840\u914d\u7f6e"},{"location":"configuration/bfe.conf/#_5","text":"[Server] # listen port for http request HttpPort = 8080 # listen port for https request HttpsPort = 8443 # listen port for monitor request MonitorPort = 8421 # max number of CPUs to use (0 to use all CPUs) MaxCpus = 0 # type of layer-4 load balancer (PROXY/NONE) # # Note: # - PROXY: layer-4 balancer talking the proxy protocol # eg. F5 BigIP/Citrix ADC # - NONE: layer-4 balancer disabled Layer4LoadBalancer = \"\" # tls handshake timeout, in seconds TlsHandshakeTimeout = 30 # read timeout, in seconds ClientReadTimeout = 60 # write timeout, in seconds ClientWriteTimeout = 60 # if false, client connection is shutdown disregard of http headers KeepAliveEnabled = true # timeout for graceful shutdown (maximum 300 sec) GracefulShutdownTimeout = 10 # max header length in bytes in request MaxHeaderBytes = 1048576 # max URI(in header) length in bytes in request MaxHeaderUriBytes = 8192 # routing related conf HostRuleConf = server_data_conf/host_rule.data VipRuleConf = server_data_conf/vip_rule.data RouteRuleConf = server_data_conf/route_rule.data ClusterConf = server_data_conf/cluster_conf.data # load balancing related conf GslbConf = cluster_conf/gslb.data ClusterTableConf = cluster_conf/cluster_table.data # naming related conf NameConf = server_data_conf/name_conf.data # moduels enabled Modules = mod_trust_clientip Modules = mod_block Modules = mod_header Modules = mod_rewrite Modules = mod_redirect Modules = mod_logid # interval for get diff of proxy-state MonitorInterval = 20 # debug flags DebugServHttp = false DebugBfeRoute = false DebugBal = false DebugHealthCheck = false [HttpsBasic] # tls cert conf ServerCertConf = tls_conf/server_cert_conf.data # tls rule TlsRuleConf = tls_conf/tls_rule_conf.data # supported cipherSuites preference settings # # ciphersuites implemented in golang: # TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 # TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 # TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 # TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 # TLS_ECDHE_RSA_WITH_RC4_128_SHA # TLS_ECDHE_ECDSA_WITH_RC4_128_SHA # TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA # TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA # TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA # TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA # TLS_RSA_WITH_RC4_128_SHA # TLS_RSA_WITH_AES_128_CBC_SHA # TLS_RSA_WITH_AES_256_CBC_SHA # TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA # TLS_RSA_WITH_3DES_EDE_CBC_SHA # # Note: # -. Equivalent cipher suites (cipher suites with same priority in server side): # CipherSuites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 # CipherSuites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 # CipherSuites = TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256|TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 CipherSuites = TLS_ECDHE_RSA_WITH_RC4_128_SHA CipherSuites = TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA CipherSuites = TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA CipherSuites = TLS_RSA_WITH_RC4_128_SHA CipherSuites = TLS_RSA_WITH_AES_128_CBC_SHA CipherSuites = TLS_RSA_WITH_AES_256_CBC_SHA # supported curve perference settings # # curves implemented in golang: # CurveP256 # CurveP384 # CurveP521 # # Note: # - Do not use CurveP384/CurveP521 which is with poor performance # CurvePreferences = CurveP256 # support Sslv2 ClientHello for compatible with ancient # TLS capable clients (mozilla 5, java 5/6, openssl 0.9.8 etc) EnableSslv2ClientHello = true # base directory of client ca certificates # Note: filename suffix of ca certificate file should be \".crt\" ClientCABaseDir = tls_conf/client_ca [SessionCache] # disable tls session cache or not SessionCacheDisabled = true # address of cache server Servers = \"example.redis.cluster\" # prefix for cache key KeyPrefix = \"bfe\" # connection params (ms) ConnectTimeout = 50 ReadTimeout = 50 WriteTimeout = 50 # max idle connections in connection pool MaxIdle = 20 # expire time for tls session state (second) SessionExpire = 3600 [SessionTicket] # disable tls session ticket or not SessionTicketsDisabled = true # session ticket key SessionTicketKeyFile = tls_conf/session_ticket_key.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/config/","text":"\u914d\u7f6e\u6982\u8ff0 BFE\u914d\u7f6e\u5206\u7c7b \u5e38\u89c4\u914d\u7f6e\uff1a\u5728\u8fd0\u884c\u671f\u95f4\u4fee\u6539\uff0c\u9700\u91cd\u542f\u751f\u6548\u3002 \u52a8\u6001\u914d\u7f6e\uff1a\u5728\u8fd0\u884c\u671f\u95f4\u4fee\u6539\uff0c\u70ed\u52a0\u8f7d\u751f\u6548\u3002 BFE\u914d\u7f6e\u683c\u5f0f \u5e38\u89c4\u914d\u7f6e\uff1a\u4e00\u822c\u57fa\u4e8eINI\u683c\u5f0f \u52a8\u6001\u914d\u7f6e\uff1a\u4e00\u822c\u57fa\u4e8eJSON\u683c\u5f0f (\u6ce8\uff1a\u7279\u6b8a\u7684\u8bc1\u4e66\u3001\u5b57\u5178\u6587\u4ef6\u7b49\u4f8b\u5916) BFE\u914d\u7f6e\u7ec4\u7ec7 BFE\u7684\u6838\u5fc3\u914d\u7f6e\u662fbfe.conf (conf/bfe.conf)\uff0c\u4e3a\u4fbf\u4e8e\u7ef4\u62a4, \u914d\u7f6e\u6309\u529f\u80fd\u5206\u7c7b\u5b58\u653e\u5728\u76f8\u5e94\u76ee\u5f55 conf/<feature>/ \u529f\u80fd\u7c7b\u522b \u6587\u4ef6\u4f4d\u7f6e \u670d\u52a1\u57fa\u7840\u914d\u7f6e conf/bfe.conf \u63a5\u5165\u534f\u8bae\u914d\u7f6e conf/tls_conf/ \u76ee\u5f55 \u6d41\u91cf\u8def\u7531\u914d\u7f6e conf/server_data_conf/ \u76ee\u5f55 \u8d1f\u8f7d\u5747\u8861\u914d\u7f6e conf/cluster_conf/ \u76ee\u5f55 \u6269\u5c55\u6a21\u5757\u914d\u7f6e conf/mod_<name> \u76ee\u5f55 BFE\u914d\u7f6e\u70ed\u52a0\u8f7d \u8be6\u89c1 \u914d\u7f6e\u70ed\u52a0\u8f7d","title":"\u914d\u7f6e\u6982\u8ff0"},{"location":"configuration/config/#_1","text":"","title":"\u914d\u7f6e\u6982\u8ff0"},{"location":"configuration/config/#bfe","text":"\u5e38\u89c4\u914d\u7f6e\uff1a\u5728\u8fd0\u884c\u671f\u95f4\u4fee\u6539\uff0c\u9700\u91cd\u542f\u751f\u6548\u3002 \u52a8\u6001\u914d\u7f6e\uff1a\u5728\u8fd0\u884c\u671f\u95f4\u4fee\u6539\uff0c\u70ed\u52a0\u8f7d\u751f\u6548\u3002","title":"BFE\u914d\u7f6e\u5206\u7c7b"},{"location":"configuration/config/#bfe_1","text":"\u5e38\u89c4\u914d\u7f6e\uff1a\u4e00\u822c\u57fa\u4e8eINI\u683c\u5f0f \u52a8\u6001\u914d\u7f6e\uff1a\u4e00\u822c\u57fa\u4e8eJSON\u683c\u5f0f (\u6ce8\uff1a\u7279\u6b8a\u7684\u8bc1\u4e66\u3001\u5b57\u5178\u6587\u4ef6\u7b49\u4f8b\u5916)","title":"BFE\u914d\u7f6e\u683c\u5f0f"},{"location":"configuration/config/#bfe_2","text":"BFE\u7684\u6838\u5fc3\u914d\u7f6e\u662fbfe.conf (conf/bfe.conf)\uff0c\u4e3a\u4fbf\u4e8e\u7ef4\u62a4, \u914d\u7f6e\u6309\u529f\u80fd\u5206\u7c7b\u5b58\u653e\u5728\u76f8\u5e94\u76ee\u5f55 conf/<feature>/ \u529f\u80fd\u7c7b\u522b \u6587\u4ef6\u4f4d\u7f6e \u670d\u52a1\u57fa\u7840\u914d\u7f6e conf/bfe.conf \u63a5\u5165\u534f\u8bae\u914d\u7f6e conf/tls_conf/ \u76ee\u5f55 \u6d41\u91cf\u8def\u7531\u914d\u7f6e conf/server_data_conf/ \u76ee\u5f55 \u8d1f\u8f7d\u5747\u8861\u914d\u7f6e conf/cluster_conf/ \u76ee\u5f55 \u6269\u5c55\u6a21\u5757\u914d\u7f6e conf/mod_<name> \u76ee\u5f55","title":"BFE\u914d\u7f6e\u7ec4\u7ec7"},{"location":"configuration/config/#bfe_3","text":"\u8be6\u89c1 \u914d\u7f6e\u70ed\u52a0\u8f7d","title":"BFE\u914d\u7f6e\u70ed\u52a0\u8f7d"},{"location":"configuration/cluster_conf/cluster_table.data/","text":"\u5b9e\u4f8b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb cluster_table.data\u914d\u7f6e\u6587\u4ef6\u8bb0\u5f55\u5404\u540e\u7aef\u96c6\u7fa4\u5305\u542b\u7684\u5b50\u96c6\u7fa4\u53ca\u5b9e\u4f8b \u914d\u7f6e\u63cf\u8ff0 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u96c6\u7fa4\u4fe1\u606f\u914d\u7f6e Config{k} String \u96c6\u7fa4\u540d\u79f0 Config{v} Object \u96c6\u7fa4\u8be6\u7ec6\u914d\u7f6e\u4fe1\u606f Config{v}{k} String \u5b50\u96c6\u7fa4\u540d\u79f0 Config{v}{v} Object \u5b50\u96c6\u7fa4\u914d\u7f6e\u4fe1\u606f\uff0c\u5305\u542b\u591a\u4e2a\u5b9e\u4f8b\u914d\u7f6e \u5b9e\u4f8b\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 Addr String \u5b9e\u4f8b\u76d1\u542c\u5730\u5740 Port Integer \u5b9e\u4f8b\u76d1\u542c\u7aef\u53e3 Weight Integer \u5b9e\u4f8b\u6743\u91cd Addr String \u5b9e\u4f8b\u540d\u79f0 \u914d\u7f6e\u793a\u4f8b { \"Config\" : { \"cluster_example\" : { \"example.bfe.bj\" : [ { \"Addr\" : \"10.199.189.26\" , \"Name\" : \"example_hostname\" , \"Port\" : 10257 , \"Weight\" : 10 } ] } }, \"Version\" : \"20190101000000\" }","title":"\u5b9e\u4f8b\u8d1f\u8f7d\u5747\u8861"},{"location":"configuration/cluster_conf/cluster_table.data/#_1","text":"","title":"\u5b9e\u4f8b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e"},{"location":"configuration/cluster_conf/cluster_table.data/#_2","text":"cluster_table.data\u914d\u7f6e\u6587\u4ef6\u8bb0\u5f55\u5404\u540e\u7aef\u96c6\u7fa4\u5305\u542b\u7684\u5b50\u96c6\u7fa4\u53ca\u5b9e\u4f8b","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/cluster_conf/cluster_table.data/#_3","text":"","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/cluster_conf/cluster_table.data/#_4","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u96c6\u7fa4\u4fe1\u606f\u914d\u7f6e Config{k} String \u96c6\u7fa4\u540d\u79f0 Config{v} Object \u96c6\u7fa4\u8be6\u7ec6\u914d\u7f6e\u4fe1\u606f Config{v}{k} String \u5b50\u96c6\u7fa4\u540d\u79f0 Config{v}{v} Object \u5b50\u96c6\u7fa4\u914d\u7f6e\u4fe1\u606f\uff0c\u5305\u542b\u591a\u4e2a\u5b9e\u4f8b\u914d\u7f6e","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"configuration/cluster_conf/cluster_table.data/#_5","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Addr String \u5b9e\u4f8b\u76d1\u542c\u5730\u5740 Port Integer \u5b9e\u4f8b\u76d1\u542c\u7aef\u53e3 Weight Integer \u5b9e\u4f8b\u6743\u91cd Addr String \u5b9e\u4f8b\u540d\u79f0","title":"\u5b9e\u4f8b\u914d\u7f6e"},{"location":"configuration/cluster_conf/cluster_table.data/#_6","text":"{ \"Config\" : { \"cluster_example\" : { \"example.bfe.bj\" : [ { \"Addr\" : \"10.199.189.26\" , \"Name\" : \"example_hostname\" , \"Port\" : 10257 , \"Weight\" : 10 } ] } }, \"Version\" : \"20190101000000\" }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/cluster_conf/gslb.data/","text":"\u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb gslb.data\u914d\u7f6e\u6587\u4ef6\u8bb0\u5f55\u5404\u96c6\u7fa4\u5185\u7684\u591a\u4e2a\u5b50\u96c6\u7fa4\u4e4b\u95f4\u5206\u6d41\u6bd4\u4f8b(GSLB)\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Hostname String \u914d\u7f6e\u6587\u4ef6\u751f\u6210\u6765\u6e90\u4fe1\u606f Ts String \u914d\u7f6e\u6587\u4ef6\u751f\u6210\u7684\u65f6\u95f4\u6233 Clusters Object \u5404\u96c6\u7fa4\u4e2d\u5b50\u96c6\u7fa4\u7684\u5206\u6d41\u6743\u91cd Clusters{k} String \u96c6\u7fa4\u540d\u79f0 Clusters{v} Object \u96c6\u7fa4\u5185\u5b50\u96c6\u7fa4\u4e4b\u95f4\u5206\u6d41\u6743\u91cd Clusters{v}{k} String \u5b50\u96c6\u7fa4\u540d\u79f0 \u4fdd\u7559GSLB_BLACKHOLE\u4ee3\u8868\u9ed1\u6d1e\u5b50\u96c6\u7fa4\uff0c\u5206\u914d\u5230\u8be5\u5b50\u96c6\u7fa4\u7684\u6d41\u91cf\u5c06\u88ab\u4e22\u5f03\uff0c\u7528\u4e8e\u8fc7\u8f7d\u4fdd\u62a4 Clusters{v}{v} Integer \u5b50\u96c6\u7fa4\u627f\u63a5\u6d41\u91cf\u7684\u6743\u91cd \u5b50\u96c6\u7fa4\u627f\u63a5\u6d41\u91cf\u7684\u6743\u91cd\u53d6\u503c\u8303\u56f4 0\uff5e100,\u5404\u5b50\u96c6\u7fa4\u5206\u6d41\u6743\u91cd\u4e4b\u548c\u5e94\u7b49\u4e8e 100 \u914d\u7f6e\u793a\u4f8b { \"Clusters\" : { \"cluster_example\" : { \"GSLB_BLACKHOLE\" : 0 , \"example.bfe.bj\" : 100 } }, \"Hostname\" : \"gslb-sch.example.com\" , \"Ts\" : \"20190101000000\" }","title":"\u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861"},{"location":"configuration/cluster_conf/gslb.data/#_1","text":"","title":"\u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e"},{"location":"configuration/cluster_conf/gslb.data/#_2","text":"gslb.data\u914d\u7f6e\u6587\u4ef6\u8bb0\u5f55\u5404\u96c6\u7fa4\u5185\u7684\u591a\u4e2a\u5b50\u96c6\u7fa4\u4e4b\u95f4\u5206\u6d41\u6bd4\u4f8b(GSLB)\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/cluster_conf/gslb.data/#_3","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Hostname String \u914d\u7f6e\u6587\u4ef6\u751f\u6210\u6765\u6e90\u4fe1\u606f Ts String \u914d\u7f6e\u6587\u4ef6\u751f\u6210\u7684\u65f6\u95f4\u6233 Clusters Object \u5404\u96c6\u7fa4\u4e2d\u5b50\u96c6\u7fa4\u7684\u5206\u6d41\u6743\u91cd Clusters{k} String \u96c6\u7fa4\u540d\u79f0 Clusters{v} Object \u96c6\u7fa4\u5185\u5b50\u96c6\u7fa4\u4e4b\u95f4\u5206\u6d41\u6743\u91cd Clusters{v}{k} String \u5b50\u96c6\u7fa4\u540d\u79f0 \u4fdd\u7559GSLB_BLACKHOLE\u4ee3\u8868\u9ed1\u6d1e\u5b50\u96c6\u7fa4\uff0c\u5206\u914d\u5230\u8be5\u5b50\u96c6\u7fa4\u7684\u6d41\u91cf\u5c06\u88ab\u4e22\u5f03\uff0c\u7528\u4e8e\u8fc7\u8f7d\u4fdd\u62a4 Clusters{v}{v} Integer \u5b50\u96c6\u7fa4\u627f\u63a5\u6d41\u91cf\u7684\u6743\u91cd \u5b50\u96c6\u7fa4\u627f\u63a5\u6d41\u91cf\u7684\u6743\u91cd\u53d6\u503c\u8303\u56f4 0\uff5e100,\u5404\u5b50\u96c6\u7fa4\u5206\u6d41\u6743\u91cd\u4e4b\u548c\u5e94\u7b49\u4e8e 100","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/cluster_conf/gslb.data/#_4","text":"{ \"Clusters\" : { \"cluster_example\" : { \"GSLB_BLACKHOLE\" : 0 , \"example.bfe.bj\" : 100 } }, \"Hostname\" : \"gslb-sch.example.com\" , \"Ts\" : \"20190101000000\" }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/server_data_conf/cluster_conf.data/","text":"\u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb cluster_conf.data\u4e3a\u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u6587\u4ef6\u3002 \u914d\u7f6e\u63cf\u8ff0 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u96c6\u7fa4\u7684\u8f6c\u53d1\u914d\u7f6e\u53c2\u6570 Config[k] String \u96c6\u7fa4\u540d\u79f0 Config[v] Object \u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u53c2\u6570 \u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e \u6ce8\uff1a\u4ee5\u4e0b\u914d\u7f6e\u9879\u5747\u4f4d\u4e8e\u540d\u5b57\u7a7a\u95f4Config[v], \u5728\u914d\u7f6e\u9879\u540d\u79f0\u4e2d\u5df2\u7701\u7565 \u540e\u7aef\u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 Backend.TimeoutConnSrv Integer \u8fde\u63a5\u540e\u7aef\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c2 Backend.TimeoutResponseHeader Integer \u4ece\u540e\u7aef\u8bfb\u54cd\u5e94\u5934\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c60 Backend.MaxIdleConnsPerHost Integer BFE\u5b9e\u4f8b\u4e0e\u6bcf\u4e2a\u540e\u7aef\u7684\u6700\u5927\u7a7a\u95f2\u957f\u8fde\u63a5\u6570 \u9ed8\u8ba4\u503c2 Backend.RetryLevel Integer \u8bf7\u6c42\u91cd\u8bd5\u7ea7\u522b\u30020\uff1a\u8fde\u63a5\u540e\u7aef\u5931\u8d25\u65f6\uff0c\u8fdb\u884c\u91cd\u8bd5\uff1b1\uff1a\u8fde\u63a5\u540e\u7aef\u5931\u8d25\u3001\u8f6c\u53d1GET\u8bf7\u6c42\u5931\u8d25\u65f6\u5747\u8fdb\u884c\u91cd\u8bd5 \u9ed8\u8ba4\u503c0 \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 CheckConnf.Schem String \u5065\u5eb7\u68c0\u67e5\u534f\u8bae\uff0c\u652f\u6301HTTP\u548cTCP \u9ed8\u8ba4\u503c HTTP CheckConnf.Uri String \u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42URI (\u4ec5HTTP) \u9ed8\u8ba4\u503c /health_check CheckConnf.Host String \u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42HOST (\u4ec5HTTP) \u9ed8\u8ba4\u503c \"\" CheckConnf.StatusCode Integer \u671f\u5f85\u8fd4\u56de\u7684\u54cd\u5e94\u72b6\u6001\u7801 (\u4ec5HTTP) \u9ed8\u8ba4\u503c 0 CheckConnf.FailNum Integer \u5065\u5eb7\u68c0\u67e5\u542f\u52a8\u9608\u503cF\uff08\u8f6c\u53d1\u8bf7\u6c42\u8fde\u7eed\u5931\u8d25F\u6b21\u540e\uff0c\u5c06\u540e\u7aef\u5b9e\u4f8b\u7f6e\u4e3a\u4e0d\u53ef\u7528\u72b6\u6001\uff0c\u5e76\u542f\u52a8\u5065\u5eb7\u68c0\u67e5\uff09 \u9ed8\u8ba4\u503c5 CheckConnf.SuccNum Integer \u5065\u5eb7\u68c0\u67e5\u6210\u529f\u9608\u503cS\uff08\u5065\u5eb7\u68c0\u67e5\u8fde\u7eed\u6210\u529fS\u6b21\u540e\uff0c\u5c06\u540e\u7aef\u5b9e\u4f8b\u7f6e\u4e3a\u53ef\u7528\u72b6\u6001\uff09 \u9ed8\u8ba4\u503c1 CheckConnf.CheckTimeout Integer \u5065\u5eb7\u68c0\u67e5\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c0\uff08\u65e0\u8d85\u65f6\uff09 CheckConnf.CheckInterval Integer \u5065\u5eb7\u68c0\u67e5\u7684\u95f4\u9694\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c1 GSLB\u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 GslbBadic.CrossRetry Integer \u8de8\u5b50\u96c6\u7fa4\u6700\u5927\u91cd\u8bd5\u6b21\u6570 \u9ed8\u8ba4\u503c0 GslbBadic.RetryMax Integer \u5b50\u96c6\u7fa4\u5185\u6700\u5927\u91cd\u8bd5\u6b21\u6570 \u9ed8\u8ba4\u503c2 GslbBadic.BalanceMode String \u8d1f\u8f7d\u5747\u8861\u6a21\u5f0f(WRR: \u52a0\u6743\u8f6e\u8be2; WLC: \u52a0\u6743\u6700\u5c0f\u8fde\u63a5\u6570) \u9ed8\u8ba4\u503cWRR GslbBadic.HashConf Object \u4f1a\u8bdd\u4fdd\u6301\u7684HASH\u7b56\u7565\u914d\u7f6e GslbBadic.HashConf.HashStrategy Integer \u4f1a\u8bdd\u4fdd\u6301\u7684\u54c8\u5e0c\u7b56(ClientIdOnly, ClientIpOnly, ClientIdPreferred) \u9ed8\u8ba4\u503cClientIpOnly GslbBadic.HashConf.HashHeader String \u4f1a\u8bdd\u4fdd\u6301\u7684hash\u8bf7\u6c42\u5934 GslbBadic.HashConf.SessionSticky Boolean \u662f\u5426\u5f00\u542f\u4f1a\u8bdd\u4fdd\u6301\uff08\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u6765\u6e90\u4e8e\u540c\u4e00\u4e2a\u7528\u6237\u7684\u8bf7\u6c42\u53ef\u4ee5\u53d1\u9001\u5230\u540c\u4e00\u4e2a\u540e\u7aef\uff09 \u9ed8\u8ba4\u503cFalse \u96c6\u7fa4\u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u9879 \u63cf\u8ff0 ClusterBasic.TimeoutReadClient Integer \u8bfb\u7528\u6237\u8bf7\u6c42wody\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2 \u9ed8\u8ba4\u503c30 ClusterBasic.TimeoutWriteClient Integer \u5199\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2 \u9ed8\u8ba4\u503c60 ClusterBasic.TimeoutReadClientAgain Integer \u8fde\u63a5\u95f2\u7f6e\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2 \u9ed8\u8ba4\u503c60 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"cluster_example\" : { \"BackendConf\" : { \"TimeoutConnSrv\" : 2000 , \"TimeoutResponseHeader\" : 50000 , \"MaxIdleConnsPerHost\" : 0 , \"RetryLevel\" : 0 }, \"CheckConf\" : { \"Schem\" : \"http\" , \"Uri\" : \"/healthcheck\" , \"Host\" : \"example.org\" , \"StatusCode\" : 200 , \"FailNum\" : 10 , \"CheckInterval\" : 1000 }, \"GslbBasic\" : { \"CrossRetry\" : 0 , \"RetryMax\" : 2 , \"HashConf\" : { \"HashStrategy\" : 0 , \"HashHeader\" : \"Cookie:UID\" , \"SessionSticky\" : false } }, \"ClusterBasic\" : { \"TimeoutReadClient\" : 30000 , \"TimeoutWriteClient\" : 60000 , \"TimeoutReadClientAgain\" : 30000 , } } } }","title":"\u540e\u7aef\u96c6\u7fa4"},{"location":"configuration/server_data_conf/cluster_conf.data/#_1","text":"","title":"\u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e"},{"location":"configuration/server_data_conf/cluster_conf.data/#_2","text":"cluster_conf.data\u4e3a\u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/server_data_conf/cluster_conf.data/#_3","text":"","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/server_data_conf/cluster_conf.data/#_4","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u96c6\u7fa4\u7684\u8f6c\u53d1\u914d\u7f6e\u53c2\u6570 Config[k] String \u96c6\u7fa4\u540d\u79f0 Config[v] Object \u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u53c2\u6570","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"configuration/server_data_conf/cluster_conf.data/#_5","text":"\u6ce8\uff1a\u4ee5\u4e0b\u914d\u7f6e\u9879\u5747\u4f4d\u4e8e\u540d\u5b57\u7a7a\u95f4Config[v], \u5728\u914d\u7f6e\u9879\u540d\u79f0\u4e2d\u5df2\u7701\u7565","title":"\u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e"},{"location":"configuration/server_data_conf/cluster_conf.data/#_6","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Backend.TimeoutConnSrv Integer \u8fde\u63a5\u540e\u7aef\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c2 Backend.TimeoutResponseHeader Integer \u4ece\u540e\u7aef\u8bfb\u54cd\u5e94\u5934\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c60 Backend.MaxIdleConnsPerHost Integer BFE\u5b9e\u4f8b\u4e0e\u6bcf\u4e2a\u540e\u7aef\u7684\u6700\u5927\u7a7a\u95f2\u957f\u8fde\u63a5\u6570 \u9ed8\u8ba4\u503c2 Backend.RetryLevel Integer \u8bf7\u6c42\u91cd\u8bd5\u7ea7\u522b\u30020\uff1a\u8fde\u63a5\u540e\u7aef\u5931\u8d25\u65f6\uff0c\u8fdb\u884c\u91cd\u8bd5\uff1b1\uff1a\u8fde\u63a5\u540e\u7aef\u5931\u8d25\u3001\u8f6c\u53d1GET\u8bf7\u6c42\u5931\u8d25\u65f6\u5747\u8fdb\u884c\u91cd\u8bd5 \u9ed8\u8ba4\u503c0","title":"\u540e\u7aef\u57fa\u7840\u914d\u7f6e"},{"location":"configuration/server_data_conf/cluster_conf.data/#_7","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 CheckConnf.Schem String \u5065\u5eb7\u68c0\u67e5\u534f\u8bae\uff0c\u652f\u6301HTTP\u548cTCP \u9ed8\u8ba4\u503c HTTP CheckConnf.Uri String \u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42URI (\u4ec5HTTP) \u9ed8\u8ba4\u503c /health_check CheckConnf.Host String \u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42HOST (\u4ec5HTTP) \u9ed8\u8ba4\u503c \"\" CheckConnf.StatusCode Integer \u671f\u5f85\u8fd4\u56de\u7684\u54cd\u5e94\u72b6\u6001\u7801 (\u4ec5HTTP) \u9ed8\u8ba4\u503c 0 CheckConnf.FailNum Integer \u5065\u5eb7\u68c0\u67e5\u542f\u52a8\u9608\u503cF\uff08\u8f6c\u53d1\u8bf7\u6c42\u8fde\u7eed\u5931\u8d25F\u6b21\u540e\uff0c\u5c06\u540e\u7aef\u5b9e\u4f8b\u7f6e\u4e3a\u4e0d\u53ef\u7528\u72b6\u6001\uff0c\u5e76\u542f\u52a8\u5065\u5eb7\u68c0\u67e5\uff09 \u9ed8\u8ba4\u503c5 CheckConnf.SuccNum Integer \u5065\u5eb7\u68c0\u67e5\u6210\u529f\u9608\u503cS\uff08\u5065\u5eb7\u68c0\u67e5\u8fde\u7eed\u6210\u529fS\u6b21\u540e\uff0c\u5c06\u540e\u7aef\u5b9e\u4f8b\u7f6e\u4e3a\u53ef\u7528\u72b6\u6001\uff09 \u9ed8\u8ba4\u503c1 CheckConnf.CheckTimeout Integer \u5065\u5eb7\u68c0\u67e5\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c0\uff08\u65e0\u8d85\u65f6\uff09 CheckConnf.CheckInterval Integer \u5065\u5eb7\u68c0\u67e5\u7684\u95f4\u9694\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2 \u9ed8\u8ba4\u503c1","title":"\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e"},{"location":"configuration/server_data_conf/cluster_conf.data/#gslb","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 GslbBadic.CrossRetry Integer \u8de8\u5b50\u96c6\u7fa4\u6700\u5927\u91cd\u8bd5\u6b21\u6570 \u9ed8\u8ba4\u503c0 GslbBadic.RetryMax Integer \u5b50\u96c6\u7fa4\u5185\u6700\u5927\u91cd\u8bd5\u6b21\u6570 \u9ed8\u8ba4\u503c2 GslbBadic.BalanceMode String \u8d1f\u8f7d\u5747\u8861\u6a21\u5f0f(WRR: \u52a0\u6743\u8f6e\u8be2; WLC: \u52a0\u6743\u6700\u5c0f\u8fde\u63a5\u6570) \u9ed8\u8ba4\u503cWRR GslbBadic.HashConf Object \u4f1a\u8bdd\u4fdd\u6301\u7684HASH\u7b56\u7565\u914d\u7f6e GslbBadic.HashConf.HashStrategy Integer \u4f1a\u8bdd\u4fdd\u6301\u7684\u54c8\u5e0c\u7b56(ClientIdOnly, ClientIpOnly, ClientIdPreferred) \u9ed8\u8ba4\u503cClientIpOnly GslbBadic.HashConf.HashHeader String \u4f1a\u8bdd\u4fdd\u6301\u7684hash\u8bf7\u6c42\u5934 GslbBadic.HashConf.SessionSticky Boolean \u662f\u5426\u5f00\u542f\u4f1a\u8bdd\u4fdd\u6301\uff08\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u6765\u6e90\u4e8e\u540c\u4e00\u4e2a\u7528\u6237\u7684\u8bf7\u6c42\u53ef\u4ee5\u53d1\u9001\u5230\u540c\u4e00\u4e2a\u540e\u7aef\uff09 \u9ed8\u8ba4\u503cFalse","title":"GSLB\u57fa\u7840\u914d\u7f6e"},{"location":"configuration/server_data_conf/cluster_conf.data/#_8","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 ClusterBasic.TimeoutReadClient Integer \u8bfb\u7528\u6237\u8bf7\u6c42wody\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2 \u9ed8\u8ba4\u503c30 ClusterBasic.TimeoutWriteClient Integer \u5199\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2 \u9ed8\u8ba4\u503c60 ClusterBasic.TimeoutReadClientAgain Integer \u8fde\u63a5\u95f2\u7f6e\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2 \u9ed8\u8ba4\u503c60","title":"\u96c6\u7fa4\u57fa\u7840\u914d\u7f6e"},{"location":"configuration/server_data_conf/cluster_conf.data/#_9","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"cluster_example\" : { \"BackendConf\" : { \"TimeoutConnSrv\" : 2000 , \"TimeoutResponseHeader\" : 50000 , \"MaxIdleConnsPerHost\" : 0 , \"RetryLevel\" : 0 }, \"CheckConf\" : { \"Schem\" : \"http\" , \"Uri\" : \"/healthcheck\" , \"Host\" : \"example.org\" , \"StatusCode\" : 200 , \"FailNum\" : 10 , \"CheckInterval\" : 1000 }, \"GslbBasic\" : { \"CrossRetry\" : 0 , \"RetryMax\" : 2 , \"HashConf\" : { \"HashStrategy\" : 0 , \"HashHeader\" : \"Cookie:UID\" , \"SessionSticky\" : false } }, \"ClusterBasic\" : { \"TimeoutReadClient\" : 30000 , \"TimeoutWriteClient\" : 60000 , \"TimeoutReadClientAgain\" : 30000 , } } } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/server_data_conf/host_rule.data/","text":"\u57df\u540d\u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb host_rule.data\u662fBFE\u7684\u4ea7\u54c1\u7ebf\u57df\u540d\u8868\u914d\u7f6e\u6587\u4ef6\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c DefaultProduct String \u9ed8\u8ba4\u7684\u4ea7\u54c1\u7ebf\u540d\u79f0 Hosts Object \u57df\u540d\u6807\u7b7e\u548c\u57df\u540d\u5217\u8868\u7684\u6620\u5c04\u5173\u7cfb Hosts{k} String \u57df\u540d\u6807\u7b7e Hosts{v} Object \u57df\u540d\u5217\u8868 Hosts{v}[] String \u57df\u540d\u4fe1\u606f HostTags Object \u4ea7\u54c1\u7ebf\u548c\u57df\u540d\u6807\u7b7e\u7684\u6620\u5c04\u5173\u7cfb HostTags{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 HostTags{v} String \u57df\u540d\u6807\u7b7e\u5217\u8868 HostTags{v}[] String \u57df\u540d\u6807\u7b7e \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"DefaultProduct\" : null , \"Hosts\" : { \"exampleTag\" :[ \"example.org\" ] }, \"HostTags\" : { \"example_product\" :[ \"exampleTag\" ] } }","title":"\u57df\u540d\u89c4\u5219"},{"location":"configuration/server_data_conf/host_rule.data/#_1","text":"","title":"\u57df\u540d\u89c4\u5219\u914d\u7f6e"},{"location":"configuration/server_data_conf/host_rule.data/#_2","text":"host_rule.data\u662fBFE\u7684\u4ea7\u54c1\u7ebf\u57df\u540d\u8868\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/server_data_conf/host_rule.data/#_3","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c DefaultProduct String \u9ed8\u8ba4\u7684\u4ea7\u54c1\u7ebf\u540d\u79f0 Hosts Object \u57df\u540d\u6807\u7b7e\u548c\u57df\u540d\u5217\u8868\u7684\u6620\u5c04\u5173\u7cfb Hosts{k} String \u57df\u540d\u6807\u7b7e Hosts{v} Object \u57df\u540d\u5217\u8868 Hosts{v}[] String \u57df\u540d\u4fe1\u606f HostTags Object \u4ea7\u54c1\u7ebf\u548c\u57df\u540d\u6807\u7b7e\u7684\u6620\u5c04\u5173\u7cfb HostTags{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 HostTags{v} String \u57df\u540d\u6807\u7b7e\u5217\u8868 HostTags{v}[] String \u57df\u540d\u6807\u7b7e","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/server_data_conf/host_rule.data/#_4","text":"{ \"Version\" : \"20190101000000\" , \"DefaultProduct\" : null , \"Hosts\" : { \"exampleTag\" :[ \"example.org\" ] }, \"HostTags\" : { \"example_product\" :[ \"exampleTag\" ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/server_data_conf/name_conf.data/","text":"\u540d\u5b57\u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb name_conf.data\u8bb0\u5f55\u4e86\u670d\u52a1\u540d\u5b57\u548c\u670d\u52a1\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u540d\u5b57\u548c\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb Config[k] String \u96c6\u7fa4\u540d\u79f0 Config[v] Object \u5b9e\u4f8b\u4fe1\u606f\u5217\u8868 Config[v][] Object \u5b9e\u4f8b\u4fe1\u606f Config[v][].Host String \u5b9e\u4f8b\u5730\u5740 Config[v][].Port Integer \u5b9e\u4f8b\u7aef\u53e3 Config[v][].Weight Integer \u5b9e\u4f8b\u6743\u91cd \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"example.redis.cluster\" : [ { \"Host\" : \"192.168.1.1\" , \"Port\" : 6439 , \"Weight\" : 10 } ] } }","title":"\u540d\u5b57\u89c4\u5219"},{"location":"configuration/server_data_conf/name_conf.data/#_1","text":"","title":"\u540d\u5b57\u89c4\u5219\u914d\u7f6e"},{"location":"configuration/server_data_conf/name_conf.data/#_2","text":"name_conf.data\u8bb0\u5f55\u4e86\u670d\u52a1\u540d\u5b57\u548c\u670d\u52a1\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/server_data_conf/name_conf.data/#_3","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u540d\u5b57\u548c\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb Config[k] String \u96c6\u7fa4\u540d\u79f0 Config[v] Object \u5b9e\u4f8b\u4fe1\u606f\u5217\u8868 Config[v][] Object \u5b9e\u4f8b\u4fe1\u606f Config[v][].Host String \u5b9e\u4f8b\u5730\u5740 Config[v][].Port Integer \u5b9e\u4f8b\u7aef\u53e3 Config[v][].Weight Integer \u5b9e\u4f8b\u6743\u91cd","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/server_data_conf/name_conf.data/#_4","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"example.redis.cluster\" : [ { \"Host\" : \"192.168.1.1\" , \"Port\" : 6439 , \"Weight\" : 10 } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/server_data_conf/route_rule.data/","text":"\u5206\u6d41\u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb route_rule.data \u662fBFE\u7684\u5206\u6d41\u914d\u7f6e\u6587\u4ef6\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c ProductRule Object \u5404\u4ea7\u54c1\u7ebf\u7684\u5206\u6d41\u89c4\u5219\u914d\u7f6e ProductRule[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 ProductRule[v] Object \u5206\u6d41\u89c4\u5219\u8868\uff0c\u5305\u542b\u591a\u6761\u6709\u5e8f\u5206\u6d41\u89c4\u5219 ProductRule[v][] Object \u5206\u6d41\u89c4\u5219 ProductRule[v][].Cond String \u5206\u6d41\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition ProductRule[v][].ClusterName Object \u76ee\u7684\u96c6\u7fa4 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"ProductRule\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"example.org\\\")\" , \"ClusterName\" : \"cluster_example1\" }, { \"Cond\" : \"default_t()\" , \"ClusterName\" : \"cluster_example2\" } ] } }","title":"\u8def\u7531\u89c4\u5219"},{"location":"configuration/server_data_conf/route_rule.data/#_1","text":"","title":"\u5206\u6d41\u89c4\u5219\u914d\u7f6e"},{"location":"configuration/server_data_conf/route_rule.data/#_2","text":"route_rule.data \u662fBFE\u7684\u5206\u6d41\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/server_data_conf/route_rule.data/#_3","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c ProductRule Object \u5404\u4ea7\u54c1\u7ebf\u7684\u5206\u6d41\u89c4\u5219\u914d\u7f6e ProductRule[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 ProductRule[v] Object \u5206\u6d41\u89c4\u5219\u8868\uff0c\u5305\u542b\u591a\u6761\u6709\u5e8f\u5206\u6d41\u89c4\u5219 ProductRule[v][] Object \u5206\u6d41\u89c4\u5219 ProductRule[v][].Cond String \u5206\u6d41\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition ProductRule[v][].ClusterName Object \u76ee\u7684\u96c6\u7fa4","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/server_data_conf/route_rule.data/#_4","text":"{ \"Version\" : \"20190101000000\" , \"ProductRule\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"example.org\\\")\" , \"ClusterName\" : \"cluster_example1\" }, { \"Cond\" : \"default_t()\" , \"ClusterName\" : \"cluster_example2\" } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/server_data_conf/vip_rule.data/","text":"VIP\u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb vip_rule.data\u914d\u7f6e\u6587\u4ef6\u8bb0\u5f55\u4ea7\u54c1\u7ebf\u7684VIP\u5217\u8868\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Vips Object \u5404\u4ea7\u54c1\u7ebf\u7684VIP\u5217\u8868 Vips[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Vips[v] String VIP\u5217\u8868 Vips[v][] String VIP \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Vips\" : { \"example_product\" : [ \"111.111.111.111\" ] } }","title":"VIP\u89c4\u5219"},{"location":"configuration/server_data_conf/vip_rule.data/#vip","text":"","title":"VIP\u89c4\u5219\u914d\u7f6e"},{"location":"configuration/server_data_conf/vip_rule.data/#_1","text":"vip_rule.data\u914d\u7f6e\u6587\u4ef6\u8bb0\u5f55\u4ea7\u54c1\u7ebf\u7684VIP\u5217\u8868\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/server_data_conf/vip_rule.data/#_2","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Vips Object \u5404\u4ea7\u54c1\u7ebf\u7684VIP\u5217\u8868 Vips[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Vips[v] String VIP\u5217\u8868 Vips[v][] String VIP","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/server_data_conf/vip_rule.data/#_3","text":"{ \"Version\" : \"20190101000000\" , \"Vips\" : { \"example_product\" : [ \"111.111.111.111\" ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/tls_conf/server_cert_conf.data/","text":"TLS\u670d\u52a1\u7aef\u8bc1\u4e66\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb server_cert_conf.data\u7528\u4e8e\u914d\u7f6e\u8bc1\u4e66\u548c\u5bc6\u94a5\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u8bc1\u4e66\u914d\u7f6e\u4fe1\u606f Config.Default String \u9ed8\u8ba4\u8bc1\u4e66\u540d\u79f0; \u5fc5\u914d\u9009\u9879, \u9ed8\u8ba4\u8bc1\u4e66\u987b\u5305\u542b\u5728\u8bc1\u4e66\u5217\u8868(CertConf)\u4e2d Config.CertConf Object \u6240\u6709\u8bc1\u4e66\u5217\u8868 Config.CertConf{k} String \u8bc1\u4e66\u540d\u79f0; \u8bc1\u4e66\u540d\u79f0\u7981\u6b62\u547d\u540d\u4e3a\"BFE_DEFAULT_CERT\" Config.CertConf{v} Object \u8bc1\u4e66\u76f8\u5173\u6587\u4ef6\u8def\u5f84 Config.CertConf{v}.ServerCertFile String \u8bc1\u4e66\u6587\u4ef6\u8def\u5f84 Config.CertConf{v}.ServerKeyFile String \u8bc1\u4e66\u5173\u8054\u5bc6\u94a5\u6587\u4ef6\u8def\u5f84 Config.CertConf{v}.OcspResponseFile String \u8bc1\u4e66\u5173\u8054OCSP Stple\u6587\u4ef6\u8def\u5f84 \u53ef\u9009\u914d\u7f6e \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"Default\" : \"example.org\" , \"CertConf\" : { \"example.org\" : { \"ServerCertFile\" : \"tls_conf/certs/server.crt\" , \"ServerKeyFile\" : \"tls_conf/certs/server.key\" } } } }","title":"\u8bc1\u4e66"},{"location":"configuration/tls_conf/server_cert_conf.data/#tls","text":"","title":"TLS\u670d\u52a1\u7aef\u8bc1\u4e66\u914d\u7f6e"},{"location":"configuration/tls_conf/server_cert_conf.data/#_1","text":"server_cert_conf.data\u7528\u4e8e\u914d\u7f6e\u8bc1\u4e66\u548c\u5bc6\u94a5\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/tls_conf/server_cert_conf.data/#_2","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u8bc1\u4e66\u914d\u7f6e\u4fe1\u606f Config.Default String \u9ed8\u8ba4\u8bc1\u4e66\u540d\u79f0; \u5fc5\u914d\u9009\u9879, \u9ed8\u8ba4\u8bc1\u4e66\u987b\u5305\u542b\u5728\u8bc1\u4e66\u5217\u8868(CertConf)\u4e2d Config.CertConf Object \u6240\u6709\u8bc1\u4e66\u5217\u8868 Config.CertConf{k} String \u8bc1\u4e66\u540d\u79f0; \u8bc1\u4e66\u540d\u79f0\u7981\u6b62\u547d\u540d\u4e3a\"BFE_DEFAULT_CERT\" Config.CertConf{v} Object \u8bc1\u4e66\u76f8\u5173\u6587\u4ef6\u8def\u5f84 Config.CertConf{v}.ServerCertFile String \u8bc1\u4e66\u6587\u4ef6\u8def\u5f84 Config.CertConf{v}.ServerKeyFile String \u8bc1\u4e66\u5173\u8054\u5bc6\u94a5\u6587\u4ef6\u8def\u5f84 Config.CertConf{v}.OcspResponseFile String \u8bc1\u4e66\u5173\u8054OCSP Stple\u6587\u4ef6\u8def\u5f84 \u53ef\u9009\u914d\u7f6e","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/tls_conf/server_cert_conf.data/#_3","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"Default\" : \"example.org\" , \"CertConf\" : { \"example.org\" : { \"ServerCertFile\" : \"tls_conf/certs/server.crt\" , \"ServerKeyFile\" : \"tls_conf/certs/server.key\" } } } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/tls_conf/session_ticket_key.data/","text":"TLS Session Ticket Key\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb session_ticket_key.data\u914d\u7f6e\u8bb0\u5f55\u4e86session ticket key\u4fe1\u606f\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c SessionTicketKey String Session Ticket\u5bc6\u94a5\uff0c\u4ec5\u5305\u542b\u5b57\u7b26a-z0-9\u4e14\u957f\u5ea648\u7684\u5b57\u7b26\u4e32 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"SessionTicketKey\" : \"08a0d852ef494143af613ef32d3c39314758885f7108e9ab021d55f422a454f7c9cd5a53978f48fa1063eadcdc06878f\" }","title":"Session ticket key"},{"location":"configuration/tls_conf/session_ticket_key.data/#tls-session-ticket-key","text":"","title":"TLS Session Ticket Key\u914d\u7f6e"},{"location":"configuration/tls_conf/session_ticket_key.data/#_1","text":"session_ticket_key.data\u914d\u7f6e\u8bb0\u5f55\u4e86session ticket key\u4fe1\u606f\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/tls_conf/session_ticket_key.data/#_2","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c SessionTicketKey String Session Ticket\u5bc6\u94a5\uff0c\u4ec5\u5305\u542b\u5b57\u7b26a-z0-9\u4e14\u957f\u5ea648\u7684\u5b57\u7b26\u4e32","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/tls_conf/session_ticket_key.data/#_3","text":"{ \"Version\" : \"20190101000000\" , \"SessionTicketKey\" : \"08a0d852ef494143af613ef32d3c39314758885f7108e9ab021d55f422a454f7c9cd5a53978f48fa1063eadcdc06878f\" }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/tls_conf/tls_rule_conf.data/","text":"TLS\u534f\u8bae\u914d\u7f6e \u914d\u7f6e\u7b80\u4ecb tls_rule_conf.data\u914d\u7f6eTLS\u534f\u8bae\u53c2\u6570\u3002 \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6240\u6709TLS\u534f\u8bae\u914d\u7f6e Config{k} String \u6807\u7b7e Config{v} Object TLS\u534f\u8bae\u914d\u7f6e\u8be6\u60c5 Config{v}.CertName String \u670d\u52a1\u7aef\u8bc1\u4e66\u540d\u79f0\uff08\u6ce8\uff1a\u5728server_cert_conf.data\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff09 Config{v}.NextProtos Object TLS\u5e94\u7528\u5c42\u534f\u8bae\u5217\u8868 \u9ed8\u8ba4\u503c\u4e3a[\"http/1.1\"] Config{v}.NextProtos[] String TLS\u5e94\u7528\u5c42\u534f\u8bae, \u5408\u6cd5\u503c\u5305\u62ech2, spdy/3.1, http/1.1 Config{v}.Grade String TLS\u5b89\u5168\u7b49\u7ea7, \u5408\u6cd5\u503c\u5305\u62ecA+\uff0cA\uff0cB\uff0cC Config{v}.ClientAuth Bool \u662f\u5426\u542f\u7528TLS\u53cc\u5411\u8ba4\u8bc1 Config{v}.ClientCAName String \u5ba2\u6237\u7aef\u8bc1\u4e66\u7b7e\u53d1CA\u540d\u79f0 Config{v}.VipConf Object VIP\u5217\u8868\uff08\u6ce8\uff1a\u4f18\u5148\u4f9d\u636eVIP\u6765\u786e\u5b9aTLS\u914d\u7f6e\uff09 Config{v}.VipConf[] String VIP Config{v}.SniConf Object \u57df\u540d\u5217\u8868\uff0c\u53ef\u9009\uff08\u6ce8\uff1a\u65e0\u6cd5\u4f9d\u636eVIP\u786e\u5b9aTLS\u914d\u7f6e\u65f6\uff0c\u4f7f\u7528SNI\u786e\u5b9aTLS\u914d\u7f6e\uff09 Config{v}.SniConf[] String \u57df\u540d DefaultNextProtos Object \u652f\u6301\u7684TLS\u5e94\u7528\u5c42\u534f\u8bae\u5217\u8868 DefaultNextProtos[] String TLS\u5e94\u7528\u5c42\u534f\u8bae, \u5408\u6cd5\u503c\u5305\u62ech2, spdy/3.1, http/1.1 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"DefaultNextProtos\" : [ \"h2\" , \"http/1.1\" ], \"Config\" : { \"example_product\" : { \"VipConf\" : [ \"10.199.4.14\" ], \"SniConf\" : null , \"CertName\" : \"example.org\" , \"NextProtos\" : [ \"h2\" , \"http/1.1\" ], \"Grade\" : \"B\" , \"ClientCAName\" : \"\" } } } \u5b89\u5168\u7b49\u7ea7\u8bf4\u660e BFE\u652f\u6301\u591a\u79cd\u5b89\u5168\u7b49\u7ea7\uff08A+/A/B/C\uff09\u3002\u5404\u5b89\u5168\u7b49\u7ea7\u5dee\u5f02\u5728\u4e8e\u652f\u6301\u7684\u534f\u8bae\u7248\u672c\u53ca\u52a0\u5bc6\u5957\u4ef6\u3002A+\u7b49\u7ea7\u5b89\u5168\u6027\u6700\u9ad8\u3001\u8fde\u901a\u6027\u6700\u4f4e\uff1bC\u7b49\u7ea7\u5b89\u5168\u6027\u6700\u4f4e\u3001\u8fde\u901a\u6027\u6700\u9ad8\u3002 \u5b89\u5168\u7b49\u7ea7A+ \u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA \u5b89\u5168\u7b49\u7ea7A \u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS1.1 TLS1.0 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA \u5b89\u5168\u7b49\u7ea7B \u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS1.1 TLS1.0 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA SSLv3 TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_RC4_128_SHA \u5b89\u5168\u7b49\u7ea7C \u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS1.1 TLS1.0 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_RC4_128_SHA SSLv3 TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_RC4_128_SHA","title":"SSL/TLS"},{"location":"configuration/tls_conf/tls_rule_conf.data/#tls","text":"","title":"TLS\u534f\u8bae\u914d\u7f6e"},{"location":"configuration/tls_conf/tls_rule_conf.data/#_1","text":"tls_rule_conf.data\u914d\u7f6eTLS\u534f\u8bae\u53c2\u6570\u3002","title":"\u914d\u7f6e\u7b80\u4ecb"},{"location":"configuration/tls_conf/tls_rule_conf.data/#_2","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6240\u6709TLS\u534f\u8bae\u914d\u7f6e Config{k} String \u6807\u7b7e Config{v} Object TLS\u534f\u8bae\u914d\u7f6e\u8be6\u60c5 Config{v}.CertName String \u670d\u52a1\u7aef\u8bc1\u4e66\u540d\u79f0\uff08\u6ce8\uff1a\u5728server_cert_conf.data\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff09 Config{v}.NextProtos Object TLS\u5e94\u7528\u5c42\u534f\u8bae\u5217\u8868 \u9ed8\u8ba4\u503c\u4e3a[\"http/1.1\"] Config{v}.NextProtos[] String TLS\u5e94\u7528\u5c42\u534f\u8bae, \u5408\u6cd5\u503c\u5305\u62ech2, spdy/3.1, http/1.1 Config{v}.Grade String TLS\u5b89\u5168\u7b49\u7ea7, \u5408\u6cd5\u503c\u5305\u62ecA+\uff0cA\uff0cB\uff0cC Config{v}.ClientAuth Bool \u662f\u5426\u542f\u7528TLS\u53cc\u5411\u8ba4\u8bc1 Config{v}.ClientCAName String \u5ba2\u6237\u7aef\u8bc1\u4e66\u7b7e\u53d1CA\u540d\u79f0 Config{v}.VipConf Object VIP\u5217\u8868\uff08\u6ce8\uff1a\u4f18\u5148\u4f9d\u636eVIP\u6765\u786e\u5b9aTLS\u914d\u7f6e\uff09 Config{v}.VipConf[] String VIP Config{v}.SniConf Object \u57df\u540d\u5217\u8868\uff0c\u53ef\u9009\uff08\u6ce8\uff1a\u65e0\u6cd5\u4f9d\u636eVIP\u786e\u5b9aTLS\u914d\u7f6e\u65f6\uff0c\u4f7f\u7528SNI\u786e\u5b9aTLS\u914d\u7f6e\uff09 Config{v}.SniConf[] String \u57df\u540d DefaultNextProtos Object \u652f\u6301\u7684TLS\u5e94\u7528\u5c42\u534f\u8bae\u5217\u8868 DefaultNextProtos[] String TLS\u5e94\u7528\u5c42\u534f\u8bae, \u5408\u6cd5\u503c\u5305\u62ech2, spdy/3.1, http/1.1","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"configuration/tls_conf/tls_rule_conf.data/#_3","text":"{ \"Version\" : \"20190101000000\" , \"DefaultNextProtos\" : [ \"h2\" , \"http/1.1\" ], \"Config\" : { \"example_product\" : { \"VipConf\" : [ \"10.199.4.14\" ], \"SniConf\" : null , \"CertName\" : \"example.org\" , \"NextProtos\" : [ \"h2\" , \"http/1.1\" ], \"Grade\" : \"B\" , \"ClientCAName\" : \"\" } } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"configuration/tls_conf/tls_rule_conf.data/#_4","text":"BFE\u652f\u6301\u591a\u79cd\u5b89\u5168\u7b49\u7ea7\uff08A+/A/B/C\uff09\u3002\u5404\u5b89\u5168\u7b49\u7ea7\u5dee\u5f02\u5728\u4e8e\u652f\u6301\u7684\u534f\u8bae\u7248\u672c\u53ca\u52a0\u5bc6\u5957\u4ef6\u3002A+\u7b49\u7ea7\u5b89\u5168\u6027\u6700\u9ad8\u3001\u8fde\u901a\u6027\u6700\u4f4e\uff1bC\u7b49\u7ea7\u5b89\u5168\u6027\u6700\u4f4e\u3001\u8fde\u901a\u6027\u6700\u9ad8\u3002","title":"\u5b89\u5168\u7b49\u7ea7\u8bf4\u660e"},{"location":"configuration/tls_conf/tls_rule_conf.data/#a","text":"\u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA","title":"\u5b89\u5168\u7b49\u7ea7A+"},{"location":"configuration/tls_conf/tls_rule_conf.data/#a_1","text":"\u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS1.1 TLS1.0 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA","title":"\u5b89\u5168\u7b49\u7ea7A"},{"location":"configuration/tls_conf/tls_rule_conf.data/#b","text":"\u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS1.1 TLS1.0 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA SSLv3 TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_RC4_128_SHA","title":"\u5b89\u5168\u7b49\u7ea7B"},{"location":"configuration/tls_conf/tls_rule_conf.data/#c","text":"\u652f\u6301\u534f\u8bae \u652f\u6301\u52a0\u5bc6\u5957\u4ef6 TLS1.2 TLS1.1 TLS1.0 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_OLD_SHA256 TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA TLS_RSA_WITH_AES_128_CBC_SHA TLS_RSA_WITH_AES_256_CBC_SHA TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_RC4_128_SHA SSLv3 TLS_ECDHE_RSA_WITH_RC4_128_SHA TLS_RSA_WITH_RC4_128_SHA","title":"\u5b89\u5168\u7b49\u7ea7C"},{"location":"development/local_dev_guide/","text":"\u672c\u5730\u5f00\u53d1\u6307\u5357 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u5728\u672c\u5730\u8fdb\u884c\u4ee3\u7801\u5f00\u53d1 \u4ee3\u7801\u8981\u6c42 \u4ee3\u7801\u6ce8\u91ca\u8bf7\u9075\u5b88 golang \u4ee3\u7801\u89c4\u8303 \u6240\u6709\u4ee3\u7801\u5fc5\u987b\u5177\u6709\u5355\u5143\u6d4b\u8bd5 \u901a\u8fc7\u6240\u6709\u5355\u5143\u6d4b\u8bd5 \u8bf7\u9075\u5faa \u63d0\u4ea4\u4ee3\u7801\u7684\u4e00\u4e9b\u7ea6\u5b9a \u4ee5\u4e0b\u6559\u7a0b\u5c06\u6307\u5bfc\u60a8\u63d0\u4ea4\u4ee3\u7801\u3002 Fork \u8df3\u8f6c\u5230 BFE GitHub\u9996\u9875\uff0c\u7136\u540e\u5355\u51fb Fork \u6309\u94ae\uff0c\u751f\u6210\u81ea\u5df1\u76ee\u5f55\u4e0b\u7684\u4ed3\u5e93\uff0c\u6bd4\u5982 https://github.com/USERNAME/bfe \u514b\u9686\uff08Clone\uff09 \u5c06\u8fdc\u7a0b\u4ed3\u5e93 clone \u5230\u672c\u5730\uff1a $ git clone https://github.com/USERNAME/bfe $ cd bfe \u521b\u5efa\u672c\u5730\u5206\u652f BFE\u76ee\u524d\u4f7f\u7528 Git\u6d41\u5206\u652f\u6a21\u578b \u8fdb\u884c\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u53d1\u884c\u548c\u7ef4\u62a4\uff0c\u5177\u4f53\u8bf7\u53c2\u8003 BFE\u5206\u652f\u89c4\u8303 \u3002 \u6240\u6709\u7684 feature \u548c bug fix \u7684\u5f00\u53d1\u5de5\u4f5c\u90fd\u5e94\u8be5\u5728\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u4e0a\u5b8c\u6210\uff0c\u4e00\u822c\u4ece develop \u5206\u652f\u4e0a\u521b\u5efa\u65b0\u5206\u652f\u3002 \u4f7f\u7528 git checkout -b \u521b\u5efa\u5e76\u5207\u6362\u5230\u65b0\u5206\u652f\u3002 $ git checkout -b my-cool-stuff \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728 checkout \u4e4b\u524d\uff0c\u9700\u8981\u4fdd\u6301\u5f53\u524d\u5206\u652f\u76ee\u5f55 clean\uff0c\u5426\u5219\u4f1a\u628a untracked \u7684\u6587\u4ef6\u4e5f\u5e26\u5230\u65b0\u5206\u652f\u4e0a\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7 git status \u67e5\u770b\u3002 \u4f7f\u7528 pre-commit \u94a9\u5b50 BFE \u5f00\u53d1\u4eba\u5458\u4f7f\u7528 pre-commit \u5de5\u5177\u6765\u7ba1\u7406 Git \u9884\u63d0\u4ea4\u94a9\u5b50\u3002 \u5b83\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u683c\u5f0f\u5316\u6e90\u4ee3\u7801\uff0c\u5728\u63d0\u4ea4\uff08commit\uff09\u524d\u81ea\u52a8\u68c0\u67e5\u4e00\u4e9b\u57fa\u672c\u4e8b\u5b9c\uff08\u5982\u6bcf\u4e2a\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a EOL\uff0cGit \u4e2d\u4e0d\u8981\u6dfb\u52a0\u5927\u6587\u4ef6\u7b49\uff09\u3002 pre-commit \u6d4b\u8bd5\u662f Travis-CI \u4e2d\u5355\u5143\u6d4b\u8bd5\u7684\u4e00\u90e8\u5206\uff0c\u4e0d\u6ee1\u8db3\u94a9\u5b50\u7684 PR \u4e0d\u80fd\u88ab\u63d0\u4ea4\u5230 BFE\uff0c\u9996\u5148\u5b89\u88c5\u5e76\u5728\u5f53\u524d\u76ee\u5f55\u8fd0\u884c\u5b83\uff1a $ pip install pre-commit $ pre-commit install BFE \u4f7f\u7528 gofmt \u6765\u8c03\u6574 golang\u6e90\u4ee3\u7801\u683c\u5f0f\u3002 \u5f00\u59cb\u5f00\u53d1 \u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u5220\u9664\u4e86 README.md \u4e2d\u7684\u4e00\u884c\uff0c\u5e76\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u6587\u4ef6\u3002 \u901a\u8fc7 git status \u67e5\u770b\u5f53\u524d\u72b6\u6001\uff0c\u8fd9\u4f1a\u63d0\u793a\u5f53\u524d\u76ee\u5f55\u7684\u4e00\u4e9b\u53d8\u5316\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7 git diff \u67e5\u770b\u6587\u4ef6\u5177\u4f53\u88ab\u4fee\u6539\u7684\u5185\u5bb9\u3002 $ git status On branch test Changes not staged for commit: ( use \"git add <file>...\" to update what will be committed ) ( use \"git checkout -- <file>...\" to discard changes in working directory ) modified: README.md Untracked files: ( use \"git add <file>...\" to include in what will be committed ) test no changes added to commit ( use \"git add\" and/or \"git commit -a\" ) \u6784\u5efa\u548c\u6d4b\u8bd5 \u4ece\u6e90\u7801\u7f16\u8bd1BFE\u53ca\u6d4b\u8bd5\uff0c\u8bf7\u53c2\u89c1 \u7f16\u8bd1\u53ca\u5b89\u88c5BFE \u63d0\u4ea4\uff08commit\uff09 \u63a5\u4e0b\u6765\u6211\u4eec\u53d6\u6d88\u5bf9 README.md \u6587\u4ef6\u7684\u6539\u53d8\uff0c\u7136\u540e\u63d0\u4ea4\u65b0\u6dfb\u52a0\u7684 test \u6587\u4ef6\u3002 $ git checkout -- README.md $ git status On branch test Untracked files: ( use \"git add <file>...\" to include in what will be committed ) test nothing added to commit but untracked files present ( use \"git add\" to track ) $ git add test Git \u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\uff0c\u90fd\u9700\u8981\u5199\u63d0\u4ea4\u8bf4\u660e\uff0c\u8fd9\u53ef\u4ee5\u8ba9\u5176\u4ed6\u4eba\u77e5\u9053\u8fd9\u6b21\u63d0\u4ea4\u505a\u4e86\u54ea\u4e9b\u6539\u53d8\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7 git commit \u5b8c\u6210\u3002 $ git commit CRLF end-lines remover............................... ( no files to check ) Skipped yapf................................................. ( no files to check ) Skipped Check for added large files..............................................Passed Check for merge conflicts................................................Passed Check for broken symlinks................................................Passed Detect Private Key................................... ( no files to check ) Skipped Fix End of Files..................................... ( no files to check ) Skipped clang-formater....................................... ( no files to check ) Skipped [ my-cool-stuff c703c041 ] add test file 1 file changed, 0 insertions ( + ) , 0 deletions ( - ) create mode 100644 233 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u60a8\u9700\u8981\u5728commit\u4e2d\u6dfb\u52a0\u8bf4\u660e\uff08commit message\uff09\u4ee5\u89e6\u53d1CI\u5355\u6d4b\uff0c\u5199\u6cd5\u5982\u4e0b\uff1a # \u89e6\u53d1develop\u5206\u652f\u7684CI\u5355\u6d4b $ git commit -m \"test=develop\" # \u89e6\u53d1release/1.1\u5206\u652f\u7684CI\u5355\u4fa7 $ git commit -m \"test=release/1.1\" \u4fdd\u6301\u672c\u5730\u4ed3\u5e93\u6700\u65b0 \u5728\u51c6\u5907\u53d1\u8d77 Pull Request \u4e4b\u524d\uff0c\u9700\u8981\u540c\u6b65\u539f\u4ed3\u5e93\uff08 https://github.com/baidu/bfe \uff09\u6700\u65b0\u7684\u4ee3\u7801\u3002 \u9996\u5148\u901a\u8fc7 git remote \u67e5\u770b\u5f53\u524d\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u5b57 $ git remote origin $ git remote -v origin https://github.com/USERNAME/bfe ( fetch ) origin https://github.com/USERNAME/bfe ( push ) \u8fd9\u91cc origin \u662f\u6211\u4eec clone \u7684\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u5b57\uff0c\u4e5f\u5c31\u662f\u81ea\u5df1\u7528\u6237\u540d\u4e0b\u7684 BFE\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u539f\u59cb BFE \u4ed3\u5e93\u7684\u8fdc\u7a0b\u4e3b\u673a\uff0c\u547d\u540d\u4e3a upstream\u3002 $ git remote add upstream https://github.com/baidu/bfe $ git remote origin upstream \u83b7\u53d6 upstream \u7684\u6700\u65b0\u4ee3\u7801\u5e76\u66f4\u65b0\u5f53\u524d\u5206\u652f\u3002 $ git fetch upstream $ git pull upstream develop Push \u5230\u8fdc\u7a0b\u4ed3\u5e93 \u5c06\u672c\u5730\u7684\u4fee\u6539\u63a8\u9001\u5230 GitHub \u4e0a\uff0c\u4e5f\u5c31\u662f https://github.com/USERNAME/bfe # \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93 origin \u7684 my-cool-stuff \u5206\u652f\u4e0a $ git push origin my-cool-stuff","title":"\u672c\u5730\u5f00\u53d1\u6307\u5357"},{"location":"development/local_dev_guide/#_1","text":"\u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u5728\u672c\u5730\u8fdb\u884c\u4ee3\u7801\u5f00\u53d1","title":"\u672c\u5730\u5f00\u53d1\u6307\u5357"},{"location":"development/local_dev_guide/#_2","text":"\u4ee3\u7801\u6ce8\u91ca\u8bf7\u9075\u5b88 golang \u4ee3\u7801\u89c4\u8303 \u6240\u6709\u4ee3\u7801\u5fc5\u987b\u5177\u6709\u5355\u5143\u6d4b\u8bd5 \u901a\u8fc7\u6240\u6709\u5355\u5143\u6d4b\u8bd5 \u8bf7\u9075\u5faa \u63d0\u4ea4\u4ee3\u7801\u7684\u4e00\u4e9b\u7ea6\u5b9a \u4ee5\u4e0b\u6559\u7a0b\u5c06\u6307\u5bfc\u60a8\u63d0\u4ea4\u4ee3\u7801\u3002","title":"\u4ee3\u7801\u8981\u6c42"},{"location":"development/local_dev_guide/#fork","text":"\u8df3\u8f6c\u5230 BFE GitHub\u9996\u9875\uff0c\u7136\u540e\u5355\u51fb Fork \u6309\u94ae\uff0c\u751f\u6210\u81ea\u5df1\u76ee\u5f55\u4e0b\u7684\u4ed3\u5e93\uff0c\u6bd4\u5982 https://github.com/USERNAME/bfe","title":"Fork"},{"location":"development/local_dev_guide/#clone","text":"\u5c06\u8fdc\u7a0b\u4ed3\u5e93 clone \u5230\u672c\u5730\uff1a $ git clone https://github.com/USERNAME/bfe $ cd bfe","title":"\u514b\u9686\uff08Clone\uff09"},{"location":"development/local_dev_guide/#_3","text":"BFE\u76ee\u524d\u4f7f\u7528 Git\u6d41\u5206\u652f\u6a21\u578b \u8fdb\u884c\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u53d1\u884c\u548c\u7ef4\u62a4\uff0c\u5177\u4f53\u8bf7\u53c2\u8003 BFE\u5206\u652f\u89c4\u8303 \u3002 \u6240\u6709\u7684 feature \u548c bug fix \u7684\u5f00\u53d1\u5de5\u4f5c\u90fd\u5e94\u8be5\u5728\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u4e0a\u5b8c\u6210\uff0c\u4e00\u822c\u4ece develop \u5206\u652f\u4e0a\u521b\u5efa\u65b0\u5206\u652f\u3002 \u4f7f\u7528 git checkout -b \u521b\u5efa\u5e76\u5207\u6362\u5230\u65b0\u5206\u652f\u3002 $ git checkout -b my-cool-stuff \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728 checkout \u4e4b\u524d\uff0c\u9700\u8981\u4fdd\u6301\u5f53\u524d\u5206\u652f\u76ee\u5f55 clean\uff0c\u5426\u5219\u4f1a\u628a untracked \u7684\u6587\u4ef6\u4e5f\u5e26\u5230\u65b0\u5206\u652f\u4e0a\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7 git status \u67e5\u770b\u3002","title":"\u521b\u5efa\u672c\u5730\u5206\u652f"},{"location":"development/local_dev_guide/#pre-commit","text":"BFE \u5f00\u53d1\u4eba\u5458\u4f7f\u7528 pre-commit \u5de5\u5177\u6765\u7ba1\u7406 Git \u9884\u63d0\u4ea4\u94a9\u5b50\u3002 \u5b83\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u683c\u5f0f\u5316\u6e90\u4ee3\u7801\uff0c\u5728\u63d0\u4ea4\uff08commit\uff09\u524d\u81ea\u52a8\u68c0\u67e5\u4e00\u4e9b\u57fa\u672c\u4e8b\u5b9c\uff08\u5982\u6bcf\u4e2a\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a EOL\uff0cGit \u4e2d\u4e0d\u8981\u6dfb\u52a0\u5927\u6587\u4ef6\u7b49\uff09\u3002 pre-commit \u6d4b\u8bd5\u662f Travis-CI \u4e2d\u5355\u5143\u6d4b\u8bd5\u7684\u4e00\u90e8\u5206\uff0c\u4e0d\u6ee1\u8db3\u94a9\u5b50\u7684 PR \u4e0d\u80fd\u88ab\u63d0\u4ea4\u5230 BFE\uff0c\u9996\u5148\u5b89\u88c5\u5e76\u5728\u5f53\u524d\u76ee\u5f55\u8fd0\u884c\u5b83\uff1a $ pip install pre-commit $ pre-commit install BFE \u4f7f\u7528 gofmt \u6765\u8c03\u6574 golang\u6e90\u4ee3\u7801\u683c\u5f0f\u3002","title":"\u4f7f\u7528 pre-commit \u94a9\u5b50"},{"location":"development/local_dev_guide/#_4","text":"\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u5220\u9664\u4e86 README.md \u4e2d\u7684\u4e00\u884c\uff0c\u5e76\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u6587\u4ef6\u3002 \u901a\u8fc7 git status \u67e5\u770b\u5f53\u524d\u72b6\u6001\uff0c\u8fd9\u4f1a\u63d0\u793a\u5f53\u524d\u76ee\u5f55\u7684\u4e00\u4e9b\u53d8\u5316\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7 git diff \u67e5\u770b\u6587\u4ef6\u5177\u4f53\u88ab\u4fee\u6539\u7684\u5185\u5bb9\u3002 $ git status On branch test Changes not staged for commit: ( use \"git add <file>...\" to update what will be committed ) ( use \"git checkout -- <file>...\" to discard changes in working directory ) modified: README.md Untracked files: ( use \"git add <file>...\" to include in what will be committed ) test no changes added to commit ( use \"git add\" and/or \"git commit -a\" )","title":"\u5f00\u59cb\u5f00\u53d1"},{"location":"development/local_dev_guide/#_5","text":"\u4ece\u6e90\u7801\u7f16\u8bd1BFE\u53ca\u6d4b\u8bd5\uff0c\u8bf7\u53c2\u89c1 \u7f16\u8bd1\u53ca\u5b89\u88c5BFE","title":"\u6784\u5efa\u548c\u6d4b\u8bd5"},{"location":"development/local_dev_guide/#commit","text":"\u63a5\u4e0b\u6765\u6211\u4eec\u53d6\u6d88\u5bf9 README.md \u6587\u4ef6\u7684\u6539\u53d8\uff0c\u7136\u540e\u63d0\u4ea4\u65b0\u6dfb\u52a0\u7684 test \u6587\u4ef6\u3002 $ git checkout -- README.md $ git status On branch test Untracked files: ( use \"git add <file>...\" to include in what will be committed ) test nothing added to commit but untracked files present ( use \"git add\" to track ) $ git add test Git \u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\uff0c\u90fd\u9700\u8981\u5199\u63d0\u4ea4\u8bf4\u660e\uff0c\u8fd9\u53ef\u4ee5\u8ba9\u5176\u4ed6\u4eba\u77e5\u9053\u8fd9\u6b21\u63d0\u4ea4\u505a\u4e86\u54ea\u4e9b\u6539\u53d8\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7 git commit \u5b8c\u6210\u3002 $ git commit CRLF end-lines remover............................... ( no files to check ) Skipped yapf................................................. ( no files to check ) Skipped Check for added large files..............................................Passed Check for merge conflicts................................................Passed Check for broken symlinks................................................Passed Detect Private Key................................... ( no files to check ) Skipped Fix End of Files..................................... ( no files to check ) Skipped clang-formater....................................... ( no files to check ) Skipped [ my-cool-stuff c703c041 ] add test file 1 file changed, 0 insertions ( + ) , 0 deletions ( - ) create mode 100644 233 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u60a8\u9700\u8981\u5728commit\u4e2d\u6dfb\u52a0\u8bf4\u660e\uff08commit message\uff09\u4ee5\u89e6\u53d1CI\u5355\u6d4b\uff0c\u5199\u6cd5\u5982\u4e0b\uff1a # \u89e6\u53d1develop\u5206\u652f\u7684CI\u5355\u6d4b $ git commit -m \"test=develop\" # \u89e6\u53d1release/1.1\u5206\u652f\u7684CI\u5355\u4fa7 $ git commit -m \"test=release/1.1\"","title":"\u63d0\u4ea4\uff08commit\uff09"},{"location":"development/local_dev_guide/#_6","text":"\u5728\u51c6\u5907\u53d1\u8d77 Pull Request \u4e4b\u524d\uff0c\u9700\u8981\u540c\u6b65\u539f\u4ed3\u5e93\uff08 https://github.com/baidu/bfe \uff09\u6700\u65b0\u7684\u4ee3\u7801\u3002 \u9996\u5148\u901a\u8fc7 git remote \u67e5\u770b\u5f53\u524d\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u5b57 $ git remote origin $ git remote -v origin https://github.com/USERNAME/bfe ( fetch ) origin https://github.com/USERNAME/bfe ( push ) \u8fd9\u91cc origin \u662f\u6211\u4eec clone \u7684\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u5b57\uff0c\u4e5f\u5c31\u662f\u81ea\u5df1\u7528\u6237\u540d\u4e0b\u7684 BFE\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u539f\u59cb BFE \u4ed3\u5e93\u7684\u8fdc\u7a0b\u4e3b\u673a\uff0c\u547d\u540d\u4e3a upstream\u3002 $ git remote add upstream https://github.com/baidu/bfe $ git remote origin upstream \u83b7\u53d6 upstream \u7684\u6700\u65b0\u4ee3\u7801\u5e76\u66f4\u65b0\u5f53\u524d\u5206\u652f\u3002 $ git fetch upstream $ git pull upstream develop","title":"\u4fdd\u6301\u672c\u5730\u4ed3\u5e93\u6700\u65b0"},{"location":"development/local_dev_guide/#push","text":"\u5c06\u672c\u5730\u7684\u4fee\u6539\u63a8\u9001\u5230 GitHub \u4e0a\uff0c\u4e5f\u5c31\u662f https://github.com/USERNAME/bfe # \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93 origin \u7684 my-cool-stuff \u5206\u652f\u4e0a $ git push origin my-cool-stuff","title":"Push \u5230\u8fdc\u7a0b\u4ed3\u5e93"},{"location":"development/release_regulation/","text":"BFE\u53d1\u884c\u89c4\u8303 BFE\u4f7f\u7528git-flow branching model\u505a\u5206\u652f\u7ba1\u7406\uff0c\u4f7f\u7528 Semantic Versioning \u6807\u51c6\u8868\u793aBFE\u7248\u672c\u53f7\u3002 \u5206\u652f\u89c4\u8303\u8bf4\u660e BFE\u5f00\u53d1\u8fc7\u7a0b\u4f7f\u7528 git-flow \u5206\u652f\u89c4\u8303\uff0c\u5e76\u9002\u5e94github\u7684\u7279\u6027\u505a\u4e86\u4e00\u4e9b\u533a\u522b\u3002 BFE\u7684\u4e3b\u7248\u672c\u5e93\u9075\u5faa git-flow \u5206\u652f\u89c4\u8303\u3002\u5176\u4e2d: master \u5206\u652f\u4e3a\u7a33\u5b9a(stable branch)\u7248\u672c\u5206\u652f\u3002\u6bcf\u4e00\u4e2a master \u5206\u652f\u7684\u7248\u672c\u90fd\u662f\u7ecf\u8fc7\u5355\u5143\u6d4b\u8bd5\u548c\u56de\u5f52\u6d4b\u8bd5\u7684\u7248\u672c\u3002 develop \u5206\u652f\u4e3a\u5f00\u53d1(develop branch)\u7248\u672c\u5206\u652f\u3002\u6bcf\u4e00\u4e2a develop \u5206\u652f\u7684\u7248\u672c\u90fd\u7ecf\u8fc7\u5355\u5143\u6d4b\u8bd5\uff0c\u4f46\u5e76\u6ca1\u6709\u7ecf\u8fc7\u56de\u5f52\u6d4b\u8bd5\u3002 release/vX.Y.Z \u5206\u652f\u4e3a\u6bcf\u4e00\u6b21Release\u65f6\u5efa\u7acb\u7684\u4e34\u65f6\u5206\u652f\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\u7684\u4ee3\u7801\u6b63\u5728\u7ecf\u5386\u56de\u5f52\u6d4b\u8bd5\u3002 \u5f00\u53d1\u8005\u7684fork\u7248\u672c\u5e93\u5e76\u4e0d\u9700\u8981\u4e25\u683c\u9075\u5b88 git-flow \u5206\u652f\u89c4\u8303\uff0c\u6240\u6709fork\u7684\u7248\u672c\u5e93\u7684\u6240\u6709\u5206\u652f\u90fd\u76f8\u5f53\u4e8e\u7279\u6027\u5206\u652f\u3002\u5177\u4f53\u5efa\u8bae\u5982\u4e0b\uff1a \u5f00\u53d1\u8005fork\u7684\u7248\u672c\u5e93\u4f7f\u7528 develop \u5206\u652f\u540c\u6b65\u4e3b\u7248\u672c\u5e93\u7684 develop \u5206\u652f\u3002 \u5f00\u53d1\u8005fork\u7684\u7248\u672c\u5e93\u4e2d\uff0c\u518d\u57fa\u4e8e develop \u7248\u672cfork\u51fa\u81ea\u5df1\u7684\u529f\u80fd\u5206\u652f\u3002 \u5f53\u529f\u80fd\u5206\u652f\u5f00\u53d1\u5b8c\u6bd5\u540e\uff0c\u5411BFE\u7684\u4e3b\u7248\u672c\u5e93\u63d0\u4ea4 Pull Reuqest \uff0c\u8fdb\u800c\u8fdb\u884c\u4ee3\u7801\u8bc4\u5ba1\u3002 \u5728\u8bc4\u5ba1\u8fc7\u7a0b\u4e2d\uff0c\u5f00\u53d1\u8005\u4fee\u6539\u81ea\u5df1\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5728\u81ea\u5df1\u7684\u529f\u80fd\u5206\u652f\u63d0\u4ea4\u4ee3\u7801\u3002 \u53e6\u5916\uff0c bugfix \u5206\u652f\u4e5f\u662f\u5728\u5f00\u53d1\u8005\u81ea\u5df1\u7684fork\u7248\u672c\u5e93\u7ef4\u62a4\uff0c\u4e0e\u529f\u80fd\u5206\u652f\u4e0d\u540c\u7684\u662f\uff0c bugfix \u5206\u652f\u9700\u8981\u5206\u522b\u7ed9\u4e3b\u7248\u672c\u5e93\u7684 master \u3001 develop \u4e0e\u53ef\u80fd\u6709\u7684 release/vX.Y.Z \u5206\u652f\uff0c\u540c\u65f6\u63d0\u8d77 Pull Request \u3002 \u7248\u672c\u53d1\u5e03\u6d41\u7a0b BFE\u6bcf\u6b21\u53d1\u65b0\u7684\u7248\u672c\uff0c\u9075\u5faa\u4ee5\u4e0b\u6d41\u7a0b: \u4ece develop \u5206\u652f\u6d3e\u751f\u51fa\u65b0\u7684\u5206\u652f\uff0c\u5206\u652f\u540d\u4e3a release/vX.Y.Z \u3002\u4f8b\u5982\uff0c release/v0.10.0 \u5c06\u65b0\u5206\u652f\u7684\u7248\u672c\u6253\u4e0atag\uff0ctag\u4e3a vX.Y.Z-rc.N \uff08N\u4ee3\u8868Patch\u53f7\uff09\u3002\u7b2c\u4e00\u4e2atag\u4e3a v0.10.0-rc.1 \uff0c\u7b2c\u4e8c\u4e2a\u4e3a v0.10.0-rc.2 \uff0c\u4f9d\u6b21\u7c7b\u63a8\u3002 \u5bf9\u8fd9\u4e2a\u7248\u672c\u7684\u63d0\u4ea4\uff0c\u505a\u5982\u4e0b\u51e0\u4e2a\u64cd\u4f5c: \u4fee\u6539 VERSION \u6587\u4ef6\u4e2d\u7684\u7248\u672c\u4fe1\u606f\u3002 \u6d4b\u8bd5\u7248\u672c\u7684\u529f\u80fd\u6b63\u786e\u6027\u3002\u5982\u679c\u5931\u8d25\uff0c\u5728\u8fd9\u4e2a release/vX.Y.Z \u5206\u652f\u4e2d\u4fee\u590d\u6240\u6709bug\uff0c\u8fd4\u56de\u7b2c\u4e8c\u6b65\u5e76\u5c06Patch\u53f7\u52a0\u4e00\u3002 \u5b8c\u6210 Release Note \u7684\u4e66\u5199\u3002 \u7b2c\u4e09\u6b65\u5b8c\u6210\u540e\uff0c\u5c06 release/vX.Y.Z \u5206\u652f\u5408\u5165master\u5206\u652f\uff0c\u5e76\u5220\u9664 release/vX.Y.Z \u5206\u652f\u3002\u540c\u65f6\u518d\u5c06 master \u5206\u652f\u5408\u5165 develop \u5206\u652f\u3002 \u5c06master\u5206\u652f\u7684\u5408\u5165commit\u6253\u4e0atag\uff0ctag\u4e3a vX.Y.Z \u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f: release/vX.Y.Z \u5206\u652f\u4e00\u65e6\u5efa\u7acb\uff0c\u4e00\u822c\u4e0d\u5141\u8bb8\u518d\u4ece develop \u5206\u652f\u5408\u5165 release/vX.Y.Z \u3002\u8fd9\u6837\u4fdd\u8bc1 release/vX.Y.Z \u5206\u652f\u529f\u80fd\u7684\u5c01\u95ed\uff0c\u65b9\u4fbf\u6d4b\u8bd5\u4eba\u5458\u6d4b\u8bd5BFE\u7684\u884c\u4e3a\u3002 \u5728 release/vX.Y.Z \u5206\u652f\u5b58\u5728\u7684\u65f6\u5019\uff0c\u5982\u679c\u6709bugfix\u7684\u884c\u4e3a\uff0c\u9700\u8981\u5c06bugfix\u7684\u5206\u652f\u540c\u65f6merge\u5230 master , develop \u548c release/vX.Y.Z \u8fd9\u4e09\u4e2a\u5206\u652f\u3002","title":"\u7248\u672c\u53d1\u5e03\u8bf4\u660e"},{"location":"development/release_regulation/#bfe","text":"BFE\u4f7f\u7528git-flow branching model\u505a\u5206\u652f\u7ba1\u7406\uff0c\u4f7f\u7528 Semantic Versioning \u6807\u51c6\u8868\u793aBFE\u7248\u672c\u53f7\u3002","title":"BFE\u53d1\u884c\u89c4\u8303"},{"location":"development/release_regulation/#_1","text":"BFE\u5f00\u53d1\u8fc7\u7a0b\u4f7f\u7528 git-flow \u5206\u652f\u89c4\u8303\uff0c\u5e76\u9002\u5e94github\u7684\u7279\u6027\u505a\u4e86\u4e00\u4e9b\u533a\u522b\u3002 BFE\u7684\u4e3b\u7248\u672c\u5e93\u9075\u5faa git-flow \u5206\u652f\u89c4\u8303\u3002\u5176\u4e2d: master \u5206\u652f\u4e3a\u7a33\u5b9a(stable branch)\u7248\u672c\u5206\u652f\u3002\u6bcf\u4e00\u4e2a master \u5206\u652f\u7684\u7248\u672c\u90fd\u662f\u7ecf\u8fc7\u5355\u5143\u6d4b\u8bd5\u548c\u56de\u5f52\u6d4b\u8bd5\u7684\u7248\u672c\u3002 develop \u5206\u652f\u4e3a\u5f00\u53d1(develop branch)\u7248\u672c\u5206\u652f\u3002\u6bcf\u4e00\u4e2a develop \u5206\u652f\u7684\u7248\u672c\u90fd\u7ecf\u8fc7\u5355\u5143\u6d4b\u8bd5\uff0c\u4f46\u5e76\u6ca1\u6709\u7ecf\u8fc7\u56de\u5f52\u6d4b\u8bd5\u3002 release/vX.Y.Z \u5206\u652f\u4e3a\u6bcf\u4e00\u6b21Release\u65f6\u5efa\u7acb\u7684\u4e34\u65f6\u5206\u652f\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\u7684\u4ee3\u7801\u6b63\u5728\u7ecf\u5386\u56de\u5f52\u6d4b\u8bd5\u3002 \u5f00\u53d1\u8005\u7684fork\u7248\u672c\u5e93\u5e76\u4e0d\u9700\u8981\u4e25\u683c\u9075\u5b88 git-flow \u5206\u652f\u89c4\u8303\uff0c\u6240\u6709fork\u7684\u7248\u672c\u5e93\u7684\u6240\u6709\u5206\u652f\u90fd\u76f8\u5f53\u4e8e\u7279\u6027\u5206\u652f\u3002\u5177\u4f53\u5efa\u8bae\u5982\u4e0b\uff1a \u5f00\u53d1\u8005fork\u7684\u7248\u672c\u5e93\u4f7f\u7528 develop \u5206\u652f\u540c\u6b65\u4e3b\u7248\u672c\u5e93\u7684 develop \u5206\u652f\u3002 \u5f00\u53d1\u8005fork\u7684\u7248\u672c\u5e93\u4e2d\uff0c\u518d\u57fa\u4e8e develop \u7248\u672cfork\u51fa\u81ea\u5df1\u7684\u529f\u80fd\u5206\u652f\u3002 \u5f53\u529f\u80fd\u5206\u652f\u5f00\u53d1\u5b8c\u6bd5\u540e\uff0c\u5411BFE\u7684\u4e3b\u7248\u672c\u5e93\u63d0\u4ea4 Pull Reuqest \uff0c\u8fdb\u800c\u8fdb\u884c\u4ee3\u7801\u8bc4\u5ba1\u3002 \u5728\u8bc4\u5ba1\u8fc7\u7a0b\u4e2d\uff0c\u5f00\u53d1\u8005\u4fee\u6539\u81ea\u5df1\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5728\u81ea\u5df1\u7684\u529f\u80fd\u5206\u652f\u63d0\u4ea4\u4ee3\u7801\u3002 \u53e6\u5916\uff0c bugfix \u5206\u652f\u4e5f\u662f\u5728\u5f00\u53d1\u8005\u81ea\u5df1\u7684fork\u7248\u672c\u5e93\u7ef4\u62a4\uff0c\u4e0e\u529f\u80fd\u5206\u652f\u4e0d\u540c\u7684\u662f\uff0c bugfix \u5206\u652f\u9700\u8981\u5206\u522b\u7ed9\u4e3b\u7248\u672c\u5e93\u7684 master \u3001 develop \u4e0e\u53ef\u80fd\u6709\u7684 release/vX.Y.Z \u5206\u652f\uff0c\u540c\u65f6\u63d0\u8d77 Pull Request \u3002","title":"\u5206\u652f\u89c4\u8303\u8bf4\u660e"},{"location":"development/release_regulation/#_2","text":"BFE\u6bcf\u6b21\u53d1\u65b0\u7684\u7248\u672c\uff0c\u9075\u5faa\u4ee5\u4e0b\u6d41\u7a0b: \u4ece develop \u5206\u652f\u6d3e\u751f\u51fa\u65b0\u7684\u5206\u652f\uff0c\u5206\u652f\u540d\u4e3a release/vX.Y.Z \u3002\u4f8b\u5982\uff0c release/v0.10.0 \u5c06\u65b0\u5206\u652f\u7684\u7248\u672c\u6253\u4e0atag\uff0ctag\u4e3a vX.Y.Z-rc.N \uff08N\u4ee3\u8868Patch\u53f7\uff09\u3002\u7b2c\u4e00\u4e2atag\u4e3a v0.10.0-rc.1 \uff0c\u7b2c\u4e8c\u4e2a\u4e3a v0.10.0-rc.2 \uff0c\u4f9d\u6b21\u7c7b\u63a8\u3002 \u5bf9\u8fd9\u4e2a\u7248\u672c\u7684\u63d0\u4ea4\uff0c\u505a\u5982\u4e0b\u51e0\u4e2a\u64cd\u4f5c: \u4fee\u6539 VERSION \u6587\u4ef6\u4e2d\u7684\u7248\u672c\u4fe1\u606f\u3002 \u6d4b\u8bd5\u7248\u672c\u7684\u529f\u80fd\u6b63\u786e\u6027\u3002\u5982\u679c\u5931\u8d25\uff0c\u5728\u8fd9\u4e2a release/vX.Y.Z \u5206\u652f\u4e2d\u4fee\u590d\u6240\u6709bug\uff0c\u8fd4\u56de\u7b2c\u4e8c\u6b65\u5e76\u5c06Patch\u53f7\u52a0\u4e00\u3002 \u5b8c\u6210 Release Note \u7684\u4e66\u5199\u3002 \u7b2c\u4e09\u6b65\u5b8c\u6210\u540e\uff0c\u5c06 release/vX.Y.Z \u5206\u652f\u5408\u5165master\u5206\u652f\uff0c\u5e76\u5220\u9664 release/vX.Y.Z \u5206\u652f\u3002\u540c\u65f6\u518d\u5c06 master \u5206\u652f\u5408\u5165 develop \u5206\u652f\u3002 \u5c06master\u5206\u652f\u7684\u5408\u5165commit\u6253\u4e0atag\uff0ctag\u4e3a vX.Y.Z \u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f: release/vX.Y.Z \u5206\u652f\u4e00\u65e6\u5efa\u7acb\uff0c\u4e00\u822c\u4e0d\u5141\u8bb8\u518d\u4ece develop \u5206\u652f\u5408\u5165 release/vX.Y.Z \u3002\u8fd9\u6837\u4fdd\u8bc1 release/vX.Y.Z \u5206\u652f\u529f\u80fd\u7684\u5c01\u95ed\uff0c\u65b9\u4fbf\u6d4b\u8bd5\u4eba\u5458\u6d4b\u8bd5BFE\u7684\u884c\u4e3a\u3002 \u5728 release/vX.Y.Z \u5206\u652f\u5b58\u5728\u7684\u65f6\u5019\uff0c\u5982\u679c\u6709bugfix\u7684\u884c\u4e3a\uff0c\u9700\u8981\u5c06bugfix\u7684\u5206\u652f\u540c\u65f6merge\u5230 master , develop \u548c release/vX.Y.Z \u8fd9\u4e09\u4e2a\u5206\u652f\u3002","title":"\u7248\u672c\u53d1\u5e03\u6d41\u7a0b"},{"location":"development/source_code_layout/","text":"BFE\u6e90\u4ee3\u7801\u7ed3\u6784 \u63a5\u5165\u534f\u8bae bfe_net : BFE\u7f51\u7edc\u76f8\u5173\u57fa\u7840\u5e93\u4ee3\u7801 bfe_http : BFE HTTP\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_tls : BFE TLS\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_http2 : BFE HTTP2\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_spdy : BFE SPDY\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_stream : BFE TLS\u4ee3\u7406\u57fa\u7840\u4ee3\u7801 bfe_websocket : BFE WebSocket\u4ee3\u7406\u57fa\u7840\u4ee3\u7801 bfe_proxy : BFE Proxy\u534f\u8bae\u57fa\u7840\u4ee3\u7801 \u5206\u6d41\u8f6c\u53d1 bfe_route : BFE\u5206\u6d41\u8f6c\u53d1\u76f8\u5173\u4ee3\u7801 bfe_balance : BFE\u8d1f\u8f7d\u5747\u8861\u76f8\u5173\u4ee3\u7801 \u6269\u5c55\u6a21\u5757 bfe_module : BFE\u6a21\u5757\u6846\u67b6\u76f8\u5173\u4ee3\u7801 bfe_modules : BFE\u6269\u5c55\u6a21\u5757\u76f8\u5173\u4ee3\u7801 \u670d\u52a1\u6846\u67b6 bfe_server : BFE\u670d\u52a1\u7aef\u4e3b\u4f53\u90e8\u5206 \u57fa\u7840\u5de5\u5177 bfe_basic : BFE\u57fa\u7840\u6570\u636e\u7c7b\u578b\u5b9a\u4e49 bfe_config : BFE\u914d\u7f6e\u52a0\u8f7d\u76f8\u5173\u4ee3\u7801 bfe_debug : BFE\u6a21\u5757\u8c03\u8bd5\u5f00\u5173\u76f8\u5173\u4ee3\u7801 bfe_util : BFE\u57fa\u7840\u5e93\u76f8\u5173\u4ee3\u7801","title":"\u4ee3\u7801\u7ed3\u6784\u8bf4\u660e"},{"location":"development/source_code_layout/#bfe","text":"","title":"BFE\u6e90\u4ee3\u7801\u7ed3\u6784"},{"location":"development/source_code_layout/#_1","text":"bfe_net : BFE\u7f51\u7edc\u76f8\u5173\u57fa\u7840\u5e93\u4ee3\u7801 bfe_http : BFE HTTP\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_tls : BFE TLS\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_http2 : BFE HTTP2\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_spdy : BFE SPDY\u534f\u8bae\u57fa\u7840\u4ee3\u7801 bfe_stream : BFE TLS\u4ee3\u7406\u57fa\u7840\u4ee3\u7801 bfe_websocket : BFE WebSocket\u4ee3\u7406\u57fa\u7840\u4ee3\u7801 bfe_proxy : BFE Proxy\u534f\u8bae\u57fa\u7840\u4ee3\u7801","title":"\u63a5\u5165\u534f\u8bae"},{"location":"development/source_code_layout/#_2","text":"bfe_route : BFE\u5206\u6d41\u8f6c\u53d1\u76f8\u5173\u4ee3\u7801 bfe_balance : BFE\u8d1f\u8f7d\u5747\u8861\u76f8\u5173\u4ee3\u7801","title":"\u5206\u6d41\u8f6c\u53d1"},{"location":"development/source_code_layout/#_3","text":"bfe_module : BFE\u6a21\u5757\u6846\u67b6\u76f8\u5173\u4ee3\u7801 bfe_modules : BFE\u6269\u5c55\u6a21\u5757\u76f8\u5173\u4ee3\u7801","title":"\u6269\u5c55\u6a21\u5757"},{"location":"development/source_code_layout/#_4","text":"bfe_server : BFE\u670d\u52a1\u7aef\u4e3b\u4f53\u90e8\u5206","title":"\u670d\u52a1\u6846\u67b6"},{"location":"development/source_code_layout/#_5","text":"bfe_basic : BFE\u57fa\u7840\u6570\u636e\u7c7b\u578b\u5b9a\u4e49 bfe_config : BFE\u914d\u7f6e\u52a0\u8f7d\u76f8\u5173\u4ee3\u7801 bfe_debug : BFE\u6a21\u5757\u8c03\u8bd5\u5f00\u5173\u76f8\u5173\u4ee3\u7801 bfe_util : BFE\u57fa\u7840\u5e93\u76f8\u5173\u4ee3\u7801","title":"\u57fa\u7840\u5de5\u5177"},{"location":"development/submit_pr_guide/","text":"\u63d0\u4ea4PR\u6ce8\u610f\u4e8b\u9879 \u5efa\u7acb Issue \u5e76\u5b8c\u6210 Pull Request \u5efa\u7acb\u4e00\u4e2a Issue \u63cf\u8ff0\u95ee\u9898\uff0c\u5e76\u8bb0\u5f55\u5b83\u7684\u7f16\u53f7\u3002 \u5207\u6362\u5230\u6240\u5efa\u5206\u652f\uff0c\u7136\u540e\u70b9\u51fb New pull request \u3002 \u9009\u62e9\u76ee\u6807\u5206\u652f,\u5728 PR \u7684\u63cf\u8ff0\u8bf4\u660e\u4e2d\uff0c\u586b\u5199 resolve #Issue\u7f16\u53f7 \u53ef\u4ee5\u5728\u8fd9\u4e2a PR \u88ab merge \u540e\uff0c\u81ea\u52a8\u5173\u95ed\u5bf9\u5e94\u7684 Issue\uff0c\u5177\u4f53\u8bf7\u89c1 \u8fd9\u91cc \u3002 \u63a5\u4e0b\u6765\u7b49\u5f85 review\uff0c\u5982\u679c\u6709\u9700\u8981\u4fee\u6539\u7684\u5730\u65b9\uff0c\u53c2\u7167\u4e0a\u8ff0\u6b65\u9aa4\u66f4\u65b0 origin \u4e2d\u7684\u5bf9\u5e94\u5206\u652f\u5373\u53ef\u3002 \u901a\u8fc7\u5355\u5143\u6d4b\u8bd5 \u60a8\u5728Pull Request\u4e2d\u6bcf\u63d0\u4ea4\u4e00\u6b21\u65b0\u7684commit\u540e\uff0c\u4f1a\u89e6\u53d1CI\u5355\u5143\u6d4b\u8bd5\uff0c\u8bf7\u786e\u8ba4\u60a8\u7684commit message\u4e2d\u5df2\u52a0\u5165\u5fc5\u8981\u7684\u8bf4\u660e\uff0c\u8bf7\u89c1 \u63d0\u4ea4\uff08commit\uff09 \u8bf7\u60a8\u5173\u6ce8\u60a8Pull Request\u4e2d\u7684CI\u5355\u5143\u6d4b\u8bd5\u8fdb\u7a0b\uff0c\u5b83\u5c06\u4f1a\u5728\u51e0\u4e2a\u5c0f\u65f6\u5185\u5b8c\u6210 \u60a8\u4ec5\u9700\u8981\u5173\u6ce8\u548c\u81ea\u5df1\u63d0\u4ea4\u7684\u5206\u652f\u76f8\u5173\u7684CI\u9879\u76ee\uff0c\u4f8b\u5982\u60a8\u5411develop\u5206\u652f\u63d0\u4ea4\u4ee3\u7801\uff0c\u5219\u65e0\u9700\u5173\u6ce8release/1.1\u4e00\u680f\u662f\u5426\u901a\u8fc7\u6d4b\u8bd5 \u5f53\u6240\u9700\u7684\u6d4b\u8bd5\u540e\u90fd\u51fa\u73b0\u4e86\u7eff\u8272\u7684\u5bf9\u52fe\uff0c\u8868\u793a\u60a8\u672c\u6b21commit\u901a\u8fc7\u4e86\u5404\u9879\u5355\u5143\u6d4b\u8bd5 \u5982\u679c\u6240\u9700\u7684\u6d4b\u8bd5\u540e\u51fa\u73b0\u4e86\u7ea2\u8272\u53c9\u53f7\uff0c\u4ee3\u8868\u60a8\u672c\u6b21\u7684commit\u672a\u901a\u8fc7\u67d0\u9879\u5355\u5143\u6d4b\u8bd5\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8bf7\u60a8\u70b9\u51fbdetail\u67e5\u770b\u62a5\u9519\u8be6\u60c5\uff0c\u5e76\u5c06\u62a5\u9519\u539f\u56e0\u622a\u56fe\uff0c\u4ee5\u8bc4\u8bba\u7684\u65b9\u5f0f\u6dfb\u52a0\u5728\u60a8\u7684Pull Request\u4e2d\uff0c\u6211\u4eec\u7684\u5de5\u4f5c\u4eba\u5458\u5c06\u5e2e\u60a8\u67e5\u770b \u5220\u9664\u8fdc\u7a0b\u5206\u652f \u5728 PR \u88ab merge \u8fdb\u4e3b\u4ed3\u5e93\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 PR \u7684\u9875\u9762\u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5206\u652f\u3002 \u4e5f\u53ef\u4ee5\u4f7f\u7528 git push origin :\u5206\u652f\u540d \u5220\u9664\u8fdc\u7a0b\u5206\u652f\uff0c\u5982\uff1a $ git push origin :my-cool-stuff \u5220\u9664\u672c\u5730\u5206\u652f \u6700\u540e\uff0c\u5220\u9664\u672c\u5730\u5206\u652f\u3002 $ git checkout develop # \u5207\u6362\u5230 develop \u5206\u652f $ git branch -D my-cool-stuff # \u5220\u9664 my-cool-stuff \u5206\u652f \u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u4e00\u6b21\u4ee3\u7801\u8d21\u732e\u7684\u8fc7\u7a0b\u3002 \u63d0\u4ea4\u4ee3\u7801\u7684\u4e00\u4e9b\u7ea6\u5b9a \u4e3a\u4e86\u4f7f\u8bc4\u5ba1\u4eba\u5728\u8bc4\u5ba1\u4ee3\u7801\u65f6\u66f4\u597d\u5730\u4e13\u6ce8\u4e8e\u4ee3\u7801\u672c\u8eab\uff0c\u8bf7\u60a8\u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\u65f6\uff0c\u9075\u5b88\u4ee5\u4e0b\u7ea6\u5b9a\uff1a 1\uff09\u8bf7\u4fdd\u8bc1Travis-CI \u4e2d\u5355\u5143\u6d4b\u8bd5\u80fd\u987a\u5229\u901a\u8fc7\u3002\u5982\u679c\u6ca1\u8fc7\uff0c\u8bf4\u660e\u63d0\u4ea4\u7684\u4ee3\u7801\u5b58\u5728\u95ee\u9898\uff0c\u8bc4\u5ba1\u4eba\u4e00\u822c\u4e0d\u505a\u8bc4\u5ba1\u3002 2\uff09\u63d0\u4ea4Pull Request\u524d\uff1a \u8bf7\u6ce8\u610fcommit\u7684\u6570\u91cf \u539f\u56e0\uff1a\u5982\u679c\u4ec5\u4ec5\u4fee\u6539\u4e00\u4e2a\u6587\u4ef6\u4f46\u63d0\u4ea4\u4e86\u5341\u51e0\u4e2acommit\uff0c\u6bcf\u4e2acommit\u53ea\u505a\u4e86\u5c11\u91cf\u7684\u4fee\u6539\uff0c\u8fd9\u4f1a\u7ed9\u8bc4\u5ba1\u4eba\u5e26\u6765\u5f88\u5927\u56f0\u6270\u3002\u8bc4\u5ba1\u4eba\u9700\u8981\u9010\u4e00\u67e5\u770b\u6bcf\u4e2acommit\u624d\u80fd\u77e5\u9053\u505a\u4e86\u54ea\u4e9b\u4fee\u6539\uff0c\u4e14\u4e0d\u6392\u9664commit\u4e4b\u95f4\u7684\u4fee\u6539\u5b58\u5728\u76f8\u4e92\u8986\u76d6\u7684\u60c5\u51b5\u3002 \u5efa\u8bae\uff1a\u6bcf\u6b21\u63d0\u4ea4\u65f6\uff0c\u4fdd\u6301\u5c3d\u91cf\u5c11\u7684commit\uff0c\u53ef\u4ee5\u901a\u8fc7 git commit --amend \u8865\u5145\u4e0a\u6b21\u7684commit\u3002\u5bf9\u5df2\u7ecfPush\u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684\u591a\u4e2acommit\uff0c\u53ef\u4ee5\u53c2\u8003 squash commits after push \u3002 \u8bf7\u6ce8\u610f\u6bcf\u4e2acommit\u7684\u540d\u79f0\uff1a\u5e94\u80fd\u53cd\u6620\u5f53\u524dcommit\u7684\u5185\u5bb9\uff0c\u4e0d\u80fd\u592a\u968f\u610f\u3002 3\uff09\u5982\u679c\u89e3\u51b3\u4e86\u67d0\u4e2aIssue\u7684\u95ee\u9898\uff0c\u8bf7\u5728\u8be5Pull Request\u7684 \u7b2c\u4e00\u4e2a \u8bc4\u8bba\u6846\u4e2d\u52a0\u4e0a\uff1a fix #issue_number \uff0c\u8fd9\u6837\u5f53\u8be5PUll Request\u88ab\u5408\u5e76\u540e\uff0c\u4f1a\u81ea\u52a8\u5173\u95ed\u5bf9\u5e94\u7684Issue\u3002 - \u5173\u952e\u8bcd\u5305\u62ec\uff1aclose, closes, closed, fix, fixes, fixed, resolve, resolves, resolved\uff0c\u8bf7\u9009\u62e9\u5408\u9002\u7684\u8bcd\u6c47\u3002 - \u8be6\u7ec6\u53ef\u53c2\u8003 Closing issues via commit messages \u3002 \u6b64\u5916\uff0c\u5728\u56de\u590d\u8bc4\u5ba1\u4eba\u610f\u89c1\u65f6\uff0c\u8bf7\u60a8\u9075\u5b88\u4ee5\u4e0b\u7ea6\u5b9a\uff1a 1\uff09\u8bc4\u5ba1\u4eba\u7684\u6bcf\u4e2a\u610f\u89c1\u90fd\u5fc5\u987b\u56de\u590d\uff08\u8fd9\u662f\u5f00\u6e90\u793e\u533a\u7684\u57fa\u672c\u793c\u8c8c\uff0c\u522b\u4eba\u5e2e\u4e86\u5fd9\uff0c\u5e94\u8be5\u8bf4\u8c22\u8c22\uff09\uff1a \u5bf9\u8bc4\u5ba1\u610f\u89c1\u540c\u610f\u4e14\u6309\u5176\u4fee\u6539\u5b8c\u7684\uff0c\u7ed9\u4e2a\u7b80\u5355\u7684 Done \u5373\u53ef\uff1b \u5bf9\u8bc4\u5ba1\u610f\u89c1\u4e0d\u540c\u610f\u7684\uff0c\u8bf7\u7ed9\u51fa\u60a8\u81ea\u5df1\u7684\u53cd\u9a73\u7406\u7531\u3002 2\uff09\u5982\u679c\u8bc4\u5ba1\u610f\u89c1\u6bd4\u8f83\u591a\uff1a \u8bf7\u7ed9\u51fa\u603b\u4f53\u7684\u4fee\u6539\u60c5\u51b5\u3002 \u8bf7\u91c7\u7528 start a review \u8fdb\u884c\u56de\u590d\uff0c\u800c\u975e\u76f4\u63a5\u56de\u590d\u7684\u65b9\u5f0f\u3002\u539f\u56e0\u662f\u6bcf\u4e2a\u56de\u590d\u90fd\u4f1a\u53d1\u9001\u4e00\u5c01\u90ae\u4ef6\uff0c\u4f1a\u9020\u6210\u90ae\u4ef6\u707e\u96be\u3002","title":"\u63d0\u4ea4PR\u6ce8\u610f\u4e8b\u9879"},{"location":"development/submit_pr_guide/#pr","text":"","title":"\u63d0\u4ea4PR\u6ce8\u610f\u4e8b\u9879"},{"location":"development/submit_pr_guide/#issue-pull-request","text":"\u5efa\u7acb\u4e00\u4e2a Issue \u63cf\u8ff0\u95ee\u9898\uff0c\u5e76\u8bb0\u5f55\u5b83\u7684\u7f16\u53f7\u3002 \u5207\u6362\u5230\u6240\u5efa\u5206\u652f\uff0c\u7136\u540e\u70b9\u51fb New pull request \u3002 \u9009\u62e9\u76ee\u6807\u5206\u652f,\u5728 PR \u7684\u63cf\u8ff0\u8bf4\u660e\u4e2d\uff0c\u586b\u5199 resolve #Issue\u7f16\u53f7 \u53ef\u4ee5\u5728\u8fd9\u4e2a PR \u88ab merge \u540e\uff0c\u81ea\u52a8\u5173\u95ed\u5bf9\u5e94\u7684 Issue\uff0c\u5177\u4f53\u8bf7\u89c1 \u8fd9\u91cc \u3002 \u63a5\u4e0b\u6765\u7b49\u5f85 review\uff0c\u5982\u679c\u6709\u9700\u8981\u4fee\u6539\u7684\u5730\u65b9\uff0c\u53c2\u7167\u4e0a\u8ff0\u6b65\u9aa4\u66f4\u65b0 origin \u4e2d\u7684\u5bf9\u5e94\u5206\u652f\u5373\u53ef\u3002","title":"\u5efa\u7acb Issue \u5e76\u5b8c\u6210 Pull Request"},{"location":"development/submit_pr_guide/#_1","text":"\u60a8\u5728Pull Request\u4e2d\u6bcf\u63d0\u4ea4\u4e00\u6b21\u65b0\u7684commit\u540e\uff0c\u4f1a\u89e6\u53d1CI\u5355\u5143\u6d4b\u8bd5\uff0c\u8bf7\u786e\u8ba4\u60a8\u7684commit message\u4e2d\u5df2\u52a0\u5165\u5fc5\u8981\u7684\u8bf4\u660e\uff0c\u8bf7\u89c1 \u63d0\u4ea4\uff08commit\uff09 \u8bf7\u60a8\u5173\u6ce8\u60a8Pull Request\u4e2d\u7684CI\u5355\u5143\u6d4b\u8bd5\u8fdb\u7a0b\uff0c\u5b83\u5c06\u4f1a\u5728\u51e0\u4e2a\u5c0f\u65f6\u5185\u5b8c\u6210 \u60a8\u4ec5\u9700\u8981\u5173\u6ce8\u548c\u81ea\u5df1\u63d0\u4ea4\u7684\u5206\u652f\u76f8\u5173\u7684CI\u9879\u76ee\uff0c\u4f8b\u5982\u60a8\u5411develop\u5206\u652f\u63d0\u4ea4\u4ee3\u7801\uff0c\u5219\u65e0\u9700\u5173\u6ce8release/1.1\u4e00\u680f\u662f\u5426\u901a\u8fc7\u6d4b\u8bd5 \u5f53\u6240\u9700\u7684\u6d4b\u8bd5\u540e\u90fd\u51fa\u73b0\u4e86\u7eff\u8272\u7684\u5bf9\u52fe\uff0c\u8868\u793a\u60a8\u672c\u6b21commit\u901a\u8fc7\u4e86\u5404\u9879\u5355\u5143\u6d4b\u8bd5 \u5982\u679c\u6240\u9700\u7684\u6d4b\u8bd5\u540e\u51fa\u73b0\u4e86\u7ea2\u8272\u53c9\u53f7\uff0c\u4ee3\u8868\u60a8\u672c\u6b21\u7684commit\u672a\u901a\u8fc7\u67d0\u9879\u5355\u5143\u6d4b\u8bd5\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8bf7\u60a8\u70b9\u51fbdetail\u67e5\u770b\u62a5\u9519\u8be6\u60c5\uff0c\u5e76\u5c06\u62a5\u9519\u539f\u56e0\u622a\u56fe\uff0c\u4ee5\u8bc4\u8bba\u7684\u65b9\u5f0f\u6dfb\u52a0\u5728\u60a8\u7684Pull Request\u4e2d\uff0c\u6211\u4eec\u7684\u5de5\u4f5c\u4eba\u5458\u5c06\u5e2e\u60a8\u67e5\u770b","title":"\u901a\u8fc7\u5355\u5143\u6d4b\u8bd5"},{"location":"development/submit_pr_guide/#_2","text":"\u5728 PR \u88ab merge \u8fdb\u4e3b\u4ed3\u5e93\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 PR \u7684\u9875\u9762\u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5206\u652f\u3002 \u4e5f\u53ef\u4ee5\u4f7f\u7528 git push origin :\u5206\u652f\u540d \u5220\u9664\u8fdc\u7a0b\u5206\u652f\uff0c\u5982\uff1a $ git push origin :my-cool-stuff","title":"\u5220\u9664\u8fdc\u7a0b\u5206\u652f"},{"location":"development/submit_pr_guide/#_3","text":"\u6700\u540e\uff0c\u5220\u9664\u672c\u5730\u5206\u652f\u3002 $ git checkout develop # \u5207\u6362\u5230 develop \u5206\u652f $ git branch -D my-cool-stuff # \u5220\u9664 my-cool-stuff \u5206\u652f \u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u4e00\u6b21\u4ee3\u7801\u8d21\u732e\u7684\u8fc7\u7a0b\u3002","title":"\u5220\u9664\u672c\u5730\u5206\u652f"},{"location":"development/submit_pr_guide/#_4","text":"\u4e3a\u4e86\u4f7f\u8bc4\u5ba1\u4eba\u5728\u8bc4\u5ba1\u4ee3\u7801\u65f6\u66f4\u597d\u5730\u4e13\u6ce8\u4e8e\u4ee3\u7801\u672c\u8eab\uff0c\u8bf7\u60a8\u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\u65f6\uff0c\u9075\u5b88\u4ee5\u4e0b\u7ea6\u5b9a\uff1a 1\uff09\u8bf7\u4fdd\u8bc1Travis-CI \u4e2d\u5355\u5143\u6d4b\u8bd5\u80fd\u987a\u5229\u901a\u8fc7\u3002\u5982\u679c\u6ca1\u8fc7\uff0c\u8bf4\u660e\u63d0\u4ea4\u7684\u4ee3\u7801\u5b58\u5728\u95ee\u9898\uff0c\u8bc4\u5ba1\u4eba\u4e00\u822c\u4e0d\u505a\u8bc4\u5ba1\u3002 2\uff09\u63d0\u4ea4Pull Request\u524d\uff1a \u8bf7\u6ce8\u610fcommit\u7684\u6570\u91cf \u539f\u56e0\uff1a\u5982\u679c\u4ec5\u4ec5\u4fee\u6539\u4e00\u4e2a\u6587\u4ef6\u4f46\u63d0\u4ea4\u4e86\u5341\u51e0\u4e2acommit\uff0c\u6bcf\u4e2acommit\u53ea\u505a\u4e86\u5c11\u91cf\u7684\u4fee\u6539\uff0c\u8fd9\u4f1a\u7ed9\u8bc4\u5ba1\u4eba\u5e26\u6765\u5f88\u5927\u56f0\u6270\u3002\u8bc4\u5ba1\u4eba\u9700\u8981\u9010\u4e00\u67e5\u770b\u6bcf\u4e2acommit\u624d\u80fd\u77e5\u9053\u505a\u4e86\u54ea\u4e9b\u4fee\u6539\uff0c\u4e14\u4e0d\u6392\u9664commit\u4e4b\u95f4\u7684\u4fee\u6539\u5b58\u5728\u76f8\u4e92\u8986\u76d6\u7684\u60c5\u51b5\u3002 \u5efa\u8bae\uff1a\u6bcf\u6b21\u63d0\u4ea4\u65f6\uff0c\u4fdd\u6301\u5c3d\u91cf\u5c11\u7684commit\uff0c\u53ef\u4ee5\u901a\u8fc7 git commit --amend \u8865\u5145\u4e0a\u6b21\u7684commit\u3002\u5bf9\u5df2\u7ecfPush\u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684\u591a\u4e2acommit\uff0c\u53ef\u4ee5\u53c2\u8003 squash commits after push \u3002 \u8bf7\u6ce8\u610f\u6bcf\u4e2acommit\u7684\u540d\u79f0\uff1a\u5e94\u80fd\u53cd\u6620\u5f53\u524dcommit\u7684\u5185\u5bb9\uff0c\u4e0d\u80fd\u592a\u968f\u610f\u3002 3\uff09\u5982\u679c\u89e3\u51b3\u4e86\u67d0\u4e2aIssue\u7684\u95ee\u9898\uff0c\u8bf7\u5728\u8be5Pull Request\u7684 \u7b2c\u4e00\u4e2a \u8bc4\u8bba\u6846\u4e2d\u52a0\u4e0a\uff1a fix #issue_number \uff0c\u8fd9\u6837\u5f53\u8be5PUll Request\u88ab\u5408\u5e76\u540e\uff0c\u4f1a\u81ea\u52a8\u5173\u95ed\u5bf9\u5e94\u7684Issue\u3002 - \u5173\u952e\u8bcd\u5305\u62ec\uff1aclose, closes, closed, fix, fixes, fixed, resolve, resolves, resolved\uff0c\u8bf7\u9009\u62e9\u5408\u9002\u7684\u8bcd\u6c47\u3002 - \u8be6\u7ec6\u53ef\u53c2\u8003 Closing issues via commit messages \u3002 \u6b64\u5916\uff0c\u5728\u56de\u590d\u8bc4\u5ba1\u4eba\u610f\u89c1\u65f6\uff0c\u8bf7\u60a8\u9075\u5b88\u4ee5\u4e0b\u7ea6\u5b9a\uff1a 1\uff09\u8bc4\u5ba1\u4eba\u7684\u6bcf\u4e2a\u610f\u89c1\u90fd\u5fc5\u987b\u56de\u590d\uff08\u8fd9\u662f\u5f00\u6e90\u793e\u533a\u7684\u57fa\u672c\u793c\u8c8c\uff0c\u522b\u4eba\u5e2e\u4e86\u5fd9\uff0c\u5e94\u8be5\u8bf4\u8c22\u8c22\uff09\uff1a \u5bf9\u8bc4\u5ba1\u610f\u89c1\u540c\u610f\u4e14\u6309\u5176\u4fee\u6539\u5b8c\u7684\uff0c\u7ed9\u4e2a\u7b80\u5355\u7684 Done \u5373\u53ef\uff1b \u5bf9\u8bc4\u5ba1\u610f\u89c1\u4e0d\u540c\u610f\u7684\uff0c\u8bf7\u7ed9\u51fa\u60a8\u81ea\u5df1\u7684\u53cd\u9a73\u7406\u7531\u3002 2\uff09\u5982\u679c\u8bc4\u5ba1\u610f\u89c1\u6bd4\u8f83\u591a\uff1a \u8bf7\u7ed9\u51fa\u603b\u4f53\u7684\u4fee\u6539\u60c5\u51b5\u3002 \u8bf7\u91c7\u7528 start a review \u8fdb\u884c\u56de\u590d\uff0c\u800c\u975e\u76f4\u63a5\u56de\u590d\u7684\u65b9\u5f0f\u3002\u539f\u56e0\u662f\u6bcf\u4e2a\u56de\u590d\u90fd\u4f1a\u53d1\u9001\u4e00\u5c01\u90ae\u4ef6\uff0c\u4f1a\u9020\u6210\u90ae\u4ef6\u707e\u96be\u3002","title":"\u63d0\u4ea4\u4ee3\u7801\u7684\u4e00\u4e9b\u7ea6\u5b9a"},{"location":"development/write_doc_guide/","text":"\u5982\u4f55\u8d21\u732e\u6587\u6863 BFE\u975e\u5e38\u6b22\u8fce\u60a8\u8d21\u732e\u6587\u6863\u3002\u5982\u679c\u60a8\u64b0\u5199/\u7ffb\u8bd1\u7684\u6587\u6863\u6ee1\u8db3\u6211\u4eec\u7684\u8981\u6c42\uff0c\u60a8\u7684\u6587\u6863\u5c06\u4f1a\u5448\u73b0\u5728bfe-networks.com\u7f51\u7ad9\u548cGithub\u4e0a\u4f9bBFE\u7684\u7528\u6237\u9605\u8bfb\u3002 BFE\u7684\u6587\u6863\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u7c7b\u522b\uff1a \u5feb\u901f\u5165\u95e8\uff1a\u65e8\u5728\u5e2e\u52a9\u7528\u6237\u5feb\u901f\u5b89\u88c5\u548c\u5165\u95e8\uff1b \u4f7f\u7528\u6307\u5357\uff1a\u65e8\u5728\u4e3a\u7528\u6237\u63d0BFE\u57fa\u672c\u7528\u6cd5\u8bb2\u89e3\uff1b \u5f00\u53d1\u6307\u5357\uff1a\u65e8\u5728\u6ee1\u8db3\u5f00\u53d1\u8005\u7684\u9700\u6c42\uff1b \u6211\u4eec\u7684\u6587\u6863\u652f\u6301 Markdown (GitHub\u98ce\u683c)\u683c\u5f0f\u7684\u5185\u5bb9\u8d21\u732e\u3002 \u64b0\u5199\u6587\u6863\u5b8c\u6210\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u9884\u89c8\u5de5\u5177\u67e5\u770b\u6587\u6863\u663e\u793a\u7684\u6548\u679c\uff0c\u4ee5\u9a8c\u8bc1\u60a8\u7684\u6587\u6863\u662f\u5426\u80fd\u591f\u5728\u5b98\u7f51\u6b63\u786e\u663e\u793a\u3002 \u5982\u4f55\u4f7f\u7528\u9884\u89c8\u5de5\u5177 \u5b89\u88c5\u4f9d\u8d56\u9879 \u5728\u6b64\u4e4b\u524d\uff0c\u8bf7\u786e\u8ba4\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u5b89\u88c5\u4e86gitbook\u53ca\u4f9d\u8d56\u9879 \u4ee5ubuntu\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u8fd0\u884c\uff1a $ sudo apt-get update && apt-get install -y npm $ sudo npm install -g gitbook-cli Clone\u4ed3\u5e93 \u4e0b\u8f7d\u5b8c\u6574\u7684BFE\u4ed3\u5e93\uff1a $ git clone https://github.com/baidu/bfe \u5728\u672c\u5730\u8fd0\u884c\u6587\u6863\u7ad9\u70b9 \u8fdb\u5165\u60a8\u5e0c\u671b\u52a0\u8f7d\u548c\u6784\u5efa\u5185\u5bb9\u7684\u76ee\u5f55\u5217\u8868\uff08docs/LANG\uff09, \u8fd0\u884c\uff1a $ cd docs/zh_cn/ $ gitbook serve --port 8000 ... Serving book on http://localhost:8000 \u7136\u540e\uff1a\u6253\u5f00\u6d4f\u89c8\u5668\u5e76\u5bfc\u822a\u5230http://localhost:8000\u3002 \u7f51\u7ad9\u53ef\u80fd\u9700\u8981\u51e0\u79d2\u949f\u624d\u80fd\u6210\u529f\u52a0\u8f7d\uff0c\u56e0\u4e3a\u6784\u5efa\u9700\u8981\u4e00\u5b9a\u7684\u65f6\u95f4 \u8d21\u732e\u6587\u6863 \u6240\u6709\u5185\u5bb9\u90fd\u5e94\u8be5\u4ee5 Markdown (GitHub\u98ce\u683c)\u7684\u5f62\u5f0f\u7f16\u5199\u3002 \u8d21\u732e\u7f16\u5199\u6587\u6863 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 .md \u6587\u4ef6\u6216\u5728\u60a8\u5f53\u524d\u64cd\u4f5c\u7684\u4ed3\u5e93\u4e2d\u4fee\u6539\u5df2\u5b58\u5728\u7684\u6587\u7ae0 \u5982\u679c\u662f\u65b0\u589e\u6587\u6863\uff0c\u9700\u5c06\u65b0\u589e\u7684\u6587\u6863\u540d\uff0c\u6dfb\u52a0\u5230\u5bf9\u5e94\u7684index\u6587\u4ef6\u4e2d(SUMMARY.md) \u8fd0\u884c\u9884\u89c8\u5de5\u5177 \u5728\u6587\u6863\u57fa\u76ee\u5f55(docs/LANG)\u542f\u52a8\u9884\u89c8\u5de5\u5177 $ cd docs/zh_cn/ $ gitbook serve --port 8000 \u9884\u89c8\u4fee\u6539 \u6253\u5f00\u6d4f\u89c8\u5668\u5e76\u5bfc\u822a\u5230http://localhost:8000\u3002 \u5728\u8981\u66f4\u65b0\u7684\u9875\u9762\u4e0a\uff0c\u5355\u51fb\u53f3\u4e0a\u89d2\u7684Refresh Content \u63d0\u4ea4\u4fee\u6539 \u4fee\u6539\u6587\u6863, \u63d0\u4ea4\u4fee\u6539\u4e0ePR\u7684\u6b65\u9aa4\u53ef\u4ee5\u53c2\u8003 \u5982\u4f55\u8d21\u732e\u4ee3\u7801 \u5e2e\u52a9\u6539\u8fdb\u9884\u89c8\u5de5\u5177 \u6211\u4eec\u975e\u5e38\u6b22\u8fce\u60a8\u5bf9\u5e73\u53f0\u548c\u652f\u6301\u5185\u5bb9\u7684\u5404\u4e2a\u65b9\u9762\u505a\u51fa\u8d21\u732e\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u5448\u73b0\u8fd9\u4e9b\u5185\u5bb9\u3002\u60a8\u53ef\u4ee5Fork\u6216Clone\u8fd9\u4e2a\u5b58\u50a8\u5e93\uff0c\u6216\u8005\u63d0\u51fa\u95ee\u9898\u5e76\u63d0\u4f9b\u53cd\u9988\uff0c\u4ee5\u53ca\u5728issues\u4e0a\u63d0\u4ea4bug\u4fe1\u606f\u3002\u8be6\u7ec6\u5185\u5bb9\u8bf7\u53c2\u8003 \u5f00\u53d1\u6307\u5357 \u3002","title":"\u5982\u4f55\u8d21\u732e\u6587\u6863"},{"location":"development/write_doc_guide/#_1","text":"BFE\u975e\u5e38\u6b22\u8fce\u60a8\u8d21\u732e\u6587\u6863\u3002\u5982\u679c\u60a8\u64b0\u5199/\u7ffb\u8bd1\u7684\u6587\u6863\u6ee1\u8db3\u6211\u4eec\u7684\u8981\u6c42\uff0c\u60a8\u7684\u6587\u6863\u5c06\u4f1a\u5448\u73b0\u5728bfe-networks.com\u7f51\u7ad9\u548cGithub\u4e0a\u4f9bBFE\u7684\u7528\u6237\u9605\u8bfb\u3002 BFE\u7684\u6587\u6863\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u7c7b\u522b\uff1a \u5feb\u901f\u5165\u95e8\uff1a\u65e8\u5728\u5e2e\u52a9\u7528\u6237\u5feb\u901f\u5b89\u88c5\u548c\u5165\u95e8\uff1b \u4f7f\u7528\u6307\u5357\uff1a\u65e8\u5728\u4e3a\u7528\u6237\u63d0BFE\u57fa\u672c\u7528\u6cd5\u8bb2\u89e3\uff1b \u5f00\u53d1\u6307\u5357\uff1a\u65e8\u5728\u6ee1\u8db3\u5f00\u53d1\u8005\u7684\u9700\u6c42\uff1b \u6211\u4eec\u7684\u6587\u6863\u652f\u6301 Markdown (GitHub\u98ce\u683c)\u683c\u5f0f\u7684\u5185\u5bb9\u8d21\u732e\u3002 \u64b0\u5199\u6587\u6863\u5b8c\u6210\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u9884\u89c8\u5de5\u5177\u67e5\u770b\u6587\u6863\u663e\u793a\u7684\u6548\u679c\uff0c\u4ee5\u9a8c\u8bc1\u60a8\u7684\u6587\u6863\u662f\u5426\u80fd\u591f\u5728\u5b98\u7f51\u6b63\u786e\u663e\u793a\u3002","title":"\u5982\u4f55\u8d21\u732e\u6587\u6863"},{"location":"development/write_doc_guide/#_2","text":"","title":"\u5982\u4f55\u4f7f\u7528\u9884\u89c8\u5de5\u5177"},{"location":"development/write_doc_guide/#_3","text":"\u5728\u6b64\u4e4b\u524d\uff0c\u8bf7\u786e\u8ba4\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u5b89\u88c5\u4e86gitbook\u53ca\u4f9d\u8d56\u9879 \u4ee5ubuntu\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u8fd0\u884c\uff1a $ sudo apt-get update && apt-get install -y npm $ sudo npm install -g gitbook-cli","title":"\u5b89\u88c5\u4f9d\u8d56\u9879"},{"location":"development/write_doc_guide/#clone","text":"\u4e0b\u8f7d\u5b8c\u6574\u7684BFE\u4ed3\u5e93\uff1a $ git clone https://github.com/baidu/bfe","title":"Clone\u4ed3\u5e93"},{"location":"development/write_doc_guide/#_4","text":"\u8fdb\u5165\u60a8\u5e0c\u671b\u52a0\u8f7d\u548c\u6784\u5efa\u5185\u5bb9\u7684\u76ee\u5f55\u5217\u8868\uff08docs/LANG\uff09, \u8fd0\u884c\uff1a $ cd docs/zh_cn/ $ gitbook serve --port 8000 ... Serving book on http://localhost:8000 \u7136\u540e\uff1a\u6253\u5f00\u6d4f\u89c8\u5668\u5e76\u5bfc\u822a\u5230http://localhost:8000\u3002 \u7f51\u7ad9\u53ef\u80fd\u9700\u8981\u51e0\u79d2\u949f\u624d\u80fd\u6210\u529f\u52a0\u8f7d\uff0c\u56e0\u4e3a\u6784\u5efa\u9700\u8981\u4e00\u5b9a\u7684\u65f6\u95f4","title":"\u5728\u672c\u5730\u8fd0\u884c\u6587\u6863\u7ad9\u70b9"},{"location":"development/write_doc_guide/#_5","text":"\u6240\u6709\u5185\u5bb9\u90fd\u5e94\u8be5\u4ee5 Markdown (GitHub\u98ce\u683c)\u7684\u5f62\u5f0f\u7f16\u5199\u3002","title":"\u8d21\u732e\u6587\u6863"},{"location":"development/write_doc_guide/#_6","text":"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 .md \u6587\u4ef6\u6216\u5728\u60a8\u5f53\u524d\u64cd\u4f5c\u7684\u4ed3\u5e93\u4e2d\u4fee\u6539\u5df2\u5b58\u5728\u7684\u6587\u7ae0 \u5982\u679c\u662f\u65b0\u589e\u6587\u6863\uff0c\u9700\u5c06\u65b0\u589e\u7684\u6587\u6863\u540d\uff0c\u6dfb\u52a0\u5230\u5bf9\u5e94\u7684index\u6587\u4ef6\u4e2d(SUMMARY.md)","title":"\u8d21\u732e\u7f16\u5199\u6587\u6863"},{"location":"development/write_doc_guide/#_7","text":"\u5728\u6587\u6863\u57fa\u76ee\u5f55(docs/LANG)\u542f\u52a8\u9884\u89c8\u5de5\u5177 $ cd docs/zh_cn/ $ gitbook serve --port 8000","title":"\u8fd0\u884c\u9884\u89c8\u5de5\u5177"},{"location":"development/write_doc_guide/#_8","text":"\u6253\u5f00\u6d4f\u89c8\u5668\u5e76\u5bfc\u822a\u5230http://localhost:8000\u3002 \u5728\u8981\u66f4\u65b0\u7684\u9875\u9762\u4e0a\uff0c\u5355\u51fb\u53f3\u4e0a\u89d2\u7684Refresh Content","title":"\u9884\u89c8\u4fee\u6539"},{"location":"development/write_doc_guide/#_9","text":"\u4fee\u6539\u6587\u6863, \u63d0\u4ea4\u4fee\u6539\u4e0ePR\u7684\u6b65\u9aa4\u53ef\u4ee5\u53c2\u8003 \u5982\u4f55\u8d21\u732e\u4ee3\u7801","title":"\u63d0\u4ea4\u4fee\u6539"},{"location":"development/write_doc_guide/#_10","text":"\u6211\u4eec\u975e\u5e38\u6b22\u8fce\u60a8\u5bf9\u5e73\u53f0\u548c\u652f\u6301\u5185\u5bb9\u7684\u5404\u4e2a\u65b9\u9762\u505a\u51fa\u8d21\u732e\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u5448\u73b0\u8fd9\u4e9b\u5185\u5bb9\u3002\u60a8\u53ef\u4ee5Fork\u6216Clone\u8fd9\u4e2a\u5b58\u50a8\u5e93\uff0c\u6216\u8005\u63d0\u51fa\u95ee\u9898\u5e76\u63d0\u4f9b\u53cd\u9988\uff0c\u4ee5\u53ca\u5728issues\u4e0a\u63d0\u4ea4bug\u4fe1\u606f\u3002\u8be6\u7ec6\u5185\u5bb9\u8bf7\u53c2\u8003 \u5f00\u53d1\u6307\u5357 \u3002","title":"\u5e2e\u52a9\u6539\u8fdb\u9884\u89c8\u5de5\u5177"},{"location":"development/module/bfe_callback/","text":"BFE\u7684\u56de\u8c03\u673a\u5236 BFE\u7684\u8f6c\u53d1\u8fc7\u7a0b\u548c\u56de\u8c03\u70b9 BFE\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\u7684\u56de\u8c03\u70b9\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u56de\u8c03\u70b9\u5217\u8868 \u5728BFE\u4e2d\uff0c\u8bbe\u7f6e\u4e86\u4ee5\u4e0b9\u4e2a\u56de\u8c03\u70b9\uff1a - HandleAccept: \u4f4d\u4e8e\u548c\u5ba2\u6237\u7aef\u7684TCP\u8fde\u63a5\u5efa\u7acb\u540e - HandleHandshake\uff1a\u4f4d\u4e8e\u548c\u5ba2\u6237\u7aef\u7684SSL\u6216TLS\u63e1\u624b\u5b8c\u6210\u540e - HandleBeforeLocation\uff1a\u4f4d\u4e8e\u67e5\u627e\u4ea7\u54c1\u7ebf\u4e4b\u524d - HandleFoundProduct\uff1a\u4f4d\u4e8e\u5b8c\u6210\u67e5\u627e\u4ea7\u54c1\u7ebf\u4e4b\u540e - HandleAfterLocation\uff1a\u4f4d\u4e8e\u5b8c\u6210\u67e5\u627e\u96c6\u7fa4\u4e4b\u540e - HandleForward\uff1a\u4f4d\u4e8e\u5b8c\u6210\u67e5\u627e\u5b50\u96c6\u7fa4\u548c\u540e\u7aef\u5b9e\u4f8b\u4e4b\u540e\uff0c\u4f4d\u4e8e\u8f6c\u53d1\u8bf7\u6c42\u4e4b\u524d - HandleReadResponse\uff1a\u4f4d\u4e8e\u8bfb\u53d6\u5230\u540e\u7aef\u54cd\u5e94\u4e4b\u540e - HandleRequestFinish\uff1a\u4f4d\u4e8e\u540e\u7aef\u54cd\u5e94\u5904\u7406\u5b8c\u6bd5\u540e - HandleFinish\uff1a\u4f4d\u4e8e\u548c\u5ba2\u6237\u7aef\u7684TCP\u8fde\u63a5\u5173\u95ed\u540e \u56de\u8c03\u70b9\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u67e5\u770b /bfe_module/bfe_callback.go \u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c \u5728\u56de\u8c03\u70b9\u6267\u884c\u7531\u6a21\u5757\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\uff0c\u56de\u8c03\u51fd\u6570\u4f1a\u8fd4\u56de\u7279\u5b9a\u7684\u8fd4\u56de\u503c\u3002BFE\u6839\u636e\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u6267\u884c\u540e\u7eed\u7684\u64cd\u4f5c\u3002 \u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5b9a\u4e49\u5982\u4e0b\uff1a - BfeHandlerFinish\uff1a\u5728\u53d1\u9001\u54cd\u5e94\u540e\uff0c\u5173\u95ed\u8fde\u63a5 - BfeHandlerGoOn\uff1a\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u4e2a\u56de\u8c03\u51fd\u6570 - BfeHandlerRedirect\uff1a\u6267\u884c\u91cd\u5b9a\u5411\uff08Redirect\uff09 - BfeHandlerResponse\uff1a\u53d1\u9001\u54cd\u5e94 - BfeHandlerClose\uff1a\u76f4\u63a5\u5173\u95ed\u8fde\u63a5\uff0c\u4e0d\u53d1\u9001\u4efb\u4f55\u6570\u636e \u56de\u8c03\u51fd\u6570\u8fd4\u56de\u503c\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u67e5\u770b /bfe_module/bfe_handler_list.go \u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f \u5728\u4e0d\u540c\u7684\u56de\u8c03\u70b9\uff0c\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\u4e5f\u662f\u4e0d\u540c\u7684\u3002\u5728BFE\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4ee5\u4e0b5\u79cd\u7c7b\u578b\u7684\u56de\u8c03\u51fd\u6570 - HandlersAccept\uff1a\u7528\u4e8e\u5904\u7406\u8fde\u63a5\u5efa\u7acb\u7684\u76f8\u5173\u573a\u666f - HandlersRequest\uff1a\u7528\u4e8e\u5904\u7406\u548c\u8bf7\u6c42\u6709\u5173\u7684\u573a\u666f - HandlersForward\uff1a\u7528\u4e8e\u5904\u7406\u548c\u8f6c\u53d1\u6709\u5173\u7684\u573a\u666f - HandlersResponse\uff1a\u7528\u4e8e\u5904\u7406\u548c\u54cd\u5e94\u6709\u5173\u7684\u573a\u666f - HandlersFinish\uff1a\u7528\u4e8e\u5904\u7406\u8fde\u63a5\u5173\u95ed\u7684\u76f8\u5173\u573a\u666f \u56de\u8c03\u51fd\u6570\u7c7b\u578b\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u67e5\u770b /bfe_module/bfe_handler_list.go \u4e0b\u9762\u5bf9\u8fd9\u51e0\u79cd\u56de\u8c03\u51fd\u6570\u505a\u8be6\u7ec6\u7684\u8bf4\u660e\u3002 \u6ce8\uff1a\u4e0b\u9762\u56de\u8c03\u51fd\u6570\u4e2dint\u7c7b\u578b\u7684\u8fd4\u56de\u503c\uff0c\u53c2\u89c1\u4e0a\u8ff0\u201c\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\u201d\u4e2d\u7684\u8bf4\u660e\u3002 HandlersAccept \u9002\u7528\u56de\u8c03\u70b9\uff1a HandleAccept HandleHandshake \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(session *bfe_basic.Session) int HandlersRequest \u9002\u7528\u56de\u8c03\u70b9\uff1a HandleBeforeLocation HandleFoundProduct HandleAfterLocation \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(req bfe_basic.Request) (int, bfe_http.Response) HandlersForward \u9002\u7528\u56de\u8c03\u70b9\uff1a HandleForward \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(req *bfe_basic.Request) int HandlersResponse \u9002\u7528\u56de\u8c03\u70b9\uff1a HandleReadResponse HandleRequestFinish \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(req bfe_basic.Request, res bfe_http.Response) int HandlersFinish \u9002\u7528\u56de\u8c03\u70b9\uff1a HandleFinish \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(session *bfe_basic.Session) int","title":"BFE\u56de\u8c03\u673a\u5236\u8bf4\u660e"},{"location":"development/module/bfe_callback/#bfe","text":"","title":"BFE\u7684\u56de\u8c03\u673a\u5236"},{"location":"development/module/bfe_callback/#bfe_1","text":"BFE\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\u7684\u56de\u8c03\u70b9\u5982\u4e0b\u56fe\u6240\u793a\u3002","title":"BFE\u7684\u8f6c\u53d1\u8fc7\u7a0b\u548c\u56de\u8c03\u70b9"},{"location":"development/module/bfe_callback/#_1","text":"\u5728BFE\u4e2d\uff0c\u8bbe\u7f6e\u4e86\u4ee5\u4e0b9\u4e2a\u56de\u8c03\u70b9\uff1a - HandleAccept: \u4f4d\u4e8e\u548c\u5ba2\u6237\u7aef\u7684TCP\u8fde\u63a5\u5efa\u7acb\u540e - HandleHandshake\uff1a\u4f4d\u4e8e\u548c\u5ba2\u6237\u7aef\u7684SSL\u6216TLS\u63e1\u624b\u5b8c\u6210\u540e - HandleBeforeLocation\uff1a\u4f4d\u4e8e\u67e5\u627e\u4ea7\u54c1\u7ebf\u4e4b\u524d - HandleFoundProduct\uff1a\u4f4d\u4e8e\u5b8c\u6210\u67e5\u627e\u4ea7\u54c1\u7ebf\u4e4b\u540e - HandleAfterLocation\uff1a\u4f4d\u4e8e\u5b8c\u6210\u67e5\u627e\u96c6\u7fa4\u4e4b\u540e - HandleForward\uff1a\u4f4d\u4e8e\u5b8c\u6210\u67e5\u627e\u5b50\u96c6\u7fa4\u548c\u540e\u7aef\u5b9e\u4f8b\u4e4b\u540e\uff0c\u4f4d\u4e8e\u8f6c\u53d1\u8bf7\u6c42\u4e4b\u524d - HandleReadResponse\uff1a\u4f4d\u4e8e\u8bfb\u53d6\u5230\u540e\u7aef\u54cd\u5e94\u4e4b\u540e - HandleRequestFinish\uff1a\u4f4d\u4e8e\u540e\u7aef\u54cd\u5e94\u5904\u7406\u5b8c\u6bd5\u540e - HandleFinish\uff1a\u4f4d\u4e8e\u548c\u5ba2\u6237\u7aef\u7684TCP\u8fde\u63a5\u5173\u95ed\u540e \u56de\u8c03\u70b9\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u67e5\u770b /bfe_module/bfe_callback.go","title":"\u56de\u8c03\u70b9\u5217\u8868"},{"location":"development/module/bfe_callback/#_2","text":"\u5728\u56de\u8c03\u70b9\u6267\u884c\u7531\u6a21\u5757\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\uff0c\u56de\u8c03\u51fd\u6570\u4f1a\u8fd4\u56de\u7279\u5b9a\u7684\u8fd4\u56de\u503c\u3002BFE\u6839\u636e\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u6267\u884c\u540e\u7eed\u7684\u64cd\u4f5c\u3002 \u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5b9a\u4e49\u5982\u4e0b\uff1a - BfeHandlerFinish\uff1a\u5728\u53d1\u9001\u54cd\u5e94\u540e\uff0c\u5173\u95ed\u8fde\u63a5 - BfeHandlerGoOn\uff1a\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u4e2a\u56de\u8c03\u51fd\u6570 - BfeHandlerRedirect\uff1a\u6267\u884c\u91cd\u5b9a\u5411\uff08Redirect\uff09 - BfeHandlerResponse\uff1a\u53d1\u9001\u54cd\u5e94 - BfeHandlerClose\uff1a\u76f4\u63a5\u5173\u95ed\u8fde\u63a5\uff0c\u4e0d\u53d1\u9001\u4efb\u4f55\u6570\u636e \u56de\u8c03\u51fd\u6570\u8fd4\u56de\u503c\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u67e5\u770b /bfe_module/bfe_handler_list.go","title":"\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c"},{"location":"development/module/bfe_callback/#_3","text":"\u5728\u4e0d\u540c\u7684\u56de\u8c03\u70b9\uff0c\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\u4e5f\u662f\u4e0d\u540c\u7684\u3002\u5728BFE\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4ee5\u4e0b5\u79cd\u7c7b\u578b\u7684\u56de\u8c03\u51fd\u6570 - HandlersAccept\uff1a\u7528\u4e8e\u5904\u7406\u8fde\u63a5\u5efa\u7acb\u7684\u76f8\u5173\u573a\u666f - HandlersRequest\uff1a\u7528\u4e8e\u5904\u7406\u548c\u8bf7\u6c42\u6709\u5173\u7684\u573a\u666f - HandlersForward\uff1a\u7528\u4e8e\u5904\u7406\u548c\u8f6c\u53d1\u6709\u5173\u7684\u573a\u666f - HandlersResponse\uff1a\u7528\u4e8e\u5904\u7406\u548c\u54cd\u5e94\u6709\u5173\u7684\u573a\u666f - HandlersFinish\uff1a\u7528\u4e8e\u5904\u7406\u8fde\u63a5\u5173\u95ed\u7684\u76f8\u5173\u573a\u666f \u56de\u8c03\u51fd\u6570\u7c7b\u578b\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u67e5\u770b /bfe_module/bfe_handler_list.go \u4e0b\u9762\u5bf9\u8fd9\u51e0\u79cd\u56de\u8c03\u51fd\u6570\u505a\u8be6\u7ec6\u7684\u8bf4\u660e\u3002 \u6ce8\uff1a\u4e0b\u9762\u56de\u8c03\u51fd\u6570\u4e2dint\u7c7b\u578b\u7684\u8fd4\u56de\u503c\uff0c\u53c2\u89c1\u4e0a\u8ff0\u201c\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\u201d\u4e2d\u7684\u8bf4\u660e\u3002","title":"\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f"},{"location":"development/module/bfe_callback/#handlersaccept","text":"\u9002\u7528\u56de\u8c03\u70b9\uff1a HandleAccept HandleHandshake \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(session *bfe_basic.Session) int","title":"HandlersAccept"},{"location":"development/module/bfe_callback/#handlersrequest","text":"\u9002\u7528\u56de\u8c03\u70b9\uff1a HandleBeforeLocation HandleFoundProduct HandleAfterLocation \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(req bfe_basic.Request) (int, bfe_http.Response)","title":"HandlersRequest"},{"location":"development/module/bfe_callback/#handlersforward","text":"\u9002\u7528\u56de\u8c03\u70b9\uff1a HandleForward \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(req *bfe_basic.Request) int","title":"HandlersForward"},{"location":"development/module/bfe_callback/#handlersresponse","text":"\u9002\u7528\u56de\u8c03\u70b9\uff1a HandleReadResponse HandleRequestFinish \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(req bfe_basic.Request, res bfe_http.Response) int","title":"HandlersResponse"},{"location":"development/module/bfe_callback/#handlersfinish","text":"\u9002\u7528\u56de\u8c03\u70b9\uff1a HandleFinish \u56de\u8c03\u51fd\u6570\u5f62\u5f0f\uff1a handler(session *bfe_basic.Session) int","title":"HandlersFinish"},{"location":"development/module/how_to_write_module/","text":"\u5982\u4f55\u7f16\u5199\u4e00\u4e2a\u6a21\u5757 \u6982\u8ff0 \u5728\u4e3aBFE\u7f16\u5199\u4e00\u4e2a\u65b0\u7684\u6a21\u5757\u65f6\uff0c\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u65b9\u9762\uff1a - \u914d\u7f6e\u7684\u52a0\u8f7d - \u56de\u8c03\u51fd\u6570\u7684\u7f16\u5199 - \u6a21\u5757\u72b6\u6001\u7684\u5c55\u793a \u5728\u4e0b\u9762\u7684\u8bb2\u8ff0\u4e2d\uff0c\u5c06\u7ed3\u5408mod_block\u7684\u5b9e\u73b0\u4f5c\u4e3a\u4f8b\u5b50\u3002 mod_block\u7684\u4ee3\u7801\u4f4d\u4e8e /bfe_modules/mod_block \u914d\u7f6e\u7684\u52a0\u8f7d \u914d\u7f6e\u7684\u5206\u7c7b \u5bf9\u4e8e\u4e00\u4e2a\u6a21\u5757\uff0c\u5305\u62ec\u4e24\u79cd\u914d\u7f6e\uff1a - \u9759\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff1a\u5728BFE\u7a0b\u5e8f\u542f\u52a8\u7684\u65f6\u5019\u52a0\u8f7d + \u5bf9\u6bcf\u4e2a\u6a21\u5757\u6709\u4e00\u4e2a\u8fd9\u6837\u7684\u914d\u7f6e\u6587\u4ef6 + \u914d\u7f6e\u6587\u4ef6\u7684\u540d\u5b57\u548c\u6a21\u5757\u540d\u5b57\u4e00\u81f4\uff0c\u5e76\u4ee5.conf\u7ed3\u5c3e + \u5982\uff1amod_block.conf - \u53ef\u52a8\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff1a\u5728BFE\u7a0b\u5e8f\u542f\u52a8\u7684\u65f6\u5019\u52a0\u8f7d\uff0c\u5728BFE\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4e5f\u53ef\u4ee5\u52a8\u6001\u52a0\u8f7d + \u5bf9\u6bcf\u4e2a\u6a21\u5757\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8fd9\u6837\u7684\u914d\u7f6e\u6587\u4ef6 + \u914d\u7f6e\u6587\u4ef6\u7684\u540d\u5b57\u4e00\u822c\u4ee5.data\u7ed3\u5c3e + \u5982\uff1a\u5728mod_block\u4e0b\u6709 block_rules.data \u548c ip_blacklist.data \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u5e94\u7f16\u5199\u72ec\u7acb\u7684\u52a0\u8f7d\u903b\u8f91\u3002 \u914d\u7f6e\u6587\u4ef6\u7684\u653e\u7f6e \u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5e94\u8be5\u7edf\u4e00\u653e\u7f6e\u4e8e /conf \u76ee\u5f55\u4e0b\u4e3a\u6bcf\u4e2a\u6a21\u5757\u72ec\u7acb\u5efa\u7acb\u7684\u76ee\u5f55\u4e2d \u5982\uff1amod_block\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u90fd\u653e\u7f6e\u5728 /conf/mod_block \u4e2d \u914d\u7f6e\u52a0\u8f7d\u7684\u68c0\u67e5 \u65e0\u8bba\u5bf9\u4e8e\u9759\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff0c\u8fd8\u662f\u5bf9\u4e8e\u53ef\u52a8\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u7a0b\u5e8f\u6b63\u5e38\u7684\u8fd0\u884c\uff0c\u5728\u914d\u7f6e\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u90fd\u9700\u8981\u5bf9\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u6b63\u786e\u6027\u8fdb\u884c\u68c0\u67e5\u3002 - \u5728BFE\u7a0b\u5e8f\u542f\u52a8\u9636\u6bb5\uff0c\u5982\u679c\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25\uff0c\u5219BFE\u65e0\u6cd5\u542f\u52a8 - \u5728BFE\u7a0b\u5e8f\u542f\u52a8\u540e\uff0c\u5982\u679c\u6a21\u5757\u7684\u53ef\u52a8\u6001\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25\uff0cBFE\u4ecd\u7136\u4f1a\u7ee7\u7eed\u8fd0\u884c \u914d\u7f6e\u7684\u52a8\u6001\u52a0\u8f7d \u5bf9\u4e8e\u53ef\u52a8\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff0c\u9700\u8981\u5728BFE\u7528\u4e8e\u76d1\u63a7\u548c\u52a0\u8f7d\u7684\u4e13\u7528web server\u4e0a\u505a\u56de\u8c03\u6ce8\u518c\u3002\u8fd9\u6837\uff0c\u901a\u8fc7\u8bbf\u95eeBFE\u5bf9\u5916\u76d1\u63a7\u7aef\u53e3\u7684\u7279\u5b9aURL\uff0c\u5c31\u53ef\u4ee5\u89e6\u53d1\u67d0\u4e2a\u914d\u7f6e\u7684\u52a8\u6001\u52a0\u8f7d\u3002 \u4f8b\u5982\uff0c\u5728mod_block\u7684\u521d\u59cb\u5316\u51fd\u6570\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u7c7b\u4f3c\u4e0b\u9762\u7684\u903b\u8f91\uff0c\u5c31\u662f\u5728\u6ce8\u518c\u914d\u7f6e\u52a0\u8f7d\u7684\u56de\u8c03(\u8be6\u89c1 mod_block.go ): // register web handler for reload err = whs.RegisterHandler(web_monitor.WebHandleReload, m.name, m.loadConfData) if err != nil { ... } \u56de\u8c03\u51fd\u6570\u7684\u7f16\u5199\u548c\u6ce8\u518c \u56de\u8c03\u51fd\u6570\u7684\u7f16\u5199 \u6839\u636e\u6a21\u5757\u7684\u529f\u80fd\u9700\u6c42\uff0c\u9009\u62e9\u5408\u9002\u7684\u56de\u8c03\u70b9\uff0c\u5bf9\u5e94\u7f16\u5199\u56de\u8c03\u51fd\u6570\u3002 \u6ce8\u610f\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684\u56de\u8c03\u70b9\uff0c\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\u53ef\u80fd\u4e0d\u540c\u3002BFE\u6240\u63d0\u4f9b\u7684\u56de\u8c03\u70b9\u548c\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\uff0c\u53ef\u53c2\u8003 BFE\u7684\u56de\u8c03\u673a\u5236 \u4f8b\u5982\uff0c\u5728mod_block\u4e2d\uff0c\u7f16\u5199\u4e86\u4ee5\u4e0b\u4e24\u4e2a\u56de\u8c03\u51fd\u6570(\u8be6\u89c1 mod_block.go )\uff1a func ( m * ModuleBlock ) globalBlockHandler ( session * bfe_basic . Session ) int { ... } func ( m * ModuleBlock ) productBlockHandler ( request * bfe_basic . Request ) ( int , * bfe_http . Response ) { ... } \u56de\u8c03\u51fd\u6570\u7684\u6ce8\u518c \u4e3a\u4e86\u8ba9\u56de\u8c03\u51fd\u6570\u751f\u6548\uff0c\u9700\u8981\u5728\u6a21\u5757\u521d\u59cb\u5316\u7684\u65f6\u5019\u5bf9\u56de\u8c03\u51fd\u6570\u8fdb\u884c\u6ce8\u518c\u3002 \u4f8b\u5982\uff0c\u5728mod_block\u4e2d\uff0c\u56de\u8c03\u51fd\u6570\u7684\u6ce8\u518c\u903b\u8f91\u5982\u4e0b(\u8be6\u89c1 mod_block.go )\uff1a func ( m * ModuleBlock ) Init ( cbs * bfe_module . BfeCallbacks , whs * web_monitor . WebHandlers , cr string ) error { ... // register handler err = cbs . AddFilter ( bfe_module . HandleAccept , m . globalBlockHandler ) if err != nil { ... } err = cbs . AddFilter ( bfe_module . HandleFoundProduct , m . productBlockHandler ) if err != nil { ... } ... } \u6a21\u5757\u72b6\u6001\u7684\u5c55\u793a \u5bf9\u4e8e\u6bcf\u4e2aBFE\u7684\u6a21\u5757\uff0c\u5f3a\u70c8\u63a8\u8350\u901a\u8fc7BFE\u89c4\u5b9a\u7684\u673a\u5236\uff0c\u5411\u5916\u66b4\u9732\u8db3\u591f\u7684\u5185\u90e8\u72b6\u6001\u4fe1\u606f\u3002 \u5728\u6a21\u5757\u5bf9\u5916\u66b4\u9732\u5185\u90e8\u72b6\u6001\uff0c\u9700\u8981\u505a\u4ee5\u4e0b3\u6b65\uff1a - \u5b9a\u4e49\u72b6\u6001\u53d8\u91cf - \u6ce8\u518c\u663e\u793a\u5185\u90e8\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570 - \u5728\u4ee3\u7801\u4e2d\u63d2\u5165\u72b6\u6001\u8bbe\u7f6e\u903b\u8f91 \u5b9a\u4e49\u72b6\u6001\u53d8\u91cf \u9700\u8981\u9996\u5148\u8bbe\u8ba1\u5728\u6a21\u5757\u4e2d\u9700\u8981\u7edf\u8ba1\u54ea\u4e9b\u503c\uff0c\u5e76\u901a\u8fc7\u7ed3\u6784\u4f53\u6210\u5458\u53d8\u91cf\u7684\u65b9\u5f0f\u5b9a\u4e49\u51fa\u6765\u3002 \u5982\uff0c\u5728mod_block\u4e2d\uff0c\u6709\u5982\u4e0b\u5b9a\u4e49(\u8be6\u89c1 mod_block.go )\uff1a type ModuleBlockState struct { ConnTotal *metrics.Counter // all connnetion checked ConnAccept *metrics.Counter // connection passed ConnRefuse *metrics.Counter // connection refused ReqTotal *metrics.Counter // all request in ReqToCheck *metrics.Counter // request to check ReqAccept *metrics.Counter // request accepted ReqRefuse *metrics.Counter // request refused WrongCommand *metrics.Counter // request with condition satisfied, but wrong command } \u7136\u540e\uff0c\u8981\u5728ModuleBlock\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\u4e3aModuleBlockState\u7684\u6210\u5458\u53d8\u91cf\uff0c\u8fd8\u9700\u8981\u5b9a\u4e49\u4e00\u4e2aMetrics\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\uff0c\u7528\u4e8e\u76f8\u5173\u7684\u8ba1\u7b97\u3002 type ModuleBlock struct { ... state ModuleBlockState // module state metrics metrics.Metrics ... \u7136\u540e\uff0c\u9700\u8981\u5728\u6784\u9020\u51fd\u6570\u4e2d\u505a\u521d\u59cb\u5316\u7684\u64cd\u4f5c func NewModuleBlock() *ModuleBlock { m := new(ModuleBlock) m.name = ModBlock m.metrics.Init(&m.state, ModBlock, 0) ... } \u6ce8\u518c\u663e\u793a\u5185\u90e8\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570 \u4e3a\u4e86\u53ef\u4ee5\u901a\u8fc7BFE\u7684\u76d1\u63a7\u7aef\u53e3\u67e5\u770b\u6a21\u5757\u7684\u5185\u90e8\u72b6\u6001\uff0c\u9700\u8981\u9996\u5148\u5b9e\u73b0\u56de\u8c03\u51fd\u6570\u3002 \u5982\uff0c\u5728mod_block\u4e2d\uff0c\u6709\u5982\u4e0b\u903b\u8f91(\u8be6\u89c1 mod_block.go )\uff0c\u5176\u4e2dmonitorHandlers()\u662f\u56de\u8c03\u51fd\u6570\uff1a func ( m * ModuleBlock ) getState ( params map [ string ] [] string ) ( [] byte , error ) { s : = m . metrics . GetAll () return s . Format ( params ) } func ( m * ModuleBlock ) getStateDiff ( params map [ string ] [] string ) ( [] byte , error ) { s : = m . metrics . GetDiff () return s . Format ( params ) } func ( m * ModuleBlock ) monitorHandlers () map [ string ] interface {} { handlers : = map [ string ] interface {}{ m . name : m . getState , m . name + \".diff\" : m . getStateDiff , } return handlers } \u7136\u540e\uff0c\u5728\u6a21\u5757\u7684\u521d\u59cb\u5316\u65f6\uff0c\u9700\u8981\u6ce8\u518c\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570 // register web handler for monitor err = web_monitor.RegisterHandlers(whs, web_monitor.WebHandleMonitor, m.monitorHandlers()) if err != nil { ... } \u5728\u4ee3\u7801\u4e2d\u63d2\u5165\u7edf\u8ba1\u903b\u8f91 \u5728\u6a21\u5757\u7684\u6267\u884c\u903b\u8f91\u4e2d\uff0c\u53ef\u4ee5\u63d2\u5165\u4e00\u4e9b\u7edf\u8ba1\u7684\u4ee3\u7801\u3002 \u5982\uff0c\u5728mod_block\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4ee3\u7801(\u8be6\u89c1 mod_block.go )\uff1a func (m *ModuleBlock) globalBlockHandler(session *bfe_basic.Session) int { ... m.state.ConnTotal.Inc(1) ... }","title":"\u5982\u4f55\u5f00\u53d1\u6a21\u5757"},{"location":"development/module/how_to_write_module/#_1","text":"","title":"\u5982\u4f55\u7f16\u5199\u4e00\u4e2a\u6a21\u5757"},{"location":"development/module/how_to_write_module/#_2","text":"\u5728\u4e3aBFE\u7f16\u5199\u4e00\u4e2a\u65b0\u7684\u6a21\u5757\u65f6\uff0c\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u65b9\u9762\uff1a - \u914d\u7f6e\u7684\u52a0\u8f7d - \u56de\u8c03\u51fd\u6570\u7684\u7f16\u5199 - \u6a21\u5757\u72b6\u6001\u7684\u5c55\u793a \u5728\u4e0b\u9762\u7684\u8bb2\u8ff0\u4e2d\uff0c\u5c06\u7ed3\u5408mod_block\u7684\u5b9e\u73b0\u4f5c\u4e3a\u4f8b\u5b50\u3002 mod_block\u7684\u4ee3\u7801\u4f4d\u4e8e /bfe_modules/mod_block","title":"\u6982\u8ff0"},{"location":"development/module/how_to_write_module/#_3","text":"","title":"\u914d\u7f6e\u7684\u52a0\u8f7d"},{"location":"development/module/how_to_write_module/#_4","text":"\u5bf9\u4e8e\u4e00\u4e2a\u6a21\u5757\uff0c\u5305\u62ec\u4e24\u79cd\u914d\u7f6e\uff1a - \u9759\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff1a\u5728BFE\u7a0b\u5e8f\u542f\u52a8\u7684\u65f6\u5019\u52a0\u8f7d + \u5bf9\u6bcf\u4e2a\u6a21\u5757\u6709\u4e00\u4e2a\u8fd9\u6837\u7684\u914d\u7f6e\u6587\u4ef6 + \u914d\u7f6e\u6587\u4ef6\u7684\u540d\u5b57\u548c\u6a21\u5757\u540d\u5b57\u4e00\u81f4\uff0c\u5e76\u4ee5.conf\u7ed3\u5c3e + \u5982\uff1amod_block.conf - \u53ef\u52a8\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff1a\u5728BFE\u7a0b\u5e8f\u542f\u52a8\u7684\u65f6\u5019\u52a0\u8f7d\uff0c\u5728BFE\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4e5f\u53ef\u4ee5\u52a8\u6001\u52a0\u8f7d + \u5bf9\u6bcf\u4e2a\u6a21\u5757\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8fd9\u6837\u7684\u914d\u7f6e\u6587\u4ef6 + \u914d\u7f6e\u6587\u4ef6\u7684\u540d\u5b57\u4e00\u822c\u4ee5.data\u7ed3\u5c3e + \u5982\uff1a\u5728mod_block\u4e0b\u6709 block_rules.data \u548c ip_blacklist.data \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u5e94\u7f16\u5199\u72ec\u7acb\u7684\u52a0\u8f7d\u903b\u8f91\u3002","title":"\u914d\u7f6e\u7684\u5206\u7c7b"},{"location":"development/module/how_to_write_module/#_5","text":"\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5e94\u8be5\u7edf\u4e00\u653e\u7f6e\u4e8e /conf \u76ee\u5f55\u4e0b\u4e3a\u6bcf\u4e2a\u6a21\u5757\u72ec\u7acb\u5efa\u7acb\u7684\u76ee\u5f55\u4e2d \u5982\uff1amod_block\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u90fd\u653e\u7f6e\u5728 /conf/mod_block \u4e2d","title":"\u914d\u7f6e\u6587\u4ef6\u7684\u653e\u7f6e"},{"location":"development/module/how_to_write_module/#_6","text":"\u65e0\u8bba\u5bf9\u4e8e\u9759\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff0c\u8fd8\u662f\u5bf9\u4e8e\u53ef\u52a8\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u7a0b\u5e8f\u6b63\u5e38\u7684\u8fd0\u884c\uff0c\u5728\u914d\u7f6e\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u90fd\u9700\u8981\u5bf9\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u6b63\u786e\u6027\u8fdb\u884c\u68c0\u67e5\u3002 - \u5728BFE\u7a0b\u5e8f\u542f\u52a8\u9636\u6bb5\uff0c\u5982\u679c\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25\uff0c\u5219BFE\u65e0\u6cd5\u542f\u52a8 - \u5728BFE\u7a0b\u5e8f\u542f\u52a8\u540e\uff0c\u5982\u679c\u6a21\u5757\u7684\u53ef\u52a8\u6001\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25\uff0cBFE\u4ecd\u7136\u4f1a\u7ee7\u7eed\u8fd0\u884c","title":"\u914d\u7f6e\u52a0\u8f7d\u7684\u68c0\u67e5"},{"location":"development/module/how_to_write_module/#_7","text":"\u5bf9\u4e8e\u53ef\u52a8\u6001\u52a0\u8f7d\u7684\u914d\u7f6e\uff0c\u9700\u8981\u5728BFE\u7528\u4e8e\u76d1\u63a7\u548c\u52a0\u8f7d\u7684\u4e13\u7528web server\u4e0a\u505a\u56de\u8c03\u6ce8\u518c\u3002\u8fd9\u6837\uff0c\u901a\u8fc7\u8bbf\u95eeBFE\u5bf9\u5916\u76d1\u63a7\u7aef\u53e3\u7684\u7279\u5b9aURL\uff0c\u5c31\u53ef\u4ee5\u89e6\u53d1\u67d0\u4e2a\u914d\u7f6e\u7684\u52a8\u6001\u52a0\u8f7d\u3002 \u4f8b\u5982\uff0c\u5728mod_block\u7684\u521d\u59cb\u5316\u51fd\u6570\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u7c7b\u4f3c\u4e0b\u9762\u7684\u903b\u8f91\uff0c\u5c31\u662f\u5728\u6ce8\u518c\u914d\u7f6e\u52a0\u8f7d\u7684\u56de\u8c03(\u8be6\u89c1 mod_block.go ): // register web handler for reload err = whs.RegisterHandler(web_monitor.WebHandleReload, m.name, m.loadConfData) if err != nil { ... }","title":"\u914d\u7f6e\u7684\u52a8\u6001\u52a0\u8f7d"},{"location":"development/module/how_to_write_module/#_8","text":"","title":"\u56de\u8c03\u51fd\u6570\u7684\u7f16\u5199\u548c\u6ce8\u518c"},{"location":"development/module/how_to_write_module/#_9","text":"\u6839\u636e\u6a21\u5757\u7684\u529f\u80fd\u9700\u6c42\uff0c\u9009\u62e9\u5408\u9002\u7684\u56de\u8c03\u70b9\uff0c\u5bf9\u5e94\u7f16\u5199\u56de\u8c03\u51fd\u6570\u3002 \u6ce8\u610f\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684\u56de\u8c03\u70b9\uff0c\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\u53ef\u80fd\u4e0d\u540c\u3002BFE\u6240\u63d0\u4f9b\u7684\u56de\u8c03\u70b9\u548c\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\uff0c\u53ef\u53c2\u8003 BFE\u7684\u56de\u8c03\u673a\u5236 \u4f8b\u5982\uff0c\u5728mod_block\u4e2d\uff0c\u7f16\u5199\u4e86\u4ee5\u4e0b\u4e24\u4e2a\u56de\u8c03\u51fd\u6570(\u8be6\u89c1 mod_block.go )\uff1a func ( m * ModuleBlock ) globalBlockHandler ( session * bfe_basic . Session ) int { ... } func ( m * ModuleBlock ) productBlockHandler ( request * bfe_basic . Request ) ( int , * bfe_http . Response ) { ... }","title":"\u56de\u8c03\u51fd\u6570\u7684\u7f16\u5199"},{"location":"development/module/how_to_write_module/#_10","text":"\u4e3a\u4e86\u8ba9\u56de\u8c03\u51fd\u6570\u751f\u6548\uff0c\u9700\u8981\u5728\u6a21\u5757\u521d\u59cb\u5316\u7684\u65f6\u5019\u5bf9\u56de\u8c03\u51fd\u6570\u8fdb\u884c\u6ce8\u518c\u3002 \u4f8b\u5982\uff0c\u5728mod_block\u4e2d\uff0c\u56de\u8c03\u51fd\u6570\u7684\u6ce8\u518c\u903b\u8f91\u5982\u4e0b(\u8be6\u89c1 mod_block.go )\uff1a func ( m * ModuleBlock ) Init ( cbs * bfe_module . BfeCallbacks , whs * web_monitor . WebHandlers , cr string ) error { ... // register handler err = cbs . AddFilter ( bfe_module . HandleAccept , m . globalBlockHandler ) if err != nil { ... } err = cbs . AddFilter ( bfe_module . HandleFoundProduct , m . productBlockHandler ) if err != nil { ... } ... }","title":"\u56de\u8c03\u51fd\u6570\u7684\u6ce8\u518c"},{"location":"development/module/how_to_write_module/#_11","text":"\u5bf9\u4e8e\u6bcf\u4e2aBFE\u7684\u6a21\u5757\uff0c\u5f3a\u70c8\u63a8\u8350\u901a\u8fc7BFE\u89c4\u5b9a\u7684\u673a\u5236\uff0c\u5411\u5916\u66b4\u9732\u8db3\u591f\u7684\u5185\u90e8\u72b6\u6001\u4fe1\u606f\u3002 \u5728\u6a21\u5757\u5bf9\u5916\u66b4\u9732\u5185\u90e8\u72b6\u6001\uff0c\u9700\u8981\u505a\u4ee5\u4e0b3\u6b65\uff1a - \u5b9a\u4e49\u72b6\u6001\u53d8\u91cf - \u6ce8\u518c\u663e\u793a\u5185\u90e8\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570 - \u5728\u4ee3\u7801\u4e2d\u63d2\u5165\u72b6\u6001\u8bbe\u7f6e\u903b\u8f91","title":"\u6a21\u5757\u72b6\u6001\u7684\u5c55\u793a"},{"location":"development/module/how_to_write_module/#_12","text":"\u9700\u8981\u9996\u5148\u8bbe\u8ba1\u5728\u6a21\u5757\u4e2d\u9700\u8981\u7edf\u8ba1\u54ea\u4e9b\u503c\uff0c\u5e76\u901a\u8fc7\u7ed3\u6784\u4f53\u6210\u5458\u53d8\u91cf\u7684\u65b9\u5f0f\u5b9a\u4e49\u51fa\u6765\u3002 \u5982\uff0c\u5728mod_block\u4e2d\uff0c\u6709\u5982\u4e0b\u5b9a\u4e49(\u8be6\u89c1 mod_block.go )\uff1a type ModuleBlockState struct { ConnTotal *metrics.Counter // all connnetion checked ConnAccept *metrics.Counter // connection passed ConnRefuse *metrics.Counter // connection refused ReqTotal *metrics.Counter // all request in ReqToCheck *metrics.Counter // request to check ReqAccept *metrics.Counter // request accepted ReqRefuse *metrics.Counter // request refused WrongCommand *metrics.Counter // request with condition satisfied, but wrong command } \u7136\u540e\uff0c\u8981\u5728ModuleBlock\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\u4e3aModuleBlockState\u7684\u6210\u5458\u53d8\u91cf\uff0c\u8fd8\u9700\u8981\u5b9a\u4e49\u4e00\u4e2aMetrics\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\uff0c\u7528\u4e8e\u76f8\u5173\u7684\u8ba1\u7b97\u3002 type ModuleBlock struct { ... state ModuleBlockState // module state metrics metrics.Metrics ... \u7136\u540e\uff0c\u9700\u8981\u5728\u6784\u9020\u51fd\u6570\u4e2d\u505a\u521d\u59cb\u5316\u7684\u64cd\u4f5c func NewModuleBlock() *ModuleBlock { m := new(ModuleBlock) m.name = ModBlock m.metrics.Init(&m.state, ModBlock, 0) ... }","title":"\u5b9a\u4e49\u72b6\u6001\u53d8\u91cf"},{"location":"development/module/how_to_write_module/#_13","text":"\u4e3a\u4e86\u53ef\u4ee5\u901a\u8fc7BFE\u7684\u76d1\u63a7\u7aef\u53e3\u67e5\u770b\u6a21\u5757\u7684\u5185\u90e8\u72b6\u6001\uff0c\u9700\u8981\u9996\u5148\u5b9e\u73b0\u56de\u8c03\u51fd\u6570\u3002 \u5982\uff0c\u5728mod_block\u4e2d\uff0c\u6709\u5982\u4e0b\u903b\u8f91(\u8be6\u89c1 mod_block.go )\uff0c\u5176\u4e2dmonitorHandlers()\u662f\u56de\u8c03\u51fd\u6570\uff1a func ( m * ModuleBlock ) getState ( params map [ string ] [] string ) ( [] byte , error ) { s : = m . metrics . GetAll () return s . Format ( params ) } func ( m * ModuleBlock ) getStateDiff ( params map [ string ] [] string ) ( [] byte , error ) { s : = m . metrics . GetDiff () return s . Format ( params ) } func ( m * ModuleBlock ) monitorHandlers () map [ string ] interface {} { handlers : = map [ string ] interface {}{ m . name : m . getState , m . name + \".diff\" : m . getStateDiff , } return handlers } \u7136\u540e\uff0c\u5728\u6a21\u5757\u7684\u521d\u59cb\u5316\u65f6\uff0c\u9700\u8981\u6ce8\u518c\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570 // register web handler for monitor err = web_monitor.RegisterHandlers(whs, web_monitor.WebHandleMonitor, m.monitorHandlers()) if err != nil { ... }","title":"\u6ce8\u518c\u663e\u793a\u5185\u90e8\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570"},{"location":"development/module/how_to_write_module/#_14","text":"\u5728\u6a21\u5757\u7684\u6267\u884c\u903b\u8f91\u4e2d\uff0c\u53ef\u4ee5\u63d2\u5165\u4e00\u4e9b\u7edf\u8ba1\u7684\u4ee3\u7801\u3002 \u5982\uff0c\u5728mod_block\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4ee3\u7801(\u8be6\u89c1 mod_block.go )\uff1a func (m *ModuleBlock) globalBlockHandler(session *bfe_basic.Session) int { ... m.state.ConnTotal.Inc(1) ... }","title":"\u5728\u4ee3\u7801\u4e2d\u63d2\u5165\u7edf\u8ba1\u903b\u8f91"},{"location":"development/module/overview/","text":"\u4ecb\u7ecd BFE\u7684\u6a21\u5757\uff08Module\uff09\u673a\u5236 \u4e3a\u4e86\u4fbf\u4e8e\u589e\u52a0\u65b0\u7684\u529f\u80fd\uff0cBFE\u5b9a\u4e49\u4e86\u4e00\u5957\u5b8c\u6574\u7684\u6a21\u5757\u673a\u5236\uff0c\u652f\u6301\u5feb\u901f\u5f00\u53d1\u65b0\u7684\u6a21\u5757 \u6a21\u5757\u673a\u5236\u7684\u539f\u7406 \u5728BFE\u7684\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u63d0\u4f9b\u591a\u4e2a\u56de\u8c03\u70b9 \u5bf9\u4e8e\u4e00\u4e2a\u6a21\u5757\uff0c\u53ef\u4ee5\u9488\u5bf9\u8fd9\u4e9b\u56de\u8c03\u70b9\u3001\u5bf9\u5e94\u7f16\u5199\u56de\u8c03\u51fd\u6570 \u5728\u6a21\u5757\u521d\u59cb\u5316\u65f6\uff0c\u628a\u8fd9\u4e9b\u56de\u8c03\u51fd\u6570\u6ce8\u518c\u5230\u5bf9\u5e94\u7684\u56de\u8c03\u70b9 \u5728\u5904\u7406\u4e00\u4e2a\u8fde\u63a5\u6216\u8bf7\u6c42\u65f6\uff0c\u5f53\u6267\u884c\u5230\u67d0\u4e2a\u56de\u8c03\u70b9\uff0c\u4f1a\u987a\u5e8f\u6267\u884c\u6240\u6709\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570 \u6df1\u5165\u4e86\u89e3BFE\u7684\u6a21\u5757\u673a\u5236 BFE\u7684\u56de\u8c03\u673a\u5236 \u5982\u4f55\u7f16\u5199\u4e00\u4e2a\u6a21\u5757","title":"\u6a21\u5757\u5f00\u53d1\u4ecb\u7ecd"},{"location":"development/module/overview/#_1","text":"","title":"\u4ecb\u7ecd"},{"location":"development/module/overview/#bfemodule","text":"\u4e3a\u4e86\u4fbf\u4e8e\u589e\u52a0\u65b0\u7684\u529f\u80fd\uff0cBFE\u5b9a\u4e49\u4e86\u4e00\u5957\u5b8c\u6574\u7684\u6a21\u5757\u673a\u5236\uff0c\u652f\u6301\u5feb\u901f\u5f00\u53d1\u65b0\u7684\u6a21\u5757","title":"BFE\u7684\u6a21\u5757\uff08Module\uff09\u673a\u5236"},{"location":"development/module/overview/#_2","text":"\u5728BFE\u7684\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u63d0\u4f9b\u591a\u4e2a\u56de\u8c03\u70b9 \u5bf9\u4e8e\u4e00\u4e2a\u6a21\u5757\uff0c\u53ef\u4ee5\u9488\u5bf9\u8fd9\u4e9b\u56de\u8c03\u70b9\u3001\u5bf9\u5e94\u7f16\u5199\u56de\u8c03\u51fd\u6570 \u5728\u6a21\u5757\u521d\u59cb\u5316\u65f6\uff0c\u628a\u8fd9\u4e9b\u56de\u8c03\u51fd\u6570\u6ce8\u518c\u5230\u5bf9\u5e94\u7684\u56de\u8c03\u70b9 \u5728\u5904\u7406\u4e00\u4e2a\u8fde\u63a5\u6216\u8bf7\u6c42\u65f6\uff0c\u5f53\u6267\u884c\u5230\u67d0\u4e2a\u56de\u8c03\u70b9\uff0c\u4f1a\u987a\u5e8f\u6267\u884c\u6240\u6709\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570","title":"\u6a21\u5757\u673a\u5236\u7684\u539f\u7406"},{"location":"development/module/overview/#bfe","text":"BFE\u7684\u56de\u8c03\u673a\u5236 \u5982\u4f55\u7f16\u5199\u4e00\u4e2a\u6a21\u5757","title":"\u6df1\u5165\u4e86\u89e3BFE\u7684\u6a21\u5757\u673a\u5236"},{"location":"example/block/","text":"\u9ed1\u540d\u5355\u5c01\u7981 \u573a\u666f\u8bf4\u660e \u5047\u8bbe\u6211\u4eec\u7684\u670d\u52a1\u906d\u53d7\u4e86\u6765\u81ea\u7279\u5b9aIP\u7684\u653b\u51fb\uff0c\u6216\u7279\u5b9a\u63a5\u53e3\uff08\u5982\u53d1\u653e\u4ee3\u91d1\u5238\uff09\u88ab\u6076\u610f\u8c03\u7528\uff1b\u5e0c\u671b\u53ef\u4ee5\u5bf9\u6307\u5b9a\u6d41\u91cf\u8fdb\u884c\u5c01\u7981\uff0c\u5982\uff1a \u5c01\u7981IP\uff1a\u653b\u51fb\u6d41\u91cf\u6765\u81ea\u67d0\u4e9b\u56fa\u5b9a\u7684IP\uff082.2.2.2\uff09 \u5c01\u7981PATH\uff1a\u653b\u51fb\u6d41\u91cf\u9488\u5bf9\u67d0\u4e9b\u7279\u5b9a\u7684PATH\uff08/bonus\uff09 \u914d\u7f6e\u8bf4\u660e \u5728\u6837\u4f8b\u914d\u7f6e(conf/)\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u65b0\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u5c01\u7981\u529f\u80fd Step 1. bfe\u542f\u7528mod_block\u6a21\u5757\uff08conf/bfe.conf) Modules = mod_block # \u542f\u7528 mod_block Step 2. \u914d\u7f6e\u4f7f\u7528\u7684block\u89c4\u5219\u6587\u4ef6\uff08\u5305\u62ec\u5168\u5c40IP\u9ed1\u540d\u5355\u548c\u5c01\u7981\u89c4\u5219\uff09\u8def\u5f84(mod_block/mod_block.conf) [basic] # \u5c01\u7981\u89c4\u5219\u6587\u4ef6\u8def\u5f84 ProductRulePath = mod_block/block_rules.data # IP\u9ed1\u540d\u5355\u6587\u4ef6\u8def\u5f84 IPBlacklistPath = mod_block/ip_blacklist.data Step 3. \u914d\u7f6e\u5168\u5c40IP\u9ed1\u540d\u5355 (mod_block/ip_blacklist.data) \u901a\u8fc7IP\u9ed1\u540d\u5355\u5c01\u7981IP\u5730\u5740\uff1a2.2.2.2 2.2.2.2 Step 4. \u914d\u7f6e\u5c01\u7981\u89c4\u5219 (mod_block/block_rules.data) { \"Version\": \"init version\", \"Config\": { \"example_product\": [{ \"action\": { \"cmd\": \"CLOSE\", \"params\": [] }, \"name\": \"block bonus\", \"cond\": \"req_path_in(\\\"/bonus\\\", false)\" }] } } Step 5. \u9a8c\u8bc1\u5c01\u7981\u89c4\u5219 curl -v -H \"host: example.org\" \"http://127.1:8080/bonus\" \u8fde\u63a5\u5c06\u4f1a\u88ab\u76f4\u63a5\u5173\u95ed","title":"\u9ed1\u540d\u5355\u5c01\u7981"},{"location":"example/block/#_1","text":"","title":"\u9ed1\u540d\u5355\u5c01\u7981"},{"location":"example/block/#_2","text":"\u5047\u8bbe\u6211\u4eec\u7684\u670d\u52a1\u906d\u53d7\u4e86\u6765\u81ea\u7279\u5b9aIP\u7684\u653b\u51fb\uff0c\u6216\u7279\u5b9a\u63a5\u53e3\uff08\u5982\u53d1\u653e\u4ee3\u91d1\u5238\uff09\u88ab\u6076\u610f\u8c03\u7528\uff1b\u5e0c\u671b\u53ef\u4ee5\u5bf9\u6307\u5b9a\u6d41\u91cf\u8fdb\u884c\u5c01\u7981\uff0c\u5982\uff1a \u5c01\u7981IP\uff1a\u653b\u51fb\u6d41\u91cf\u6765\u81ea\u67d0\u4e9b\u56fa\u5b9a\u7684IP\uff082.2.2.2\uff09 \u5c01\u7981PATH\uff1a\u653b\u51fb\u6d41\u91cf\u9488\u5bf9\u67d0\u4e9b\u7279\u5b9a\u7684PATH\uff08/bonus\uff09","title":"\u573a\u666f\u8bf4\u660e"},{"location":"example/block/#_3","text":"\u5728\u6837\u4f8b\u914d\u7f6e(conf/)\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u65b0\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u5c01\u7981\u529f\u80fd Step 1. bfe\u542f\u7528mod_block\u6a21\u5757\uff08conf/bfe.conf) Modules = mod_block # \u542f\u7528 mod_block Step 2. \u914d\u7f6e\u4f7f\u7528\u7684block\u89c4\u5219\u6587\u4ef6\uff08\u5305\u62ec\u5168\u5c40IP\u9ed1\u540d\u5355\u548c\u5c01\u7981\u89c4\u5219\uff09\u8def\u5f84(mod_block/mod_block.conf) [basic] # \u5c01\u7981\u89c4\u5219\u6587\u4ef6\u8def\u5f84 ProductRulePath = mod_block/block_rules.data # IP\u9ed1\u540d\u5355\u6587\u4ef6\u8def\u5f84 IPBlacklistPath = mod_block/ip_blacklist.data Step 3. \u914d\u7f6e\u5168\u5c40IP\u9ed1\u540d\u5355 (mod_block/ip_blacklist.data) \u901a\u8fc7IP\u9ed1\u540d\u5355\u5c01\u7981IP\u5730\u5740\uff1a2.2.2.2 2.2.2.2 Step 4. \u914d\u7f6e\u5c01\u7981\u89c4\u5219 (mod_block/block_rules.data) { \"Version\": \"init version\", \"Config\": { \"example_product\": [{ \"action\": { \"cmd\": \"CLOSE\", \"params\": [] }, \"name\": \"block bonus\", \"cond\": \"req_path_in(\\\"/bonus\\\", false)\" }] } } Step 5. \u9a8c\u8bc1\u5c01\u7981\u89c4\u5219 curl -v -H \"host: example.org\" \"http://127.1:8080/bonus\" \u8fde\u63a5\u5c06\u4f1a\u88ab\u76f4\u63a5\u5173\u95ed","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"example/client_auth/","text":"TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1 \u573a\u666f\u8bf4\u660e \u670d\u52a1\u7aef\u4f7f\u7528TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1\u5bf9\u5ba2\u6237\u7aef\u8fdb\u884c\u8ba4\u8bc1\u3002 \u914d\u7f6e\u6b65\u9aa4 Step 1. \u751f\u6210\u6839\u8bc1\u4e66 openssl genrsa - out root . key 2048 openssl req - new - x509 - days 365 - key root . key - out root . crt Step 2. \u521b\u5efa\u5ba2\u6237\u7aef\u8bc1\u4e66\u7b7e\u540d\u7533\u8bf7 openssl genrsa - out client . key 2048 openssl req - new - out client . csr - key client . key Step 3. \u751f\u6210\u5ba2\u6237\u7aef\u8bc1\u4e66 echo \"extendedKeyUsage = clientAuth\" > openssl . cnf openssl x509 - req - in client . csr - out client . crt - signkey client . key - CA root . crt - CAkey root . key - days 365 - extfile openssl . cnf Step 4. \u914d\u7f6e4\u5c42\u8d1f\u8f7d\u5747\u8861\u670d\u52a1 \u5ba2\u6237\u7aef\u8ba4\u8bc1\u9488\u5bf9VIP\u542f\u7528\uff0c\u914d\u7f6e4\u5c42\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\u662f\u4e3a\u4e86\u83b7\u53d6VIP\u3002 \u793a\u4f8b\u4e2d\uff0c\u4f7f\u7528HAproxy\u4f5c\u4e3a4\u5c42\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\uff0c\u901a\u8fc7PROXY\u534f\u8bae\u5c06VIP\u4f20\u9012\u7ed9BFE\uff0cHAproxy\u4e0eBFE\u540c\u673a\u90e8\u7f72\u3002 \u5b89\u88c5HAproxy\uff0c\u4e0b\u8f7d www.haproxy.org \u3002Ubuntu\u7cfb\u7edf\u53ef\u901a\u8fc7apt install haproxy\u5b89\u88c5\u3002 \u914d\u7f6eHAproxy\uff0c\u914d\u7f6e\u6587\u4ef6\uff08haproxy.cfg\uff09\u793a\u4f8b\uff1a global defaults mode tcp balance leastconn timeout client 3000 ms timeout server 3000 ms timeout connect 3000 ms frontend fr_server_http bind 0 . 0 . 0 . 0 : 7080 default_backend bk_server_http backend bk_server_http server srv1 0 . 0 . 0 . 0 : 8080 maxconn 2048 send - proxy frontend fr_server_https bind 0 . 0 . 0 . 0 : 7443 default_backend bk_server_https backend bk_server_https server srv1 0 . 0 . 0 . 0 : 8443 maxconn 2048 send - proxy \u542f\u52a8HAproxy haproxy -f haproxy.cfg Step 5. \u914d\u7f6eBFE\u5ba2\u6237\u7aef\u8bc1\u4e66\u6587\u4ef6\u5b58\u50a8\u8def\u5f84(conf/bfe.conf)\uff0c\u5c06root.crt\u590d\u5236\u5230tls_conf/client_ca\u76ee\u5f55 \u6ce8\uff1a\u6839\u8bc1\u4e66\u6587\u4ef6\u540e\u7f00\u540d\u5fc5\u987b\u4e3a.crt [server] ... Layer4LoadBalancer = \"PROXY\" ... [HttpsBasic] ... clientCABaseDir = tls_conf/client_ca ... \u4fee\u6539 conf/tls_conf_rule.data\uff0c\u5c06ClientAuth\u7f6e\u4e3atrue\uff0cClientCAName\u586b\u5199\u6839\u8bc1\u4e66\u6587\u4ef6\u540d\u3002 { \"Version\": \"12\", \"DefaultNextProtos\": [ \"http/1.1\" ], \"Config\": { \"example_product\": { \"VipConf\": [ \"127.0.0.1\" ], \"SniConf\": null, \"CertName\": \"example.org\", \"NextProtos\": [ \"h2;rate=0;isw=65535;mcs=200;level=0\", \"http/1.1\" ], \"Grade\": \"C\", \"ClientAuth\": true, \"ClientCAName\": \"root\" } } } \u542f\u52a8BFE ./bfe -c ../conf Step 6. \u9a8c\u8bc1\u914d\u7f6e openssl s_client -connect 127.0.0.1:7443 -cert client.crt -key client.key -state -quiet","title":"TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1"},{"location":"example/client_auth/#tls","text":"","title":"TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1"},{"location":"example/client_auth/#_1","text":"\u670d\u52a1\u7aef\u4f7f\u7528TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1\u5bf9\u5ba2\u6237\u7aef\u8fdb\u884c\u8ba4\u8bc1\u3002","title":"\u573a\u666f\u8bf4\u660e"},{"location":"example/client_auth/#_2","text":"Step 1. \u751f\u6210\u6839\u8bc1\u4e66 openssl genrsa - out root . key 2048 openssl req - new - x509 - days 365 - key root . key - out root . crt Step 2. \u521b\u5efa\u5ba2\u6237\u7aef\u8bc1\u4e66\u7b7e\u540d\u7533\u8bf7 openssl genrsa - out client . key 2048 openssl req - new - out client . csr - key client . key Step 3. \u751f\u6210\u5ba2\u6237\u7aef\u8bc1\u4e66 echo \"extendedKeyUsage = clientAuth\" > openssl . cnf openssl x509 - req - in client . csr - out client . crt - signkey client . key - CA root . crt - CAkey root . key - days 365 - extfile openssl . cnf Step 4. \u914d\u7f6e4\u5c42\u8d1f\u8f7d\u5747\u8861\u670d\u52a1 \u5ba2\u6237\u7aef\u8ba4\u8bc1\u9488\u5bf9VIP\u542f\u7528\uff0c\u914d\u7f6e4\u5c42\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\u662f\u4e3a\u4e86\u83b7\u53d6VIP\u3002 \u793a\u4f8b\u4e2d\uff0c\u4f7f\u7528HAproxy\u4f5c\u4e3a4\u5c42\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\uff0c\u901a\u8fc7PROXY\u534f\u8bae\u5c06VIP\u4f20\u9012\u7ed9BFE\uff0cHAproxy\u4e0eBFE\u540c\u673a\u90e8\u7f72\u3002 \u5b89\u88c5HAproxy\uff0c\u4e0b\u8f7d www.haproxy.org \u3002Ubuntu\u7cfb\u7edf\u53ef\u901a\u8fc7apt install haproxy\u5b89\u88c5\u3002 \u914d\u7f6eHAproxy\uff0c\u914d\u7f6e\u6587\u4ef6\uff08haproxy.cfg\uff09\u793a\u4f8b\uff1a global defaults mode tcp balance leastconn timeout client 3000 ms timeout server 3000 ms timeout connect 3000 ms frontend fr_server_http bind 0 . 0 . 0 . 0 : 7080 default_backend bk_server_http backend bk_server_http server srv1 0 . 0 . 0 . 0 : 8080 maxconn 2048 send - proxy frontend fr_server_https bind 0 . 0 . 0 . 0 : 7443 default_backend bk_server_https backend bk_server_https server srv1 0 . 0 . 0 . 0 : 8443 maxconn 2048 send - proxy \u542f\u52a8HAproxy haproxy -f haproxy.cfg Step 5. \u914d\u7f6eBFE\u5ba2\u6237\u7aef\u8bc1\u4e66\u6587\u4ef6\u5b58\u50a8\u8def\u5f84(conf/bfe.conf)\uff0c\u5c06root.crt\u590d\u5236\u5230tls_conf/client_ca\u76ee\u5f55 \u6ce8\uff1a\u6839\u8bc1\u4e66\u6587\u4ef6\u540e\u7f00\u540d\u5fc5\u987b\u4e3a.crt [server] ... Layer4LoadBalancer = \"PROXY\" ... [HttpsBasic] ... clientCABaseDir = tls_conf/client_ca ... \u4fee\u6539 conf/tls_conf_rule.data\uff0c\u5c06ClientAuth\u7f6e\u4e3atrue\uff0cClientCAName\u586b\u5199\u6839\u8bc1\u4e66\u6587\u4ef6\u540d\u3002 { \"Version\": \"12\", \"DefaultNextProtos\": [ \"http/1.1\" ], \"Config\": { \"example_product\": { \"VipConf\": [ \"127.0.0.1\" ], \"SniConf\": null, \"CertName\": \"example.org\", \"NextProtos\": [ \"h2;rate=0;isw=65535;mcs=200;level=0\", \"http/1.1\" ], \"Grade\": \"C\", \"ClientAuth\": true, \"ClientCAName\": \"root\" } } } \u542f\u52a8BFE ./bfe -c ../conf Step 6. \u9a8c\u8bc1\u914d\u7f6e openssl s_client -connect 127.0.0.1:7443 -cert client.crt -key client.key -state -quiet","title":"\u914d\u7f6e\u6b65\u9aa4"},{"location":"example/guide/","text":"\u4f7f\u7528\u793a\u4f8b \u8fd9\u91cc\u63d0\u4f9b\u4e86\u4f7f\u7528BFE\u7684\u7b80\u5355\u793a\u4f8b\u3002\u5982\u679c\u60a8\u8fd8\u672a\u5b89\u88c5BFE\uff0c\u8bf7\u53c2\u8003 BFE\u5b89\u88c5\u8bf4\u660e \u6d41\u91cf\u8f6c\u53d1 \u9ed1\u540d\u5355\u5c01\u7981 \u91cd\u5b9a\u5411 \u91cd\u5199 TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1","title":"\u4f7f\u7528\u793a\u4f8b"},{"location":"example/guide/#_1","text":"\u8fd9\u91cc\u63d0\u4f9b\u4e86\u4f7f\u7528BFE\u7684\u7b80\u5355\u793a\u4f8b\u3002\u5982\u679c\u60a8\u8fd8\u672a\u5b89\u88c5BFE\uff0c\u8bf7\u53c2\u8003 BFE\u5b89\u88c5\u8bf4\u660e \u6d41\u91cf\u8f6c\u53d1 \u9ed1\u540d\u5355\u5c01\u7981 \u91cd\u5b9a\u5411 \u91cd\u5199 TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1","title":"\u4f7f\u7528\u793a\u4f8b"},{"location":"example/install_on_openbsd/","text":"\u5728OpenBSD\u73af\u5883\u4e0b\u5b89\u88c5BFE \u4e0b\u6587\u4ee5OpenBSD 6.6\u53caBFE 0.4.0\u7248\u672c\u4e3a\u4f8b\uff0c\u8bf4\u660e\u5b89\u88c5\u6d41\u7a0b \u73af\u5883\u8bf4\u660e \u8bbe\u7f6eOpenBSD 6.6\u8f6f\u4ef6\u6e90\u5b89\u88c5\u8def\u5f84\u5e76\u5b89\u88c5\u76f8\u5173\u8f6f\u4ef6\u5305\uff1a amd64 # export PKG_PATH=\"https://mirrors.tuna.tsinghua.edu.cn/OpenBSD/6.6/packages/amd64/\" # pkg_add wget go i386 # export PKG_PATH=\"https://mirrors.tuna.tsinghua.edu.cn/OpenBSD/6.6/packages/i386/\" # pkg_add llvm wget go \u7531\u4e8eOpenBSD 6.6\u81ea\u5e26\u7684make \u65e0\u6cd5\u7f16\u8bd1BFE\uff0c\u56e0\u6b64\u9700\u8981\u5b89\u88c5gnu make amd64 # wget http://ftp.gnu.org/gnu/make/make-4.2.tar.bz2 # tar -xvjf make-4.2.tar.bz2 # cd make-4.2 # ./configure # make -j8 # make install i386 # cd /usr/bin # ln -s clang gcc # # wget http://ftp.gnu.org/gnu/make/make-4.2.tar.bz2 # tar -xvjf make-4.2.tar.bz2 # cd make-4.2 # ./configure # make -j8 # make install \u7f16\u8bd1\u5b89\u88c5BFE \u4e0b\u8f7dbfe 0.4.0 \u5e76\u7f16\u8bd1\u5b89\u88c5 # wget https://github.com/baidu/bfe/archive/v0.4.0.tar.gz # tar -xvzf v0.4.0.tar.gz # cd bfe-0.4.0/ # export GOPROXY=https://goproxy.io # /usr/local/bin/make -j8 # # mkdir -p /usr/local/baidu_bfe/bin # cp bfe /usr/local/baidu_bfe/bin # cp -fr conf/ /usr/local/baidu_bfe \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 # cd /usr/local/baidu_bfe/conf/mod_access/ # vi mod_access.conf LogDir = ../log :wq ## \u4fdd\u5b58\u9000\u51fa \u521b\u5efa\u542f\u52a8\u811a\u672c\u53ca\u8fd0\u884c # mkdir / root / run_bfe # cd / root / run_bfe # vi run_bfe . sh #!/ usr / local / bin / bash cd / usr / local / baidu_bfe / bin . / bfe - c .. / conf - l .. / log & : wq ## \u4fdd\u5b58\u9000\u51fa # chmod 755 run_bfe . sh # sh run_bfe . sh # ps | grep bfe 25625 p0 I 6 : 08 . 02 . / bfe - c .. / conf - l .. / log 79047 p0 R +/ 2 0 : 00 . 00 grep bfe","title":"\u5728OpenBSD\u73af\u5883\u4e0b\u5b89\u88c5BFE"},{"location":"example/install_on_openbsd/#openbsdbfe","text":"\u4e0b\u6587\u4ee5OpenBSD 6.6\u53caBFE 0.4.0\u7248\u672c\u4e3a\u4f8b\uff0c\u8bf4\u660e\u5b89\u88c5\u6d41\u7a0b","title":"\u5728OpenBSD\u73af\u5883\u4e0b\u5b89\u88c5BFE"},{"location":"example/install_on_openbsd/#_1","text":"\u8bbe\u7f6eOpenBSD 6.6\u8f6f\u4ef6\u6e90\u5b89\u88c5\u8def\u5f84\u5e76\u5b89\u88c5\u76f8\u5173\u8f6f\u4ef6\u5305\uff1a amd64 # export PKG_PATH=\"https://mirrors.tuna.tsinghua.edu.cn/OpenBSD/6.6/packages/amd64/\" # pkg_add wget go i386 # export PKG_PATH=\"https://mirrors.tuna.tsinghua.edu.cn/OpenBSD/6.6/packages/i386/\" # pkg_add llvm wget go \u7531\u4e8eOpenBSD 6.6\u81ea\u5e26\u7684make \u65e0\u6cd5\u7f16\u8bd1BFE\uff0c\u56e0\u6b64\u9700\u8981\u5b89\u88c5gnu make amd64 # wget http://ftp.gnu.org/gnu/make/make-4.2.tar.bz2 # tar -xvjf make-4.2.tar.bz2 # cd make-4.2 # ./configure # make -j8 # make install i386 # cd /usr/bin # ln -s clang gcc # # wget http://ftp.gnu.org/gnu/make/make-4.2.tar.bz2 # tar -xvjf make-4.2.tar.bz2 # cd make-4.2 # ./configure # make -j8 # make install","title":"\u73af\u5883\u8bf4\u660e"},{"location":"example/install_on_openbsd/#bfe","text":"\u4e0b\u8f7dbfe 0.4.0 \u5e76\u7f16\u8bd1\u5b89\u88c5 # wget https://github.com/baidu/bfe/archive/v0.4.0.tar.gz # tar -xvzf v0.4.0.tar.gz # cd bfe-0.4.0/ # export GOPROXY=https://goproxy.io # /usr/local/bin/make -j8 # # mkdir -p /usr/local/baidu_bfe/bin # cp bfe /usr/local/baidu_bfe/bin # cp -fr conf/ /usr/local/baidu_bfe \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 # cd /usr/local/baidu_bfe/conf/mod_access/ # vi mod_access.conf LogDir = ../log :wq ## \u4fdd\u5b58\u9000\u51fa \u521b\u5efa\u542f\u52a8\u811a\u672c\u53ca\u8fd0\u884c # mkdir / root / run_bfe # cd / root / run_bfe # vi run_bfe . sh #!/ usr / local / bin / bash cd / usr / local / baidu_bfe / bin . / bfe - c .. / conf - l .. / log & : wq ## \u4fdd\u5b58\u9000\u51fa # chmod 755 run_bfe . sh # sh run_bfe . sh # ps | grep bfe 25625 p0 I 6 : 08 . 02 . / bfe - c .. / conf - l .. / log 79047 p0 R +/ 2 0 : 00 . 00 grep bfe","title":"\u7f16\u8bd1\u5b89\u88c5BFE"},{"location":"example/redirect/","text":"\u91cd\u5b9a\u5411 \u573a\u666f\u8bf4\u660e \u5047\u8bbe\u6211\u4eec\u7684web server\u5df2\u7ecf\u5347\u7ea7\u4e3ahttps\uff0c\u5e0c\u671b\u5c06\u6240\u6709\u7684http\u8bf7\u6c42\u91cd\u5b9a\u5411\u81f3https \u57df\u540d\uff1aexample.org \u914d\u7f6e\u8bf4\u660e \u5728\u6837\u4f8b\u914d\u7f6e(conf/)\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u65b0\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u91cd\u5b9a\u5411\u884c\u4e3a Step 1. bfe\u542f\u7528mod_redirect\u6a21\u5757 (conf/bfe.conf) Modules = mod_redirect # \u542f\u7528 mod_redirect Step 2. \u914d\u7f6eredirect\u89c4\u5219\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84 (conf/mod_redirect/mod_redirect.conf) [basic] DataPath = mod_redirect/redirect.data Step 3. \u4fee\u6539redirect\u89c4\u5219\u6587\u4ef6 (conf/mod_redirect/redirect.data) \u5c06\u57df\u540d\u4e3aexample.org\u7684\u6240\u6709http\u8bf7\u6c42\u91cd\u5b9a\u5411\u4e3ahttps\u8bf7\u6c42 { \"Version\": \"init version\", \"Config\": { \"example_product\": [{ \"Cond\": \"!req_proto_secure() && req_host_in(\\\"example.org\\\")\", \"Actions\": [{ \"Cmd\": \"SCHEME_SET\", \"Params\": [ \"https\" ] }], \"Status\": 301 }] } } Step 4. \u9a8c\u8bc1\u7f6e\u89c4\u5219 curl -H \"host: example.org\" \"http://127.1:8080/test\" \u5c06\u8fd4\u56de301\u54cd\u5e94\uff0c\u54cd\u5e94Location\u5934\u90e8\u4e3ahttps://example.org/test","title":"\u91cd\u5b9a\u5411"},{"location":"example/redirect/#_1","text":"","title":"\u91cd\u5b9a\u5411"},{"location":"example/redirect/#_2","text":"\u5047\u8bbe\u6211\u4eec\u7684web server\u5df2\u7ecf\u5347\u7ea7\u4e3ahttps\uff0c\u5e0c\u671b\u5c06\u6240\u6709\u7684http\u8bf7\u6c42\u91cd\u5b9a\u5411\u81f3https \u57df\u540d\uff1aexample.org","title":"\u573a\u666f\u8bf4\u660e"},{"location":"example/redirect/#_3","text":"\u5728\u6837\u4f8b\u914d\u7f6e(conf/)\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u65b0\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u91cd\u5b9a\u5411\u884c\u4e3a Step 1. bfe\u542f\u7528mod_redirect\u6a21\u5757 (conf/bfe.conf) Modules = mod_redirect # \u542f\u7528 mod_redirect Step 2. \u914d\u7f6eredirect\u89c4\u5219\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84 (conf/mod_redirect/mod_redirect.conf) [basic] DataPath = mod_redirect/redirect.data Step 3. \u4fee\u6539redirect\u89c4\u5219\u6587\u4ef6 (conf/mod_redirect/redirect.data) \u5c06\u57df\u540d\u4e3aexample.org\u7684\u6240\u6709http\u8bf7\u6c42\u91cd\u5b9a\u5411\u4e3ahttps\u8bf7\u6c42 { \"Version\": \"init version\", \"Config\": { \"example_product\": [{ \"Cond\": \"!req_proto_secure() && req_host_in(\\\"example.org\\\")\", \"Actions\": [{ \"Cmd\": \"SCHEME_SET\", \"Params\": [ \"https\" ] }], \"Status\": 301 }] } } Step 4. \u9a8c\u8bc1\u7f6e\u89c4\u5219 curl -H \"host: example.org\" \"http://127.1:8080/test\" \u5c06\u8fd4\u56de301\u54cd\u5e94\uff0c\u54cd\u5e94Location\u5934\u90e8\u4e3ahttps://example.org/test","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"example/rewrite/","text":"\u91cd\u5199 \u573a\u666f\u8bf4\u660e \u5047\u8bbe\u6211\u4eec\u7684\u670d\u52a1\u5347\u7ea7\u540e\uff0c\u670d\u52a1\u8def\u5f84\u53d1\u751f\u4e86\u53d8\u5316\uff08/service => /v1/service\uff09 \u540c\u65f6\u6211\u4eec\u6709\u4e00\u4e9b\u5df2\u7ecf\u53d1\u5e03\u51fa\u53bb\u7684APP\uff0c\u5982\u679c\u4fee\u6539\u8bf7\u6c42\u8def\u5f84\uff0c\u9700\u8981\u7528\u6237\u4e0b\u8f7d\u5b89\u88c5\u65b0\u7248\u672c \u6211\u4eec\u5e0c\u671b\u8001\u7248\u672c\u7684APP\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bf7\u6c42\u65b0\u7684\u670d\u52a1\uff0c\u800c\u4e0d\u7528\u540c\u65f6\u7ef4\u62a4\u4e24\u5957\u670d\u52a1 \u914d\u7f6e\u8bf4\u660e \u5728\u6837\u4f8b\u914d\u7f6e(conf/)\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u65b0\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u529f\u80fd Step 1. bfe\u542f\u7528mod_rewrite\u6a21\u5757\uff08conf/bfe.conf) Modules = mod_rewrite # \u542f\u7528 mod_rewrite Step 2. \u914d\u7f6erewrite\u89c4\u5219\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84 (conf/mod_rewrite/mod_rewrite.conf) [basic] DataPath = mod_rewrite/rewrite.data Step 3. \u914d\u7f6erewrite\u89c4\u5219 \u8def\u5f84\u524d\u7f00\u4e3a/service\u7684\u6240\u6709\u8bf7\u6c42\u5747\u4f1a\u6dfb\u52a0/v1\u524d\u7f00\u540e\u8f6c\u53d1\u7ed9\u540e\u7aef\u670d\u52a1 { \"Version\": \"init version\", \"Config\": { \"example_product\": [{ \"Cond\": \"req_path_prefix_in(\\\"/service\\\", false)\", \"Actions\": [{ \"Cmd\": \"PATH_PREFIX_ADD\", \"Params\": [ \"/v1/\" ] }], \"Last\": true }] } } Step 4. \u9a8c\u8bc1\u914d\u7f6e\u89c4\u5219 curl -H \"host: example.org\" \"http://127.1:8080/service\" \u5bf9\u5e94\u540e\u7aef\u670d\u52a1\u96c6\u7fa4cluster_demo_dynamic\u6536\u5230\u7684\u8bf7\u6c42PATH\u4e3a\"v1/service\"","title":"\u91cd\u5199"},{"location":"example/rewrite/#_1","text":"","title":"\u91cd\u5199"},{"location":"example/rewrite/#_2","text":"\u5047\u8bbe\u6211\u4eec\u7684\u670d\u52a1\u5347\u7ea7\u540e\uff0c\u670d\u52a1\u8def\u5f84\u53d1\u751f\u4e86\u53d8\u5316\uff08/service => /v1/service\uff09 \u540c\u65f6\u6211\u4eec\u6709\u4e00\u4e9b\u5df2\u7ecf\u53d1\u5e03\u51fa\u53bb\u7684APP\uff0c\u5982\u679c\u4fee\u6539\u8bf7\u6c42\u8def\u5f84\uff0c\u9700\u8981\u7528\u6237\u4e0b\u8f7d\u5b89\u88c5\u65b0\u7248\u672c \u6211\u4eec\u5e0c\u671b\u8001\u7248\u672c\u7684APP\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bf7\u6c42\u65b0\u7684\u670d\u52a1\uff0c\u800c\u4e0d\u7528\u540c\u65f6\u7ef4\u62a4\u4e24\u5957\u670d\u52a1","title":"\u573a\u666f\u8bf4\u660e"},{"location":"example/rewrite/#_3","text":"\u5728\u6837\u4f8b\u914d\u7f6e(conf/)\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u65b0\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u529f\u80fd Step 1. bfe\u542f\u7528mod_rewrite\u6a21\u5757\uff08conf/bfe.conf) Modules = mod_rewrite # \u542f\u7528 mod_rewrite Step 2. \u914d\u7f6erewrite\u89c4\u5219\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84 (conf/mod_rewrite/mod_rewrite.conf) [basic] DataPath = mod_rewrite/rewrite.data Step 3. \u914d\u7f6erewrite\u89c4\u5219 \u8def\u5f84\u524d\u7f00\u4e3a/service\u7684\u6240\u6709\u8bf7\u6c42\u5747\u4f1a\u6dfb\u52a0/v1\u524d\u7f00\u540e\u8f6c\u53d1\u7ed9\u540e\u7aef\u670d\u52a1 { \"Version\": \"init version\", \"Config\": { \"example_product\": [{ \"Cond\": \"req_path_prefix_in(\\\"/service\\\", false)\", \"Actions\": [{ \"Cmd\": \"PATH_PREFIX_ADD\", \"Params\": [ \"/v1/\" ] }], \"Last\": true }] } } Step 4. \u9a8c\u8bc1\u914d\u7f6e\u89c4\u5219 curl -H \"host: example.org\" \"http://127.1:8080/service\" \u5bf9\u5e94\u540e\u7aef\u670d\u52a1\u96c6\u7fa4cluster_demo_dynamic\u6536\u5230\u7684\u8bf7\u6c42PATH\u4e3a\"v1/service\"","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"example/route/","text":"\u5206\u6d41\u8f6c\u53d1 \u573a\u666f\u8bf4\u660e \u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2ahttp server\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u5e76\u4e14\u67092\u4e2a\u670d\u52a1\u5b9e\u4f8b\uff1b1\u4e2a\u8d1f\u8d23\u5904\u7406\u9759\u6001\u6587\u4ef6\u8bf7\u6c42\uff0c\u53e6\u59161\u4e2a\u8d1f\u8d23\u5904\u7406\u52a8\u6001\u8bf7\u6c42 \u57df\u540d\uff1aexample.org \u4ee5/static\u5f00\u5934\u7684\u8bf7\u6c42\u90fd\u8f6c\u53d1\u81f3\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5b9e\u4f8b\uff1b\u5730\u5740\uff1a10.0.0.1:8001 \u5176\u4ed6\u7684\u8bf7\u6c42\u90fd\u8f6c\u53d1\u81f3\u52a8\u6001\u670d\u52a1\u5b9e\u4f8b\uff1b\u5730\u5740\uff1a10.0.0.1:8002 \u914d\u7f6e\u8bf4\u660e \u5728 \u6837\u4f8b\u914d\u7f6e \u4e0a\u7a0d\u505a\u4fee\u6539\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u8f6c\u53d1\u529f\u80fd Step 1.\u5728 conf/bfe.conf\u914d\u7f6e\u8f6c\u53d1\u529f\u80fd\u4f7f\u7528\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 hostRuleConf = server_data_conf / host_rule . data # \u57df\u540d\u89c4\u5219\u914d\u7f6e\u6587\u4ef6 routeRuleConf = server_data_conf / route_rule . data # \u5206\u6d41\u89c4\u5219\u914d\u7f6e\u6587\u4ef6 clusterConf = server_data_conf / cluster_conf . data # \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 clusterTableConf = cluster_conf / cluster_table . data # \u96c6\u7fa4\u5b9e\u4f8b\u5217\u8868\u914d\u7f6e\u6587\u4ef6 gslbConf = cluster_conf / gslb . data # \u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u6587\u4ef6 Step 2. \u914d\u7f6e\u57df\u540d\u89c4\u5219 (conf/server_data_conf/host_rule.data) { \"Version\": \"init version\", \"DefaultProduct\": null, \"Hosts\": { \"exampleTag\":[ \"example.org\" // \u57df\u540dexample.org=>\u57df\u540d\u6807\u7b7eexampleTag ] }, \"HostTags\": { \"example_product\":[ \"exampleTag\" // \u57df\u540d\u6807\u7b7eexampleTag=>\u4ea7\u54c1\u7ebf\u540d\u79f0example_product ] } } Step 3. \u914d\u7f6e\u96c6\u7fa4\u7684\u57fa\u7840\u4fe1\u606f (conf/server_data_conf/cluster_conf.data) \u914d\u7f6e\u96c6\u7fa4cluster_demo_static\u548ccluster_demo_dynamic\u5065\u5eb7\u68c0\u67e5\u7684\u53c2\u6570\uff0c\u5176\u4ed6\u5747\u4f7f\u7528\u9ed8\u8ba4\u503c { \"Version\": \"init version\", \"Config\": { \"cluster_demo_static\": { // \u96c6\u7fa4cluster_demo_static\u7684\u914d\u7f6e \"CheckConf\": { // \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e \"Schem\": \"http\", \"Uri\": \"/health_check\", \"Host\": \"example.org\", \"StatusCode\": 200 } }, \"cluster_demo_dynamic\": { // \u96c6\u7fa4cluster_demo_dynamic\u7684\u914d\u7f6e \"CheckConf\": { // \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e \"Schem\": \"http\", \"Uri\": \"/health_check\", \"Host\": \"example.org\", \"StatusCode\": 200 } } } } Step 4. \u914d\u7f6e\u96c6\u7fa4\u4e0b\u5b9e\u4f8b\u4fe1\u606f (conf/cluster_conf/cluster_table.data) { \"Version\": \"init version\", \"Config\": { \"cluster_demo_static\": { // \u96c6\u7fa4 => \u5b50\u96c6\u7fa4 => \u5b9e\u4f8b\u5217\u8868 \"demo_static.all\": [{ // \u5b50\u96c6\u7fa4demo_static.all \"Addr\": \"10.0.0.1\", // \u5b9e\u4f8b\u5730\u5740:10.0.0.1 \"Name\": \"static.A\", // \u5b9e\u4f8b\u540d:static.A \"Port\": 8001, // \u5b9e\u4f8b\u7aef\u53e3:8001 \"Weight\": 1 // \u5b9e\u4f8b\u6743\u91cd:1 }] }, \"cluster_demo_dynamic\": { \"demo_dynamic.all\": [{ \"Addr\": \"10.0.0.1\", \"Name\": \"dynamic.A\", \"Port\": 8002, \"Weight\": 1 }] } } } Step 5. \u914d\u7f6e\u5b50\u96c6\u7fa4\u5185\u8d1f\u8f7d\u5747\u8861 (conf/cluster_conf/gslb.data) { \"Hostname\": \"\", \"Ts\": \"0\", \"Clusters\": { \"cluster_demo_static\": { // \u96c6\u7fa4 => \u5b50\u96c6\u7fa4\u6743\u91cd \"GSLB_BLACKHOLE\": 0, // \u9ed1\u6d1e\u7684\u5206\u6d41\u6743\u91cd\u4e3a0\uff0c\u8868\u793a\u4e0d\u4e22\u5f03\u6d41\u91cf \"demo_static.all\": 100 // \u6743\u91cd\u4e3a100\uff0c\u8868\u793a\u5168\u90e8\u5206\u6d41\u5230demo_static.all }, \"cluster_demo_dynamic\": { \"GSLB_BLACKHOLE\": 0, \"demo_dynamic.all\": 100 } } } Step 6. \u914d\u7f6e\u5206\u6d41\u89c4\u5219 (conf/server_data_conf/route_rule.data) \u5c06/static\u5f00\u5934\u7684\u6d41\u91cf\u8f6c\u53d1\u5230cluster_demo_static\u96c6\u7fa4 \u5176\u4f59\u6d41\u91cf\u8f6c\u53d1\u5230cluster_demo_dynamic\u96c6\u7fa4 { \"Version\": \"init version\", \"ProductRule\": { \"example_product\": [ // \u4ea7\u54c1\u7ebf => \u5206\u6d41\u89c4\u5219 { // \u4ee5/static\u5f00\u5934\u7684path\u5206\u6d41\u5230cluster_demo_static\u96c6\u7fa4 \"Cond\": \"req_path_prefix_in(\\\"/static\\\", false)\", \"ClusterName\": \"cluster_demo_static\" }, { // \u5176\u4ed6\u6d41\u91cf\u5206\u6d41\u5230cluster_demo_dynamic\u96c6\u7fa4 \"Cond\": \"default_t()\", \"ClusterName\": \"cluster_demo_dynamic\" } ] } } Step 7. \u9a8c\u8bc1\u914d\u7f6e\u89c4\u5219 curl - H \"host: example.org\" \"http://127.1:8080/static/test.html\" # \u5c06\u8bf7\u6c42\u8f6c\u53d1\u81f3 10 . 0 . 0 . 1 : 8001 curl - H \"host: example.org\" \"http://127.1:8080/api/test\" # \u5c06\u8bf7\u6c42\u8f6c\u53d1\u81f3 10 . 0 . 0 . 1 : 8002","title":"\u6d41\u91cf\u8f6c\u53d1"},{"location":"example/route/#_1","text":"","title":"\u5206\u6d41\u8f6c\u53d1"},{"location":"example/route/#_2","text":"\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2ahttp server\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u5e76\u4e14\u67092\u4e2a\u670d\u52a1\u5b9e\u4f8b\uff1b1\u4e2a\u8d1f\u8d23\u5904\u7406\u9759\u6001\u6587\u4ef6\u8bf7\u6c42\uff0c\u53e6\u59161\u4e2a\u8d1f\u8d23\u5904\u7406\u52a8\u6001\u8bf7\u6c42 \u57df\u540d\uff1aexample.org \u4ee5/static\u5f00\u5934\u7684\u8bf7\u6c42\u90fd\u8f6c\u53d1\u81f3\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5b9e\u4f8b\uff1b\u5730\u5740\uff1a10.0.0.1:8001 \u5176\u4ed6\u7684\u8bf7\u6c42\u90fd\u8f6c\u53d1\u81f3\u52a8\u6001\u670d\u52a1\u5b9e\u4f8b\uff1b\u5730\u5740\uff1a10.0.0.1:8002","title":"\u573a\u666f\u8bf4\u660e"},{"location":"example/route/#_3","text":"\u5728 \u6837\u4f8b\u914d\u7f6e \u4e0a\u7a0d\u505a\u4fee\u6539\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e0a\u8ff0\u8f6c\u53d1\u529f\u80fd Step 1.\u5728 conf/bfe.conf\u914d\u7f6e\u8f6c\u53d1\u529f\u80fd\u4f7f\u7528\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 hostRuleConf = server_data_conf / host_rule . data # \u57df\u540d\u89c4\u5219\u914d\u7f6e\u6587\u4ef6 routeRuleConf = server_data_conf / route_rule . data # \u5206\u6d41\u89c4\u5219\u914d\u7f6e\u6587\u4ef6 clusterConf = server_data_conf / cluster_conf . data # \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 clusterTableConf = cluster_conf / cluster_table . data # \u96c6\u7fa4\u5b9e\u4f8b\u5217\u8868\u914d\u7f6e\u6587\u4ef6 gslbConf = cluster_conf / gslb . data # \u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u6587\u4ef6 Step 2. \u914d\u7f6e\u57df\u540d\u89c4\u5219 (conf/server_data_conf/host_rule.data) { \"Version\": \"init version\", \"DefaultProduct\": null, \"Hosts\": { \"exampleTag\":[ \"example.org\" // \u57df\u540dexample.org=>\u57df\u540d\u6807\u7b7eexampleTag ] }, \"HostTags\": { \"example_product\":[ \"exampleTag\" // \u57df\u540d\u6807\u7b7eexampleTag=>\u4ea7\u54c1\u7ebf\u540d\u79f0example_product ] } } Step 3. \u914d\u7f6e\u96c6\u7fa4\u7684\u57fa\u7840\u4fe1\u606f (conf/server_data_conf/cluster_conf.data) \u914d\u7f6e\u96c6\u7fa4cluster_demo_static\u548ccluster_demo_dynamic\u5065\u5eb7\u68c0\u67e5\u7684\u53c2\u6570\uff0c\u5176\u4ed6\u5747\u4f7f\u7528\u9ed8\u8ba4\u503c { \"Version\": \"init version\", \"Config\": { \"cluster_demo_static\": { // \u96c6\u7fa4cluster_demo_static\u7684\u914d\u7f6e \"CheckConf\": { // \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e \"Schem\": \"http\", \"Uri\": \"/health_check\", \"Host\": \"example.org\", \"StatusCode\": 200 } }, \"cluster_demo_dynamic\": { // \u96c6\u7fa4cluster_demo_dynamic\u7684\u914d\u7f6e \"CheckConf\": { // \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e \"Schem\": \"http\", \"Uri\": \"/health_check\", \"Host\": \"example.org\", \"StatusCode\": 200 } } } } Step 4. \u914d\u7f6e\u96c6\u7fa4\u4e0b\u5b9e\u4f8b\u4fe1\u606f (conf/cluster_conf/cluster_table.data) { \"Version\": \"init version\", \"Config\": { \"cluster_demo_static\": { // \u96c6\u7fa4 => \u5b50\u96c6\u7fa4 => \u5b9e\u4f8b\u5217\u8868 \"demo_static.all\": [{ // \u5b50\u96c6\u7fa4demo_static.all \"Addr\": \"10.0.0.1\", // \u5b9e\u4f8b\u5730\u5740:10.0.0.1 \"Name\": \"static.A\", // \u5b9e\u4f8b\u540d:static.A \"Port\": 8001, // \u5b9e\u4f8b\u7aef\u53e3:8001 \"Weight\": 1 // \u5b9e\u4f8b\u6743\u91cd:1 }] }, \"cluster_demo_dynamic\": { \"demo_dynamic.all\": [{ \"Addr\": \"10.0.0.1\", \"Name\": \"dynamic.A\", \"Port\": 8002, \"Weight\": 1 }] } } } Step 5. \u914d\u7f6e\u5b50\u96c6\u7fa4\u5185\u8d1f\u8f7d\u5747\u8861 (conf/cluster_conf/gslb.data) { \"Hostname\": \"\", \"Ts\": \"0\", \"Clusters\": { \"cluster_demo_static\": { // \u96c6\u7fa4 => \u5b50\u96c6\u7fa4\u6743\u91cd \"GSLB_BLACKHOLE\": 0, // \u9ed1\u6d1e\u7684\u5206\u6d41\u6743\u91cd\u4e3a0\uff0c\u8868\u793a\u4e0d\u4e22\u5f03\u6d41\u91cf \"demo_static.all\": 100 // \u6743\u91cd\u4e3a100\uff0c\u8868\u793a\u5168\u90e8\u5206\u6d41\u5230demo_static.all }, \"cluster_demo_dynamic\": { \"GSLB_BLACKHOLE\": 0, \"demo_dynamic.all\": 100 } } } Step 6. \u914d\u7f6e\u5206\u6d41\u89c4\u5219 (conf/server_data_conf/route_rule.data) \u5c06/static\u5f00\u5934\u7684\u6d41\u91cf\u8f6c\u53d1\u5230cluster_demo_static\u96c6\u7fa4 \u5176\u4f59\u6d41\u91cf\u8f6c\u53d1\u5230cluster_demo_dynamic\u96c6\u7fa4 { \"Version\": \"init version\", \"ProductRule\": { \"example_product\": [ // \u4ea7\u54c1\u7ebf => \u5206\u6d41\u89c4\u5219 { // \u4ee5/static\u5f00\u5934\u7684path\u5206\u6d41\u5230cluster_demo_static\u96c6\u7fa4 \"Cond\": \"req_path_prefix_in(\\\"/static\\\", false)\", \"ClusterName\": \"cluster_demo_static\" }, { // \u5176\u4ed6\u6d41\u91cf\u5206\u6d41\u5230cluster_demo_dynamic\u96c6\u7fa4 \"Cond\": \"default_t()\", \"ClusterName\": \"cluster_demo_dynamic\" } ] } } Step 7. \u9a8c\u8bc1\u914d\u7f6e\u89c4\u5219 curl - H \"host: example.org\" \"http://127.1:8080/static/test.html\" # \u5c06\u8bf7\u6c42\u8f6c\u53d1\u81f3 10 . 0 . 0 . 1 : 8001 curl - H \"host: example.org\" \"http://127.1:8080/api/test\" # \u5c06\u8bf7\u6c42\u8f6c\u53d1\u81f3 10 . 0 . 0 . 1 : 8002","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"faq/configuration/","text":"\u914d\u7f6e\u5e38\u89c1\u95ee\u9898 \u5982\u4f55\u542f\u7528TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1 \u5177\u4f53\u89c1 TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1\u793a\u4f8b \u5982\u4f55\u542f\u7528HTTP2\u534f\u8bae \u53c2\u8003 conf/tls_conf/tls_rule_conf.data \u914d\u7f6e\u8bf4\u660e","title":"\u914d\u7f6e\u76f8\u5173"},{"location":"faq/configuration/#_1","text":"","title":"\u914d\u7f6e\u5e38\u89c1\u95ee\u9898"},{"location":"faq/configuration/#tls","text":"\u5177\u4f53\u89c1 TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1\u793a\u4f8b","title":"\u5982\u4f55\u542f\u7528TLS\u5ba2\u6237\u7aef\u8ba4\u8bc1"},{"location":"faq/configuration/#http2","text":"\u53c2\u8003 conf/tls_conf/tls_rule_conf.data \u914d\u7f6e\u8bf4\u660e","title":"\u5982\u4f55\u542f\u7528HTTP2\u534f\u8bae"},{"location":"faq/development/","text":"\u5f00\u53d1\u5e38\u89c1\u95ee\u9898 \u5982\u4f55\u5f00\u53d1BFE\u6269\u5c55\u6a21\u5757 \u5177\u4f53\u89c1 \u6a21\u5757\u5f00\u53d1\u4ecb\u7ecd","title":"\u5f00\u53d1\u76f8\u5173"},{"location":"faq/development/#_1","text":"","title":"\u5f00\u53d1\u5e38\u89c1\u95ee\u9898"},{"location":"faq/development/#bfe","text":"\u5177\u4f53\u89c1 \u6a21\u5757\u5f00\u53d1\u4ecb\u7ecd","title":"\u5982\u4f55\u5f00\u53d1BFE\u6269\u5c55\u6a21\u5757"},{"location":"faq/installation/","text":"\u5b89\u88c5\u5e38\u89c1\u95ee\u9898 \u5b89\u88c5\u65f6\u9047\u5230go get\u8d85\u65f6\u9519\u8bef \u8bbe\u7f6eGOPROXY\u73af\u5883\u53d8\u91cf(go1.13\u53ca\u4ee5\u4e0a\u7248\u672c) $ go env -w GO111MODULE = on $ go env -w GOPROXY = https://goproxy.cn,direct \u8be6\u89c1 https://goproxy.cn \u6216 https://goproxy.io \u662f\u5426\u652f\u6301\u5728MAC/Windows\u73af\u5883\u7f16\u8bd1 BFE 0.7.0+\u7248\u672c\u5df2\u652f\u6301","title":"\u5b89\u88c5\u76f8\u5173"},{"location":"faq/installation/#_1","text":"","title":"\u5b89\u88c5\u5e38\u89c1\u95ee\u9898"},{"location":"faq/installation/#go-get","text":"\u8bbe\u7f6eGOPROXY\u73af\u5883\u53d8\u91cf(go1.13\u53ca\u4ee5\u4e0a\u7248\u672c) $ go env -w GO111MODULE = on $ go env -w GOPROXY = https://goproxy.cn,direct \u8be6\u89c1 https://goproxy.cn \u6216 https://goproxy.io","title":"\u5b89\u88c5\u65f6\u9047\u5230go get\u8d85\u65f6\u9519\u8bef"},{"location":"faq/installation/#macwindows","text":"BFE 0.7.0+\u7248\u672c\u5df2\u652f\u6301","title":"\u662f\u5426\u652f\u6301\u5728MAC/Windows\u73af\u5883\u7f16\u8bd1"},{"location":"faq/performance/","text":"\u6027\u80fd\u5e38\u89c1\u95ee\u9898 \u9047\u5230\u6027\u80fd\u95ee\u9898\u5982\u4f55\u8c03\u4f18 \u8bf7\u90ae\u4ef6\u53cd\u9988\u81f3bfe-osc@baidu.com\u83b7\u53d6\u5e2e\u52a9\uff0c\u540e\u7eed\u7248\u672c\u6587\u6863\u5c06\u63d0\u4f9b\u6027\u80fd\u8c03\u4f18\u6307\u5357","title":"\u6027\u80fd\u76f8\u5173"},{"location":"faq/performance/#_1","text":"","title":"\u6027\u80fd\u5e38\u89c1\u95ee\u9898"},{"location":"faq/performance/#_2","text":"\u8bf7\u90ae\u4ef6\u53cd\u9988\u81f3bfe-osc@baidu.com\u83b7\u53d6\u5e2e\u52a9\uff0c\u540e\u7eed\u7248\u672c\u6587\u6863\u5c06\u63d0\u4f9b\u6027\u80fd\u8c03\u4f18\u6307\u5357","title":"\u9047\u5230\u6027\u80fd\u95ee\u9898\u5982\u4f55\u8c03\u4f18"},{"location":"installation/install/","text":"\u5b89\u88c5\u8bf4\u660e \u5b89\u88c5\u65b9\u5f0f \u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0b\u8f7d\u5b89\u88c5 go\u65b9\u5f0f\u5b89\u88c5 snap\u65b9\u5f0f\u5b89\u88c5 \u5e73\u53f0\u652f\u6301 \u64cd\u4f5c\u7cfb\u7edf \u652f\u6301\u8bf4\u660e Linux OS \u652f\u6301 \u5efa\u8bae\u7684\u5f00\u53d1\u53ca\u90e8\u7f72\u73af\u5883 Mac OS \u652f\u6301 Windows OS \u652f\u6301","title":"\u5b89\u88c5\u6982\u8ff0"},{"location":"installation/install/#_1","text":"","title":"\u5b89\u88c5\u8bf4\u660e"},{"location":"installation/install/#_2","text":"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0b\u8f7d\u5b89\u88c5 go\u65b9\u5f0f\u5b89\u88c5 snap\u65b9\u5f0f\u5b89\u88c5","title":"\u5b89\u88c5\u65b9\u5f0f"},{"location":"installation/install/#_3","text":"\u64cd\u4f5c\u7cfb\u7edf \u652f\u6301\u8bf4\u660e Linux OS \u652f\u6301 \u5efa\u8bae\u7684\u5f00\u53d1\u53ca\u90e8\u7f72\u73af\u5883 Mac OS \u652f\u6301 Windows OS \u652f\u6301","title":"\u5e73\u53f0\u652f\u6301"},{"location":"installation/install_from_source/","text":"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 \u73af\u5883\u51c6\u5907 golang 1.13+ git \u6e90\u7801\u4e0b\u8f7d $ git clone https://github.com/baidu/bfe \u7f16\u8bd1 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u7f16\u8bd1: $ cd bfe $ make \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fd0\u884c\u6d4b\u8bd5: $ make test \u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4f4d\u7f6e: $ file output/bin/bfe output/bin/bfe: ELF 64 -bit LSB executable, ... \u8fd0\u884c \u57fa\u4e8e\u793a\u4f8b\u914d\u7f6e\u8fd0\u884cBFE: $ cd output/bin/ $ ./bfe -c ../conf -l ../log \u4e0b\u4e00\u6b65 \u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5"},{"location":"installation/install_from_source/#_1","text":"","title":"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5"},{"location":"installation/install_from_source/#_2","text":"golang 1.13+ git","title":"\u73af\u5883\u51c6\u5907"},{"location":"installation/install_from_source/#_3","text":"$ git clone https://github.com/baidu/bfe","title":"\u6e90\u7801\u4e0b\u8f7d"},{"location":"installation/install_from_source/#_4","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u7f16\u8bd1: $ cd bfe $ make \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fd0\u884c\u6d4b\u8bd5: $ make test \u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4f4d\u7f6e: $ file output/bin/bfe output/bin/bfe: ELF 64 -bit LSB executable, ...","title":"\u7f16\u8bd1"},{"location":"installation/install_from_source/#_5","text":"\u57fa\u4e8e\u793a\u4f8b\u914d\u7f6e\u8fd0\u884cBFE: $ cd output/bin/ $ ./bfe -c ../conf -l ../log","title":"\u8fd0\u884c"},{"location":"installation/install_from_source/#_6","text":"\u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"\u4e0b\u4e00\u6b65"},{"location":"installation/install_using_binaries/","text":"\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0b\u8f7d\u5b89\u88c5 \u4e0b\u8f7d\u6587\u4ef6 \u4ece\u8fd9\u91cc \u4e0b\u8f7dBFE \u5728\u5404\u5e73\u53f0\u7684\u6700\u65b0\u7248\u672c \u5b89\u88c5 \u5c06\u6587\u4ef6\u89e3\u538b\u5230\u5b89\u88c5\u76ee\u5f55: $ tar zxvf bfe_<version>_<os>_<arch>.tar.gz \u8fd0\u884c \u57fa\u4e8e\u793a\u4f8b\u914d\u7f6e\u8fd0\u884cBFE: $ cd bfe/bin $ ./bfe -c ../conf -l ../log \u4e0b\u4e00\u6b65 \u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0b\u8f7d\u5b89\u88c5"},{"location":"installation/install_using_binaries/#_1","text":"","title":"\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0b\u8f7d\u5b89\u88c5"},{"location":"installation/install_using_binaries/#_2","text":"\u4ece\u8fd9\u91cc \u4e0b\u8f7dBFE \u5728\u5404\u5e73\u53f0\u7684\u6700\u65b0\u7248\u672c","title":"\u4e0b\u8f7d\u6587\u4ef6"},{"location":"installation/install_using_binaries/#_3","text":"\u5c06\u6587\u4ef6\u89e3\u538b\u5230\u5b89\u88c5\u76ee\u5f55: $ tar zxvf bfe_<version>_<os>_<arch>.tar.gz","title":"\u5b89\u88c5"},{"location":"installation/install_using_binaries/#_4","text":"\u57fa\u4e8e\u793a\u4f8b\u914d\u7f6e\u8fd0\u884cBFE: $ cd bfe/bin $ ./bfe -c ../conf -l ../log","title":"\u8fd0\u884c"},{"location":"installation/install_using_binaries/#_5","text":"\u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"\u4e0b\u4e00\u6b65"},{"location":"installation/install_using_go/","text":"go\u65b9\u5f0f\u5b89\u88c5 \u73af\u5883\u51c6\u5907 golang 1.13+ \u5b89\u88c5 \u83b7\u53d6\u5e76\u5b89\u88c5 $ go get github.com/baidu/bfe \u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4f4d\u7f6e: ${GOPATH}/bin/bfe \u8fd0\u884c \u57fa\u4e8e\u793a\u4f8b\u914d\u7f6e\u8fd0\u884cBFE: $ cd ${ GOPATH } /bin/ $ ./bfe -c ${ GOPATH } /src/github.com/baidu/bfe/conf/ \u4e0b\u4e00\u6b65 \u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"go\u65b9\u5f0f\u5b89\u88c5"},{"location":"installation/install_using_go/#go","text":"","title":"go\u65b9\u5f0f\u5b89\u88c5"},{"location":"installation/install_using_go/#_1","text":"golang 1.13+","title":"\u73af\u5883\u51c6\u5907"},{"location":"installation/install_using_go/#_2","text":"\u83b7\u53d6\u5e76\u5b89\u88c5 $ go get github.com/baidu/bfe \u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6\u4f4d\u7f6e: ${GOPATH}/bin/bfe","title":"\u5b89\u88c5"},{"location":"installation/install_using_go/#_3","text":"\u57fa\u4e8e\u793a\u4f8b\u914d\u7f6e\u8fd0\u884cBFE: $ cd ${ GOPATH } /bin/ $ ./bfe -c ${ GOPATH } /src/github.com/baidu/bfe/conf/","title":"\u8fd0\u884c"},{"location":"installation/install_using_go/#_4","text":"\u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"\u4e0b\u4e00\u6b65"},{"location":"installation/install_using_snap/","text":"SNAP\u65b9\u5f0f\u5b89\u88c5 \u73af\u5883\u51c6\u5907 \u5728Linux\u73af\u5883\u53ef\u4ee5\u4f7f\u7528snap\u5de5\u5177\u5b89\u88c5bfe\u3002\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u8fd8\u672a\u5b89\u88c5snap\u5de5\u5177\uff0c\u53c2\u89c1 \u5b89\u88c5snap \u5b89\u88c5 \u6267\u884c\u5982\u4e0b\u547d\u4ee4: $ sudo snap install --edge bfe \u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e: /var/snap/bfe/common/conf/ \u65e5\u5fd7\u6587\u4ef6\u4f4d\u4e8e: /var/snap/bfe/common/log \u8fd0\u884c \u6267\u884c\u5982\u4e0b\u547d\u4ee4: $ sudo /snap/bin/bfe \u4e0b\u4e00\u6b65 \u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"snap\u65b9\u5f0f\u5b89\u88c5"},{"location":"installation/install_using_snap/#snap","text":"","title":"SNAP\u65b9\u5f0f\u5b89\u88c5"},{"location":"installation/install_using_snap/#_1","text":"\u5728Linux\u73af\u5883\u53ef\u4ee5\u4f7f\u7528snap\u5de5\u5177\u5b89\u88c5bfe\u3002\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u8fd8\u672a\u5b89\u88c5snap\u5de5\u5177\uff0c\u53c2\u89c1 \u5b89\u88c5snap","title":"\u73af\u5883\u51c6\u5907"},{"location":"installation/install_using_snap/#_2","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4: $ sudo snap install --edge bfe \u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e: /var/snap/bfe/common/conf/ \u65e5\u5fd7\u6587\u4ef6\u4f4d\u4e8e: /var/snap/bfe/common/log","title":"\u5b89\u88c5"},{"location":"installation/install_using_snap/#_3","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4: $ sudo /snap/bin/bfe","title":"\u8fd0\u884c"},{"location":"installation/install_using_snap/#_4","text":"\u4e86\u89e3 \u57fa\u672c\u529f\u80fd\u914d\u7f6e\u4f7f\u7528","title":"\u4e0b\u4e00\u6b65"},{"location":"introduction/balance/","text":"\u8d1f\u8f7d\u5747\u8861 \u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 \u673a\u5236\u8bf4\u660e BFE\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u7684\u5b50\u96c6\u7fa4\u7684\u6d41\u91cf\u5206\u914d\u6bd4\u4f8b\u3002 \u8be5\u914d\u7f6e\u4e2d\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u865a\u62df\u7684\u5b50\u96c6\u7fa4\uff0cBLACKHOLE\uff08\u9ed1\u6d1e\uff09\u3002\u5206\u5411\u9ed1\u6d1e\u7684\u6d41\u91cf\u4f1a\u88ab\u4e22\u5f03\u3002\u5b83\u53ef\u4ee5\u7528\u6765\u9632\u6b62\u5b50\u96c6\u7fa4\u8fc7\u8f7d\u3002 \u793a\u4f8b\u573a\u666f \u5047\u8bbe\u57fa\u672c\u573a\u666f\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5171\u4e24\u4e2aIDC\uff1aIDC1\u548cIDC2 \u4e24\u4e2aBFE\u96c6\u7fa4\uff1aBFE1\u548cBFE2 \u540e\u7aef\u4ea7\u54c1\u7ebf\u7684\u96c6\u7fa4\u6709\u4e24\u4e2a\u5b50\u96c6\u7fa4\uff1a\u5b50\u96c6\u7fa41\u548c\u5b50\u96c6\u7fa42 BFE\u96c6\u7fa4\uff08BFE1\u548cBFE2\uff09\u53ef\u4ee5\u6839\u636e\u5b50\u96c6\u7fa4\uff08\u5916\u52a0Blackhole\uff09\u5206\u6d41\u6bd4\u4f8b\u7684\u914d\u7f6e\uff0c\u5206\u53d1\u6d41\u91cf\u3002\u5982\uff1a BFE1\u96c6\u7fa4\u7684\u5206\u6d41\u914d\u7f6e\u4e3a\uff1a{\u5b50\u96c6\u7fa41:w11\uff0c\u5b50\u96c6\u7fa42:w12, Blackhole:w1B} BFE2\u96c6\u7fa4\u7684\u5206\u6d41\u914d\u7f6e\u4e3a\uff1a{\u5b50\u96c6\u7fa41:w21\uff0c\u5b50\u96c6\u7fa42:w22, Blackhole:w2B} BFE\u5b9e\u4f8b\u6839\u636e\u4e0a\u8ff0\u914d\u7f6e\u505aWRR\u8c03\u5ea6\uff08\u52a0\u6743\u8f6e\u8be2\uff09\uff0c\u5411\u5b50\u96c6\u7fa4\u8f6c\u53d1\u8bf7\u6c42\u3002 \u4f8b\u5982\uff0c\u5f53BFE1\u7684\u5206\u6d41\u914d\u7f6e{w11\uff0cw12, w1B}\u4e3a{45\uff0c45\uff0c10}\u65f6\uff0c\u8be5\u96c6\u7fa4\u5728BFE1\u8f6c\u53d1\u7ed9\u5b50\u96c6\u7fa41\u3001\u5b50\u96c6\u7fa42\u3001Blackhole\u7684\u6d41\u91cf\u6bd4\u4f8b\u4f9d\u6b21\u4e3a\uff1a45%\u300145%\u300110%\u3002 \u901a\u8fc7\u4fee\u6539\u4e0a\u8ff0\u914d\u7f6e\uff0c\u53ef\u4ee5\u5c06\u6d41\u91cf\u5728\u4e0d\u540c\u7684\u5b50\u96c6\u7fa4\u4e4b\u95f4\u5207\u6362\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3001\u5feb\u901f\u6b62\u635f\u3001\u8fc7\u8f7d\u4fdd\u62a4\u7b49\u76ee\u7684\u3002 \u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 \u673a\u5236\u8bf4\u660e \u5728\u540c\u4e00\u5b50\u96c6\u7fa4\u5185\u7684\u591a\u4e2a\u5b9e\u4f8b\u95f4\uff0cBFE\u652f\u6301\u4f7f\u7528\u591a\u79cd\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\uff1a WRR: \u52a0\u6743\u8f6e\u8be2\u7b97\u6cd5 WLC: \u52a0\u6743\u6700\u5c0f\u8fde\u63a5\u6570 \u5982\u5b9e\u4f8b\u7684\u5904\u7406\u80fd\u529b\u4e0d\u540c\uff0c\u53ef\u4ee5\u5206\u914d\u4e0d\u540c\u7684\u6743\u91cd\u3002 \u5065\u5eb7\u68c0\u67e5 \u5bf9\u4e8eBFE\u4e0b\u6e38\u7684\u6bcf\u4e00\u4e2a\u5b9e\u4f8b\uff0cBFE\u4f1a\u7ef4\u62a4\u4e00\u4e2a\u72b6\u6001\u673a\uff0c\u5305\u542b2\u4e2a\u72b6\u6001\uff1a \u6b63\u5e38\u72b6\u6001\uff1a\u8fd9\u4e2a\u5b9e\u4f8b\u53ef\u4ee5\u6b63\u5e38\u5904\u7406BFE\u8f6c\u53d1\u7684\u8bf7\u6c42 \u5065\u5eb7\u68c0\u67e5\u72b6\u6001\uff1a\u5b9e\u4f8b\u6682\u65f6\u4e0d\u53ef\u7528\uff0cBFE\u5bf9\u8fd9\u4e2a\u5b9e\u4f8b\u542f\u52a8\u5065\u5eb7\u68c0\u67e5\uff0c\u76f4\u5230\u8fd9\u4e2a\u5b9e\u4f8b\u6062\u590d\u6b63\u5e38\u4e3a\u6b62 \u4ece\u6b63\u5e38\u72b6\u6001\u5207\u6362\u5230\u5065\u5eb7\u68c0\u67e5\u72b6\u6001\u7684\u6761\u4ef6\uff1a \u5efa\u7acb\u8fde\u63a5\u6216\u8f6c\u53d1\u8bf7\u6c42\u7684\u8fde\u7eed\u5931\u8d25\u6b21\u6570\u8d85\u8fc7\u4e00\u5b9a\u7684\u9608\u503c \u5728\u5065\u5eb7\u68c0\u67e5\u72b6\u6001\uff1a BFE\u4f1a\u5b9a\u671f\u5411\u5b9e\u4f8b\u53d1\u9001\u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42 \u4ece\u5065\u5eb7\u68c0\u67e5\u72b6\u6001\u5207\u6362\u5230\u6b63\u5e38\u72b6\u6001\u7684\u6761\u4ef6\uff1a BFE\u4ece\u8be5\u5b9e\u4f8b\u6536\u5230\u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42\u7684\u6b63\u786e\u54cd\u5e94 \u5931\u8d25\u91cd\u8bd5\u673a\u5236 BFE\u5728\u8f6c\u53d1\u65f6\uff0c\u652f\u6301\u4ee5\u4e0b\u4e24\u79cd\u5931\u8d25\u91cd\u8bd5\u673a\u5236\uff1a \u540c\u5b50\u96c6\u7fa4\u91cd\u8bd5 \u5728\u539f\u76ee\u6807\u5b50\u96c6\u7fa4\u5185\u8fdb\u884c\u91cd\u8bd5 \u8de8\u5b50\u96c6\u7fa4\u91cd\u8bd5 \u5728\u539f\u76ee\u6807\u5b50\u96c6\u7fa4\u4e4b\u5916\u3001\u4f7f\u7528\u53e6\u5916\u4e00\u4e2a\u5b50\u96c6\u7fa4\u8fdb\u884c\u91cd\u8bd5 \u8fde\u63a5\u6c60 BFE\u548c\u4e0b\u6e38\u5b9e\u4f8b\u7684\u8fde\u63a5\u652f\u6301\u4e24\u79cd\u65b9\u5f0f\uff1a \u77ed\u8fde\u63a5\u65b9\u5f0f\uff1a\u6bcf\u6b21BFE\u5411\u4e0b\u6e38\u5b9e\u4f8b\u8f6c\u53d1\u8bf7\u6c42\uff0c\u5747\u9700\u8981\u5efa\u7acb\u65b0\u7684TCP\u8fde\u63a5 \u8fde\u63a5\u6c60\u65b9\u5f0f\uff1a BFE\u4e3a\u6bcf\u4e2a\u4e0b\u6e38\u5b9e\u4f8b\u7ef4\u62a4\u4e00\u4e2a\u8fde\u63a5\u6c60 \u5f53BFE\u9700\u8981\u5411\u67d0\u4e2a\u4e0b\u6e38\u5b9e\u4f8b\u8f6c\u53d1\u8bf7\u6c42\u65f6\uff1a \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u6709idle\u8fde\u63a5\uff0c\u5219\u590d\u7528\u8fd9\u4e2a\u8fde\u63a5 \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u6ca1\u6709idle\u8fde\u63a5\uff0c\u5219\u4f1a\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684TCP\u8fde\u63a5 \u5f53BFE\u5904\u7406\u5b8c\u4e00\u4e2a\u8bf7\u6c42\u65f6 \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u7684idle\u8fde\u63a5\u6570\u91cf\u5c0f\u4e8e\u8fde\u63a5\u6c60\u7684\u5927\u5c0f\uff0c\u5219\u5c06\u5f53\u524d\u4f7f\u7528\u7684\u8fde\u63a5\u653e\u5165\u8fde\u63a5\u6c60 \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u7684idle\u8fde\u63a5\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e\u8fde\u63a5\u6c60\u7684\u5927\u5c0f\uff0c\u5219\u5173\u95ed\u5f53\u524d\u4f7f\u7528\u7684\u8fde\u63a5 \u4f1a\u8bdd\u4fdd\u6301 BFE\u5411\u4e0b\u6e38\u8f6c\u53d1\u8bf7\u6c42\u65f6\uff0c\u652f\u6301\u5c06\u76f8\u540c\u6765\u6e90\u8bf7\u6c42\uff0c\u8f6c\u53d1\u81f3\u56fa\u5b9a\u7684\u4e1a\u52a1\u540e\u7aef\uff08\u67d0\u4e2a\u5b50\u96c6\u7fa4\u6216\u67d0\u4e2a\u5b9e\u4f8b\uff09 \u8bf7\u6c42\u6765\u6e90\u6807\u8bc6\uff1a \u57fa\u4e8e\u8bf7\u6c42\u6765\u6e90IP \u57fa\u4e8e\u8bf7\u6c42\u7279\u5b9a\u5934\u90e8\uff0c\u4f8b\u5982\u8bf7\u6c42Cookie\u7b49 \u4f1a\u8bdd\u4fdd\u6301\u7ea7\u522b\uff1a \u5b50\u96c6\u7fa4\u7ea7\u522b\uff1a\u76f8\u540c\u6765\u6e90\u8bf7\u6c42\uff0c\u88ab\u8f6c\u53d1\u81f3\u56fa\u5b9a\u7684\u4e1a\u52a1\u5b50\u96c6\u7fa4\uff08\u6ce8\uff1a\u5b50\u96c6\u7fa4\u4e2d\u7684\u4efb\u610f\u5b9e\u4f8b\uff09 \u5b9e\u4f8b\u7ea7\u522b\uff1a\u76f8\u540c\u6765\u6e90\u8bf7\u6c42\uff0c\u88ab\u8f6c\u53d1\u81f3\u56fa\u5b9a\u7684\u4e1a\u52a1\u5b9e\u4f8b","title":"\u6d41\u91cf\u8d1f\u8f7d\u5747\u8861"},{"location":"introduction/balance/#_1","text":"","title":"\u8d1f\u8f7d\u5747\u8861"},{"location":"introduction/balance/#_2","text":"","title":"\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861"},{"location":"introduction/balance/#_3","text":"BFE\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u7684\u5b50\u96c6\u7fa4\u7684\u6d41\u91cf\u5206\u914d\u6bd4\u4f8b\u3002 \u8be5\u914d\u7f6e\u4e2d\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u865a\u62df\u7684\u5b50\u96c6\u7fa4\uff0cBLACKHOLE\uff08\u9ed1\u6d1e\uff09\u3002\u5206\u5411\u9ed1\u6d1e\u7684\u6d41\u91cf\u4f1a\u88ab\u4e22\u5f03\u3002\u5b83\u53ef\u4ee5\u7528\u6765\u9632\u6b62\u5b50\u96c6\u7fa4\u8fc7\u8f7d\u3002","title":"\u673a\u5236\u8bf4\u660e"},{"location":"introduction/balance/#_4","text":"\u5047\u8bbe\u57fa\u672c\u573a\u666f\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5171\u4e24\u4e2aIDC\uff1aIDC1\u548cIDC2 \u4e24\u4e2aBFE\u96c6\u7fa4\uff1aBFE1\u548cBFE2 \u540e\u7aef\u4ea7\u54c1\u7ebf\u7684\u96c6\u7fa4\u6709\u4e24\u4e2a\u5b50\u96c6\u7fa4\uff1a\u5b50\u96c6\u7fa41\u548c\u5b50\u96c6\u7fa42 BFE\u96c6\u7fa4\uff08BFE1\u548cBFE2\uff09\u53ef\u4ee5\u6839\u636e\u5b50\u96c6\u7fa4\uff08\u5916\u52a0Blackhole\uff09\u5206\u6d41\u6bd4\u4f8b\u7684\u914d\u7f6e\uff0c\u5206\u53d1\u6d41\u91cf\u3002\u5982\uff1a BFE1\u96c6\u7fa4\u7684\u5206\u6d41\u914d\u7f6e\u4e3a\uff1a{\u5b50\u96c6\u7fa41:w11\uff0c\u5b50\u96c6\u7fa42:w12, Blackhole:w1B} BFE2\u96c6\u7fa4\u7684\u5206\u6d41\u914d\u7f6e\u4e3a\uff1a{\u5b50\u96c6\u7fa41:w21\uff0c\u5b50\u96c6\u7fa42:w22, Blackhole:w2B} BFE\u5b9e\u4f8b\u6839\u636e\u4e0a\u8ff0\u914d\u7f6e\u505aWRR\u8c03\u5ea6\uff08\u52a0\u6743\u8f6e\u8be2\uff09\uff0c\u5411\u5b50\u96c6\u7fa4\u8f6c\u53d1\u8bf7\u6c42\u3002 \u4f8b\u5982\uff0c\u5f53BFE1\u7684\u5206\u6d41\u914d\u7f6e{w11\uff0cw12, w1B}\u4e3a{45\uff0c45\uff0c10}\u65f6\uff0c\u8be5\u96c6\u7fa4\u5728BFE1\u8f6c\u53d1\u7ed9\u5b50\u96c6\u7fa41\u3001\u5b50\u96c6\u7fa42\u3001Blackhole\u7684\u6d41\u91cf\u6bd4\u4f8b\u4f9d\u6b21\u4e3a\uff1a45%\u300145%\u300110%\u3002 \u901a\u8fc7\u4fee\u6539\u4e0a\u8ff0\u914d\u7f6e\uff0c\u53ef\u4ee5\u5c06\u6d41\u91cf\u5728\u4e0d\u540c\u7684\u5b50\u96c6\u7fa4\u4e4b\u95f4\u5207\u6362\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3001\u5feb\u901f\u6b62\u635f\u3001\u8fc7\u8f7d\u4fdd\u62a4\u7b49\u76ee\u7684\u3002","title":"\u793a\u4f8b\u573a\u666f"},{"location":"introduction/balance/#_5","text":"","title":"\u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861"},{"location":"introduction/balance/#_6","text":"\u5728\u540c\u4e00\u5b50\u96c6\u7fa4\u5185\u7684\u591a\u4e2a\u5b9e\u4f8b\u95f4\uff0cBFE\u652f\u6301\u4f7f\u7528\u591a\u79cd\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\uff1a WRR: \u52a0\u6743\u8f6e\u8be2\u7b97\u6cd5 WLC: \u52a0\u6743\u6700\u5c0f\u8fde\u63a5\u6570 \u5982\u5b9e\u4f8b\u7684\u5904\u7406\u80fd\u529b\u4e0d\u540c\uff0c\u53ef\u4ee5\u5206\u914d\u4e0d\u540c\u7684\u6743\u91cd\u3002","title":"\u673a\u5236\u8bf4\u660e"},{"location":"introduction/balance/#_7","text":"\u5bf9\u4e8eBFE\u4e0b\u6e38\u7684\u6bcf\u4e00\u4e2a\u5b9e\u4f8b\uff0cBFE\u4f1a\u7ef4\u62a4\u4e00\u4e2a\u72b6\u6001\u673a\uff0c\u5305\u542b2\u4e2a\u72b6\u6001\uff1a \u6b63\u5e38\u72b6\u6001\uff1a\u8fd9\u4e2a\u5b9e\u4f8b\u53ef\u4ee5\u6b63\u5e38\u5904\u7406BFE\u8f6c\u53d1\u7684\u8bf7\u6c42 \u5065\u5eb7\u68c0\u67e5\u72b6\u6001\uff1a\u5b9e\u4f8b\u6682\u65f6\u4e0d\u53ef\u7528\uff0cBFE\u5bf9\u8fd9\u4e2a\u5b9e\u4f8b\u542f\u52a8\u5065\u5eb7\u68c0\u67e5\uff0c\u76f4\u5230\u8fd9\u4e2a\u5b9e\u4f8b\u6062\u590d\u6b63\u5e38\u4e3a\u6b62 \u4ece\u6b63\u5e38\u72b6\u6001\u5207\u6362\u5230\u5065\u5eb7\u68c0\u67e5\u72b6\u6001\u7684\u6761\u4ef6\uff1a \u5efa\u7acb\u8fde\u63a5\u6216\u8f6c\u53d1\u8bf7\u6c42\u7684\u8fde\u7eed\u5931\u8d25\u6b21\u6570\u8d85\u8fc7\u4e00\u5b9a\u7684\u9608\u503c \u5728\u5065\u5eb7\u68c0\u67e5\u72b6\u6001\uff1a BFE\u4f1a\u5b9a\u671f\u5411\u5b9e\u4f8b\u53d1\u9001\u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42 \u4ece\u5065\u5eb7\u68c0\u67e5\u72b6\u6001\u5207\u6362\u5230\u6b63\u5e38\u72b6\u6001\u7684\u6761\u4ef6\uff1a BFE\u4ece\u8be5\u5b9e\u4f8b\u6536\u5230\u5065\u5eb7\u68c0\u67e5\u8bf7\u6c42\u7684\u6b63\u786e\u54cd\u5e94","title":"\u5065\u5eb7\u68c0\u67e5"},{"location":"introduction/balance/#_8","text":"BFE\u5728\u8f6c\u53d1\u65f6\uff0c\u652f\u6301\u4ee5\u4e0b\u4e24\u79cd\u5931\u8d25\u91cd\u8bd5\u673a\u5236\uff1a \u540c\u5b50\u96c6\u7fa4\u91cd\u8bd5 \u5728\u539f\u76ee\u6807\u5b50\u96c6\u7fa4\u5185\u8fdb\u884c\u91cd\u8bd5 \u8de8\u5b50\u96c6\u7fa4\u91cd\u8bd5 \u5728\u539f\u76ee\u6807\u5b50\u96c6\u7fa4\u4e4b\u5916\u3001\u4f7f\u7528\u53e6\u5916\u4e00\u4e2a\u5b50\u96c6\u7fa4\u8fdb\u884c\u91cd\u8bd5","title":"\u5931\u8d25\u91cd\u8bd5\u673a\u5236"},{"location":"introduction/balance/#_9","text":"BFE\u548c\u4e0b\u6e38\u5b9e\u4f8b\u7684\u8fde\u63a5\u652f\u6301\u4e24\u79cd\u65b9\u5f0f\uff1a \u77ed\u8fde\u63a5\u65b9\u5f0f\uff1a\u6bcf\u6b21BFE\u5411\u4e0b\u6e38\u5b9e\u4f8b\u8f6c\u53d1\u8bf7\u6c42\uff0c\u5747\u9700\u8981\u5efa\u7acb\u65b0\u7684TCP\u8fde\u63a5 \u8fde\u63a5\u6c60\u65b9\u5f0f\uff1a BFE\u4e3a\u6bcf\u4e2a\u4e0b\u6e38\u5b9e\u4f8b\u7ef4\u62a4\u4e00\u4e2a\u8fde\u63a5\u6c60 \u5f53BFE\u9700\u8981\u5411\u67d0\u4e2a\u4e0b\u6e38\u5b9e\u4f8b\u8f6c\u53d1\u8bf7\u6c42\u65f6\uff1a \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u6709idle\u8fde\u63a5\uff0c\u5219\u590d\u7528\u8fd9\u4e2a\u8fde\u63a5 \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u6ca1\u6709idle\u8fde\u63a5\uff0c\u5219\u4f1a\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684TCP\u8fde\u63a5 \u5f53BFE\u5904\u7406\u5b8c\u4e00\u4e2a\u8bf7\u6c42\u65f6 \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u7684idle\u8fde\u63a5\u6570\u91cf\u5c0f\u4e8e\u8fde\u63a5\u6c60\u7684\u5927\u5c0f\uff0c\u5219\u5c06\u5f53\u524d\u4f7f\u7528\u7684\u8fde\u63a5\u653e\u5165\u8fde\u63a5\u6c60 \u5982\u679c\u8fde\u63a5\u6c60\u4e2d\u7684idle\u8fde\u63a5\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e\u8fde\u63a5\u6c60\u7684\u5927\u5c0f\uff0c\u5219\u5173\u95ed\u5f53\u524d\u4f7f\u7528\u7684\u8fde\u63a5","title":"\u8fde\u63a5\u6c60"},{"location":"introduction/balance/#_10","text":"BFE\u5411\u4e0b\u6e38\u8f6c\u53d1\u8bf7\u6c42\u65f6\uff0c\u652f\u6301\u5c06\u76f8\u540c\u6765\u6e90\u8bf7\u6c42\uff0c\u8f6c\u53d1\u81f3\u56fa\u5b9a\u7684\u4e1a\u52a1\u540e\u7aef\uff08\u67d0\u4e2a\u5b50\u96c6\u7fa4\u6216\u67d0\u4e2a\u5b9e\u4f8b\uff09 \u8bf7\u6c42\u6765\u6e90\u6807\u8bc6\uff1a \u57fa\u4e8e\u8bf7\u6c42\u6765\u6e90IP \u57fa\u4e8e\u8bf7\u6c42\u7279\u5b9a\u5934\u90e8\uff0c\u4f8b\u5982\u8bf7\u6c42Cookie\u7b49 \u4f1a\u8bdd\u4fdd\u6301\u7ea7\u522b\uff1a \u5b50\u96c6\u7fa4\u7ea7\u522b\uff1a\u76f8\u540c\u6765\u6e90\u8bf7\u6c42\uff0c\u88ab\u8f6c\u53d1\u81f3\u56fa\u5b9a\u7684\u4e1a\u52a1\u5b50\u96c6\u7fa4\uff08\u6ce8\uff1a\u5b50\u96c6\u7fa4\u4e2d\u7684\u4efb\u610f\u5b9e\u4f8b\uff09 \u5b9e\u4f8b\u7ea7\u522b\uff1a\u76f8\u540c\u6765\u6e90\u8bf7\u6c42\uff0c\u88ab\u8f6c\u53d1\u81f3\u56fa\u5b9a\u7684\u4e1a\u52a1\u5b9e\u4f8b","title":"\u4f1a\u8bdd\u4fdd\u6301"},{"location":"introduction/comparison/","text":"\u540c\u7c7b\u7cfb\u7edf\u5bf9\u6bd4 \u4e0b\u9762\u5c06BFE\u548c\u4e00\u4e9b\u76f8\u5173\u7684\u7cfb\u7edf\u8fdb\u884c\u5bf9\u6bd4\u3002 \u6ce8\uff1a\u7531\u4e8e\u76f8\u5173\u9879\u76ee\u5728\u6d3b\u8dc3\u5f00\u53d1\uff0c\u5982\u4e0b\u4fe1\u606f\u53ef\u80fd\u8fc7\u671f\u6216\u6709\u8bef\uff0c\u6b22\u8fce\u60a8\u5728 https://github.com/baidu/bfe/issues \u53cd\u9988\u3002 BFE\u53ca\u76f8\u5173\u7cfb\u7edf\u7684\u5b9a\u4f4d \u5728\u5404\u5f00\u6e90\u7cfb\u7edf\u7684\u5b98\u7f51\u4e0a\uff0c\u51e0\u4e2a\u76f8\u5173\u7cfb\u7edf\u7684\u5b9a\u4f4d\u63cf\u8ff0\u5982\u4e0b\uff1a BFE: BFE\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u4e03\u5c42\u8d1f\u8f7d\u5747\u8861\u7cfb\u7edf\u3002 Nginx : Nginx\u662fHTTP\u670d\u52a1\u3001\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u3001\u90ae\u4ef6\u4ee3\u7406\u670d\u52a1\u3001\u901a\u7528TCP/UDP\u4ee3\u7406\u670d\u52a1\u3002 Traefik : Traefik\u662f\u5148\u8fdb\u7684HTTP\u53cd\u5411\u4ee3\u7406\u548c\u8d1f\u8f7d\u5747\u8861\u3002 Envoy : Envoy\u662f\u5f00\u6e90\u7684\u8fb9\u7f18\u548c\u670d\u52a1\u4ee3\u7406\uff0c\u4e3a\u4e91\u539f\u751f\u5e94\u7528\u800c\u8bbe\u8ba1\u3002 \u529f\u80fd\u5bf9\u6bd4 \u534f\u8bae\u652f\u6301 4\u4e2a\u7cfb\u7edf\u90fd\u652f\u6301HTTPS\u548cHTTP/2 \u5065\u5eb7\u68c0\u67e5 BFE\u548cNginx\u53ea\u652f\u6301\u201c\u88ab\u52a8\u201d\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002 Traefik\u53ea\u652f\u6301\u201c\u4e3b\u52a8\u201d\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002 Envoy\u652f\u6301\u4e3b\u52a8\u3001\u88ab\u52a8\u548c\u6df7\u5408\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002 \u6ce8\uff1aNginx\u5546\u4e1a\u7248\u652f\u6301\u201c\u4e3b\u52a8\u201d\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002 \u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 4\u4e2a\u7cfb\u7edf\u90fd\u652f\u6301\u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 \u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 BFE\u3001Traefik\u3001Envoy\u90fd\u652f\u6301\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 Nginx\u4e0d\u652f\u6301\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 \u6ce8\uff1aEnvoy\u57fa\u4e8e\u5168\u5c40\u53ca\u5206\u5e03\u5f0f\u8d1f\u8f7d\u5747\u8861\u7b56\u7565 \u5bf9\u4e8e\u8f6c\u53d1\u89c4\u5219\u7684\u63cf\u8ff0\u65b9\u5f0f BFE\u57fa\u4e8e \u6761\u4ef6\u8868\u8fbe\u5f0f Nginx\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f Traefik\u652f\u6301\u57fa\u4e8e\u8bf7\u6c42\u5185\u5bb9\u7684\u5206\u6d41\uff0c\u4f46\u65e0\u6cd5\u652f\u6301\u7075\u6d3b\u7684\u4e0e\u6216\u975e\u903b\u8f91 Envoy\u652f\u6301\u57fa\u4e8e\u57df\u540d\u3001Path\u53caHeader\u7684\u8f6c\u53d1\u89c4\u5219 \u6269\u5c55\u5f00\u53d1\u80fd\u529b \u7f16\u7a0b\u8bed\u8a00 BFE\u548cTraefik\u90fd\u57fa\u4e8eGo\u8bed\u8a00 Nginx\u4f7f\u7528C\u548cLua\u5f00\u53d1 Envoy\u4f7f\u7528C++\u5f00\u53d1 \u53ef\u63d2\u62d4\u67b6\u6784 4\u4e2a\u7cfb\u7edf\u90fd\u4f7f\u7528\u4e86\u53ef\u63d2\u62d4\u67b6\u6784 \u65b0\u529f\u80fd\u5f00\u53d1\u6210\u672c \u7531\u4e8e\u7f16\u7a0b\u8bed\u8a00\u65b9\u9762\u7684\u5dee\u5f02\uff0cBFE\u548cTraefik\u7684\u5f00\u53d1\u6210\u672c\u8f83\u4f4e\uff0cNginx\u548cEnvoy\u7684\u5f00\u53d1\u6210\u672c\u8f83\u9ad8\u3002 \u5f02\u5e38\u5904\u7406\u80fd\u529b \u7531\u4e8e\u7f16\u7a0b\u8bed\u8a00\u65b9\u9762\u7684\u5dee\u5f02\uff0cBFE\u548cTraefik\u53ef\u4ee5\u5bf9\u5f02\u5e38\uff08\u5728Go\u8bed\u8a00\u4e2d\u79f0\u4e3aPanic\uff09\u8fdb\u884c\u6355\u83b7\u5904\u7406\uff0c\u4ece\u800c\u907f\u514d\u7a0b\u5e8f\u7684\u5f02\u5e38\u7ed3\u675f; \u800cNginx\u548cEnvoy\u65e0\u6cd5\u5bf9\u5185\u5b58\u7b49\u65b9\u9762\u7684\u9519\u8bef\u8fdb\u884c\u6355\u83b7\uff0c\u8fd9\u4e9b\u9519\u8bef\u5f88\u5bb9\u6613\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002 \u53ef\u8fd0\u7ef4\u6027 \u5185\u90e8\u72b6\u6001\u5c55\u793a BFE\u5bf9\u7a0b\u5e8f\u5185\u90e8\u72b6\u6001\uff0c\u63d0\u4f9b\u4e86 \u4e30\u5bcc\u7684\u5c55\u793a Nginx\u548cTraefik\u63d0\u4f9b\u7684\u5185\u90e8\u72b6\u6001\u4fe1\u606f\u8f83\u5c11 Envoy\u4e5f\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u5185\u90e8\u72b6\u6001\u5c55\u793a \u914d\u7f6e\u70ed\u52a0\u8f7d 4\u4e2a\u7cfb\u7edf\u90fd\u63d0\u4f9b\u914d\u7f6e\u70ed\u52a0\u8f7d\u529f\u80fd Nginx\u914d\u7f6e\u751f\u6548\u9700\u91cd\u542f\u8fdb\u7a0b\uff0c\u4e2d\u65ad\u6d3b\u8dc3\u957f\u8fde\u63a5 \u6ce8\uff1aNginx\u5546\u4e1a\u7248\u652f\u6301\u52a8\u6001\u914d\u7f6e\uff0c\u5728\u4e0d\u91cd\u542f\u8fdb\u7a0b\u7684\u60c5\u51b5\u4e0b\u70ed\u52a0\u8f7d\u914d\u7f6e\u751f\u6548","title":"\u7ade\u54c1\u5bf9\u6bd4"},{"location":"introduction/comparison/#_1","text":"\u4e0b\u9762\u5c06BFE\u548c\u4e00\u4e9b\u76f8\u5173\u7684\u7cfb\u7edf\u8fdb\u884c\u5bf9\u6bd4\u3002 \u6ce8\uff1a\u7531\u4e8e\u76f8\u5173\u9879\u76ee\u5728\u6d3b\u8dc3\u5f00\u53d1\uff0c\u5982\u4e0b\u4fe1\u606f\u53ef\u80fd\u8fc7\u671f\u6216\u6709\u8bef\uff0c\u6b22\u8fce\u60a8\u5728 https://github.com/baidu/bfe/issues \u53cd\u9988\u3002","title":"\u540c\u7c7b\u7cfb\u7edf\u5bf9\u6bd4"},{"location":"introduction/comparison/#bfe","text":"\u5728\u5404\u5f00\u6e90\u7cfb\u7edf\u7684\u5b98\u7f51\u4e0a\uff0c\u51e0\u4e2a\u76f8\u5173\u7cfb\u7edf\u7684\u5b9a\u4f4d\u63cf\u8ff0\u5982\u4e0b\uff1a BFE: BFE\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u4e03\u5c42\u8d1f\u8f7d\u5747\u8861\u7cfb\u7edf\u3002 Nginx : Nginx\u662fHTTP\u670d\u52a1\u3001\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u3001\u90ae\u4ef6\u4ee3\u7406\u670d\u52a1\u3001\u901a\u7528TCP/UDP\u4ee3\u7406\u670d\u52a1\u3002 Traefik : Traefik\u662f\u5148\u8fdb\u7684HTTP\u53cd\u5411\u4ee3\u7406\u548c\u8d1f\u8f7d\u5747\u8861\u3002 Envoy : Envoy\u662f\u5f00\u6e90\u7684\u8fb9\u7f18\u548c\u670d\u52a1\u4ee3\u7406\uff0c\u4e3a\u4e91\u539f\u751f\u5e94\u7528\u800c\u8bbe\u8ba1\u3002","title":"BFE\u53ca\u76f8\u5173\u7cfb\u7edf\u7684\u5b9a\u4f4d"},{"location":"introduction/comparison/#_2","text":"","title":"\u529f\u80fd\u5bf9\u6bd4"},{"location":"introduction/comparison/#_3","text":"4\u4e2a\u7cfb\u7edf\u90fd\u652f\u6301HTTPS\u548cHTTP/2","title":"\u534f\u8bae\u652f\u6301"},{"location":"introduction/comparison/#_4","text":"BFE\u548cNginx\u53ea\u652f\u6301\u201c\u88ab\u52a8\u201d\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002 Traefik\u53ea\u652f\u6301\u201c\u4e3b\u52a8\u201d\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002 Envoy\u652f\u6301\u4e3b\u52a8\u3001\u88ab\u52a8\u548c\u6df7\u5408\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002 \u6ce8\uff1aNginx\u5546\u4e1a\u7248\u652f\u6301\u201c\u4e3b\u52a8\u201d\u6a21\u5f0f\u7684\u5065\u5eb7\u68c0\u67e5\u3002","title":"\u5065\u5eb7\u68c0\u67e5"},{"location":"introduction/comparison/#_5","text":"4\u4e2a\u7cfb\u7edf\u90fd\u652f\u6301\u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861","title":"\u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861"},{"location":"introduction/comparison/#_6","text":"BFE\u3001Traefik\u3001Envoy\u90fd\u652f\u6301\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 Nginx\u4e0d\u652f\u6301\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861 \u6ce8\uff1aEnvoy\u57fa\u4e8e\u5168\u5c40\u53ca\u5206\u5e03\u5f0f\u8d1f\u8f7d\u5747\u8861\u7b56\u7565","title":"\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861"},{"location":"introduction/comparison/#_7","text":"BFE\u57fa\u4e8e \u6761\u4ef6\u8868\u8fbe\u5f0f Nginx\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f Traefik\u652f\u6301\u57fa\u4e8e\u8bf7\u6c42\u5185\u5bb9\u7684\u5206\u6d41\uff0c\u4f46\u65e0\u6cd5\u652f\u6301\u7075\u6d3b\u7684\u4e0e\u6216\u975e\u903b\u8f91 Envoy\u652f\u6301\u57fa\u4e8e\u57df\u540d\u3001Path\u53caHeader\u7684\u8f6c\u53d1\u89c4\u5219","title":"\u5bf9\u4e8e\u8f6c\u53d1\u89c4\u5219\u7684\u63cf\u8ff0\u65b9\u5f0f"},{"location":"introduction/comparison/#_8","text":"","title":"\u6269\u5c55\u5f00\u53d1\u80fd\u529b"},{"location":"introduction/comparison/#_9","text":"BFE\u548cTraefik\u90fd\u57fa\u4e8eGo\u8bed\u8a00 Nginx\u4f7f\u7528C\u548cLua\u5f00\u53d1 Envoy\u4f7f\u7528C++\u5f00\u53d1","title":"\u7f16\u7a0b\u8bed\u8a00"},{"location":"introduction/comparison/#_10","text":"4\u4e2a\u7cfb\u7edf\u90fd\u4f7f\u7528\u4e86\u53ef\u63d2\u62d4\u67b6\u6784","title":"\u53ef\u63d2\u62d4\u67b6\u6784"},{"location":"introduction/comparison/#_11","text":"\u7531\u4e8e\u7f16\u7a0b\u8bed\u8a00\u65b9\u9762\u7684\u5dee\u5f02\uff0cBFE\u548cTraefik\u7684\u5f00\u53d1\u6210\u672c\u8f83\u4f4e\uff0cNginx\u548cEnvoy\u7684\u5f00\u53d1\u6210\u672c\u8f83\u9ad8\u3002","title":"\u65b0\u529f\u80fd\u5f00\u53d1\u6210\u672c"},{"location":"introduction/comparison/#_12","text":"\u7531\u4e8e\u7f16\u7a0b\u8bed\u8a00\u65b9\u9762\u7684\u5dee\u5f02\uff0cBFE\u548cTraefik\u53ef\u4ee5\u5bf9\u5f02\u5e38\uff08\u5728Go\u8bed\u8a00\u4e2d\u79f0\u4e3aPanic\uff09\u8fdb\u884c\u6355\u83b7\u5904\u7406\uff0c\u4ece\u800c\u907f\u514d\u7a0b\u5e8f\u7684\u5f02\u5e38\u7ed3\u675f; \u800cNginx\u548cEnvoy\u65e0\u6cd5\u5bf9\u5185\u5b58\u7b49\u65b9\u9762\u7684\u9519\u8bef\u8fdb\u884c\u6355\u83b7\uff0c\u8fd9\u4e9b\u9519\u8bef\u5f88\u5bb9\u6613\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002","title":"\u5f02\u5e38\u5904\u7406\u80fd\u529b"},{"location":"introduction/comparison/#_13","text":"","title":"\u53ef\u8fd0\u7ef4\u6027"},{"location":"introduction/comparison/#_14","text":"BFE\u5bf9\u7a0b\u5e8f\u5185\u90e8\u72b6\u6001\uff0c\u63d0\u4f9b\u4e86 \u4e30\u5bcc\u7684\u5c55\u793a Nginx\u548cTraefik\u63d0\u4f9b\u7684\u5185\u90e8\u72b6\u6001\u4fe1\u606f\u8f83\u5c11 Envoy\u4e5f\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u5185\u90e8\u72b6\u6001\u5c55\u793a","title":"\u5185\u90e8\u72b6\u6001\u5c55\u793a"},{"location":"introduction/comparison/#_15","text":"4\u4e2a\u7cfb\u7edf\u90fd\u63d0\u4f9b\u914d\u7f6e\u70ed\u52a0\u8f7d\u529f\u80fd Nginx\u914d\u7f6e\u751f\u6548\u9700\u91cd\u542f\u8fdb\u7a0b\uff0c\u4e2d\u65ad\u6d3b\u8dc3\u957f\u8fde\u63a5 \u6ce8\uff1aNginx\u5546\u4e1a\u7248\u652f\u6301\u52a8\u6001\u914d\u7f6e\uff0c\u5728\u4e0d\u91cd\u542f\u8fdb\u7a0b\u7684\u60c5\u51b5\u4e0b\u70ed\u52a0\u8f7d\u914d\u7f6e\u751f\u6548","title":"\u914d\u7f6e\u70ed\u52a0\u8f7d"},{"location":"introduction/forward_model/","text":"BFE\u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u6d41\u7a0b Step1-2\uff1aDNS\u89e3\u6790 \u8bf7\u6c42\u7684\u57df\u540d\u4e3ademo.example.com \u8fd4\u56deIP\u5730\u57406.6.6.6\uff08\u793a\u4f8b\u5730\u5740\uff09 Step3\uff1aIP\u62a5\u6587\u88ab\u8def\u7531\u5230IDC1\u7684\u5165\u53e3\uff0c\u7531\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u7cfb\u7edfL4LB\u5904\u7406 Step4\uff1aL4LB\u5c06IP\u62a5\u6587\u8f6c\u53d1\u7ed9\u4e0b\u6e38BFE Step5\uff1aBFE\u6536\u5230HTTP request, \u786e\u5b9a\u5904\u7406\u8be5\u6d88\u606f\u7684\u4ea7\u54c1\u7ebf BFE\u6839\u636eHTTP header\u4e2d\u7684host\u5b57\u6bb5\u786e\u5b9a\u4ea7\u54c1\u7ebf\u3002 \u5bf9\u4e8edemo.example.com\u8fd9\u4e2a\u57df\u540d\uff0c\u5047\u8bbe\u5bf9\u5e94\u7684\u4ea7\u54c1\u7ebf\u540d\u4e3ademo Step6\uff1a\u786e\u5b9a\u4ea7\u54c1\u7ebfdemo\u4e2d\u5904\u7406\u8be5\u6d88\u606f\u7684\u96c6\u7fa4\uff08\u5177\u4f53\u53c2\u89c1\u201c\u96c6\u7fa4\u95f4\u5206\u6d41\u201d\uff09 \u67e5\u627e\u4ea7\u54c1\u7ebfdemo\u7684\u914d\u7f6e\uff0c\u6839\u636e\u914d\u7f6e\u7684\u96c6\u7fa4\u95f4\u5206\u6d41\u89c4\u5219\uff0c\u786e\u5b9a\u540e\u7aef\u96c6\u7fa4\u4e3ademo-static Step7\uff1a\u6839\u636e\u96c6\u7fa4demo-static\u7684\u914d\u7f6e\uff0c\u786e\u5b9a\u5b50\u96c6\u7fa4 \u5bf9\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u786e\u5b9a\u5b50\u96c6\u7fa4\u4e3ademo-static.idc1 Step8\uff1a\u5728\u5b50\u96c6\u7fa4\u5185\uff0c\u786e\u5b9a\u5b9e\u4f8b \u5bf9\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u786e\u5b9a\u5b9e\u4f8b\u4e3aa-demo-static-1.idc1 Step9\uff1a\u8bf7\u6c42\u88ab\u53d1\u5f80\u76ee\u6807\u5b9e\u4f8ba-demo-static-1.idc1 Step10\uff1aBFE\u6536\u5230Response Step11-12\uff1aBFE\u901a\u8fc7L4LB\uff0c\u5c06\u8bf7\u6c42\u8fd4\u56de\u7ed9\u7528\u6237","title":"\u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u6a21\u578b"},{"location":"introduction/forward_model/#bfe","text":"Step1-2\uff1aDNS\u89e3\u6790 \u8bf7\u6c42\u7684\u57df\u540d\u4e3ademo.example.com \u8fd4\u56deIP\u5730\u57406.6.6.6\uff08\u793a\u4f8b\u5730\u5740\uff09 Step3\uff1aIP\u62a5\u6587\u88ab\u8def\u7531\u5230IDC1\u7684\u5165\u53e3\uff0c\u7531\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u7cfb\u7edfL4LB\u5904\u7406 Step4\uff1aL4LB\u5c06IP\u62a5\u6587\u8f6c\u53d1\u7ed9\u4e0b\u6e38BFE Step5\uff1aBFE\u6536\u5230HTTP request, \u786e\u5b9a\u5904\u7406\u8be5\u6d88\u606f\u7684\u4ea7\u54c1\u7ebf BFE\u6839\u636eHTTP header\u4e2d\u7684host\u5b57\u6bb5\u786e\u5b9a\u4ea7\u54c1\u7ebf\u3002 \u5bf9\u4e8edemo.example.com\u8fd9\u4e2a\u57df\u540d\uff0c\u5047\u8bbe\u5bf9\u5e94\u7684\u4ea7\u54c1\u7ebf\u540d\u4e3ademo Step6\uff1a\u786e\u5b9a\u4ea7\u54c1\u7ebfdemo\u4e2d\u5904\u7406\u8be5\u6d88\u606f\u7684\u96c6\u7fa4\uff08\u5177\u4f53\u53c2\u89c1\u201c\u96c6\u7fa4\u95f4\u5206\u6d41\u201d\uff09 \u67e5\u627e\u4ea7\u54c1\u7ebfdemo\u7684\u914d\u7f6e\uff0c\u6839\u636e\u914d\u7f6e\u7684\u96c6\u7fa4\u95f4\u5206\u6d41\u89c4\u5219\uff0c\u786e\u5b9a\u540e\u7aef\u96c6\u7fa4\u4e3ademo-static Step7\uff1a\u6839\u636e\u96c6\u7fa4demo-static\u7684\u914d\u7f6e\uff0c\u786e\u5b9a\u5b50\u96c6\u7fa4 \u5bf9\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u786e\u5b9a\u5b50\u96c6\u7fa4\u4e3ademo-static.idc1 Step8\uff1a\u5728\u5b50\u96c6\u7fa4\u5185\uff0c\u786e\u5b9a\u5b9e\u4f8b \u5bf9\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u786e\u5b9a\u5b9e\u4f8b\u4e3aa-demo-static-1.idc1 Step9\uff1a\u8bf7\u6c42\u88ab\u53d1\u5f80\u76ee\u6807\u5b9e\u4f8ba-demo-static-1.idc1 Step10\uff1aBFE\u6536\u5230Response Step11-12\uff1aBFE\u901a\u8fc7L4LB\uff0c\u5c06\u8bf7\u6c42\u8fd4\u56de\u7ed9\u7528\u6237","title":"BFE\u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u6d41\u7a0b"},{"location":"introduction/getting_help/","text":"\u83b7\u53d6\u5e2e\u52a9 \u6211\u4eec\u81f4\u529b\u4e8e\u56f4\u7ed5BFE\u5efa\u7acb\u5f00\u6e90\u793e\u533a\u3002\u5982\u679c\u60a8\u6709\u5174\u8da3\u4f7f\u7528\u6216\u5e0c\u671b\u83b7\u53d6\u5e2e\u52a9\uff0c\u6b22\u8fce\u8054\u7cfb\u6211\u4eec\u3002 \u54a8\u8be2\u95ee\u9898\u6216\u9700\u6c42 \u6b22\u8fce\u60a8\u5728https://github.com/baidu/bfe/issues/new/choose \u63d0\u4ea4\u95ee\u9898\u6216\u9700\u6c42\uff0c\u6211\u4eec\u5c06\u5728\u5de5\u4f5c\u65e5\u5185\u54cd\u5e94\u56de\u590d \u53cd\u9988\u5b89\u5168\u95ee\u9898 \u5982\u679c\u53ef\u80fd\u662f\u5b89\u5168\u76f8\u5173\u95ee\u9898\uff0c\u8bf7\u60a8\u5355\u72ec\u90ae\u4ef6\u8054\u7cfb bfe-security@baidu.com \u53c2\u4e0eBFE\u5f00\u53d1 \u6b22\u8fce\u60a8\u6309 \u6d41\u7a0b \u5728https://github.com/baidu/bfe \u53c2\u4e0e\u8d21\u732e\u4ee3\u7801\u53ca\u6587\u6863\uff0c\u4e5f\u6b22\u8fce\u90ae\u4ef6\u6211\u4eec bfe-osc@baidu.com\u4ea4\u6d41 \u7533\u8bf7\u4e13\u9879\u5408\u4f5c \u6b22\u8fce\u90ae\u4ef6\u6211\u4eec bfe-osc@baidu.com \u6d3d\u8c08","title":"\u83b7\u53d6\u5e2e\u52a9"},{"location":"introduction/getting_help/#_1","text":"\u6211\u4eec\u81f4\u529b\u4e8e\u56f4\u7ed5BFE\u5efa\u7acb\u5f00\u6e90\u793e\u533a\u3002\u5982\u679c\u60a8\u6709\u5174\u8da3\u4f7f\u7528\u6216\u5e0c\u671b\u83b7\u53d6\u5e2e\u52a9\uff0c\u6b22\u8fce\u8054\u7cfb\u6211\u4eec\u3002","title":"\u83b7\u53d6\u5e2e\u52a9"},{"location":"introduction/getting_help/#_2","text":"\u6b22\u8fce\u60a8\u5728https://github.com/baidu/bfe/issues/new/choose \u63d0\u4ea4\u95ee\u9898\u6216\u9700\u6c42\uff0c\u6211\u4eec\u5c06\u5728\u5de5\u4f5c\u65e5\u5185\u54cd\u5e94\u56de\u590d","title":"\u54a8\u8be2\u95ee\u9898\u6216\u9700\u6c42"},{"location":"introduction/getting_help/#_3","text":"\u5982\u679c\u53ef\u80fd\u662f\u5b89\u5168\u76f8\u5173\u95ee\u9898\uff0c\u8bf7\u60a8\u5355\u72ec\u90ae\u4ef6\u8054\u7cfb bfe-security@baidu.com","title":"\u53cd\u9988\u5b89\u5168\u95ee\u9898"},{"location":"introduction/getting_help/#bfe","text":"\u6b22\u8fce\u60a8\u6309 \u6d41\u7a0b \u5728https://github.com/baidu/bfe \u53c2\u4e0e\u8d21\u732e\u4ee3\u7801\u53ca\u6587\u6863\uff0c\u4e5f\u6b22\u8fce\u90ae\u4ef6\u6211\u4eec bfe-osc@baidu.com\u4ea4\u6d41","title":"\u53c2\u4e0eBFE\u5f00\u53d1"},{"location":"introduction/getting_help/#_4","text":"\u6b22\u8fce\u90ae\u4ef6\u6211\u4eec bfe-osc@baidu.com \u6d3d\u8c08","title":"\u7533\u8bf7\u4e13\u9879\u5408\u4f5c"},{"location":"introduction/overview/","text":"\u6982\u89c8 BFE\u662f\u4ec0\u4e48 BFE\u662f\u57fa\u4e8e\u767e\u5ea6\u7edf\u4e00\u63a5\u5165\u524d\u7aef(Baidu FrontEnd)\u5f00\u6e90\u7684\u4e03\u5c42\u6d41\u91cf\u63a5\u5165\u7cfb\u7edf\u3002 \u529f\u80fd\u7279\u6027\u53ca\u4f18\u70b9 \u57fa\u4e8eGolang\u6784\u5efa \u57fa\u4e8e\u5185\u5b58\u5b89\u5168\u8bed\u8a00\u6784\u5efa\u65e0\u7f13\u51b2\u533a\u6ea2\u51fa\u5b89\u5168\u6f0f\u6d1e\u9690\u60a3\uff1b\u5177\u5907\u5f02\u5e38\u6355\u83b7\u5bb9\u9519\u5904\u7406\u80fd\u529b\u907f\u514d\u8fdb\u7a0b\u5f02\u5e38\u9000\u51fa\uff1b\u517c\u5bb9\u652f\u6301Linux/Windows/MacOS\u7b49\u591a\u5e73\u53f0\u8fd0\u884c\u3002 \u7075\u6d3b\u7684\u6a21\u5757\u6846\u67b6 \u5185\u7f6e\u7075\u6d3b\u7684\u6a21\u5757\u6846\u67b6\uff0c\u652f\u6301\u9ad8\u6548\u7387\u5b9a\u5236\u5f00\u53d1\u7b2c\u4e09\u65b9\u6269\u5c55\u6a21\u5757\u3002 \u9762\u5411\u591a\u79df\u6237\u67b6\u6784 \u57fa\u4e8e\u591a\u79df\u6237\u67b6\u6784\u8bbe\u8ba1\uff0c\u79df\u6237\u4e4b\u95f4\u914d\u7f6e\u76f8\u4e92\u9694\u79bb\u3002 \u652f\u6301\u4e30\u5bcc\u7684\u63a5\u5165\u534f\u8bae \u652f\u6301HTTP\uff0cHTTPS\uff0cSPDY\uff0cHTTP/2\uff0cWebSocket\uff0cTLS\u7b49\u3002\u672a\u6765\u8ba1\u5212\u652f\u6301gRPC, HTTP/3\u3002 \u57fa\u4e8e\u8bf7\u6c42\u5185\u5bb9\u8def\u7531 \u652f\u6301 \u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f \u5b9a\u5236\u8f6c\u53d1\u89c4\u5219\uff0c\u8f6c\u53d1\u89c4\u5219\u6613\u4e8e\u7406\u89e3\u53ca\u7ef4\u62a4\u3002 \u9ad8\u7ea7\u8d1f\u8f7d\u5747\u8861 \u652f\u6301\u5168\u5c40/\u5206\u5e03\u5f0f\u8d1f\u8f7d\u5747\u8861\uff0c\u5b9e\u73b0\u5c31\u8fd1\u8bbf\u95ee\u3001\u8de8\u53ef\u7528\u533a\u5bb9\u707e\u53ca\u8fc7\u8f7d\u4fdd\u62a4\u7b49\u3002 \u4e30\u5bcc\u7684\u6269\u5c55\u6a21\u5757 \u63d0\u4f9b\u4e30\u5bcc\u7684\u6d41\u91cf\u7ba1\u7406\u3001\u5b89\u5168\u9632\u653b\u51fb\u3001\u53ef\u89c1\u6027\u7b49\u76f8\u5173\u6269\u5c55\u6a21\u5757\u3002 \u4e00\u6d41\u7684\u53ef\u89c1\u6027 \u63d0\u4f9b\u4e30\u5bcc\u8be6\u5c3d\u7684\u76d1\u63a7\u6307\u6807\uff1b\u63d0\u4f9b\u5404\u7c7b\u65e5\u5fd7\uff08\u670d\u52a1\u65e5\u5fd7/\u8bbf\u95ee\u65e5\u5fd7/TLS Key\u65e5\u5fd7\uff09\u4f9b\u95ee\u9898\u8bca\u65ad\u3001\u6570\u636e\u5206\u6790\u53ca\u53ef\u89c6\u5316\uff1bBFE\u8fd8\u652f\u6301\u8bf7\u6c42\u5206\u5e03\u5f0fTracing\u3002 \u517c\u5bb9\u9002\u914d\u4e3b\u6d41\u751f\u6001\u9879\u76ee \u517c\u5bb9\u9002\u914d\u4e3b\u6d41\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u65b9\u6848\uff0c\u53ca\u5176\u5b83\u751f\u6001\u9879\u76ee\u5982Kubernetes\u3001Prometheus\u3001Jaeger\u3001Fluentd\u7b49\u3002 \u529f\u80fd\u7ec4\u4ef6 BFE\u5305\u542b\u4e86\u591a\u4e2a\u7ec4\u4ef6\uff0c\u90e8\u5206\u662f\u53ef\u9009\u7684: BFE Server: BFE\u6570\u636e\u5e73\u9762\u6838\u5fc3\u8f6c\u53d1\u6a21\u5757(\u5fc5\u9009\uff0c\u5df2\u5f00\u6e90\uff09 BFE-Reader: BFE\u65e5\u5fd7\u5206\u6790\u6a21\u5757\uff0c\u4e0eBFE Server\u90e8\u7f72\u5728\u4e00\u8d77\uff0c\u7528\u4e8e\u5bf9BFE\u65e5\u5fd7\u8fdb\u884c\u672c\u5730\u6c47\u805a\u8ba1\u7b97\uff0c\u964d\u4f4e\u540e\u7eed\u8ba1\u7b97\u5904\u7406\u7684\u6570\u636e\u89c4\u6a21\u3002 BFE-API Server: BFE\u63a7\u5236\u5e73\u9762API Server\uff0c\u5176\u5b83\u63a7\u5236\u5e73\u9762\u6a21\u5757\u4ee5BFE-API Server\u4e3a\u6838\u5fc3\u534f\u540c\u5de5\u4f5c\u3002 BFE-Aggregator: BFE\u65e5\u5fd7\u6570\u636e\u5b9e\u65f6\u805a\u5408\u8ba1\u7b97\u6a21\u5757\u3002 BFE-Scheduler: BFE\u6d41\u91cf\u8c03\u5ea6\u5668\uff0c\u57fa\u4e8e\u6d41\u91cf\u3001\u5bb9\u91cf\u3001\u7f51\u7edc\u8ddd\u79bb\u53ca\u8d28\u91cf\uff0c\u81ea\u52a8\u8ba1\u7b97\u5168\u5c40\u8d1f\u8f7d\u5747\u8861(GSLB)\u7b56\u7565\u3002 BFE-Controller: BFE\u96c6\u7fa4\u63a7\u5236\u5668\uff0c\u6267\u884c\u5e38\u89c4\u63a7\u5236\u4efb\u52a1\uff0c\u4f8b\u5982\u5f02\u5e38\u5de1\u68c0\u53ca\u62a5\u8b66\u3002 BFE-Web UI: BFE Web\u63a7\u5236\u53f0\u3002 \u5176\u5b83\u5468\u8fb9\u4f9d\u8d56\u7cfb\u7edf, \u4f8b\u5982\u7f13\u5b58\u670d\u52a1\u3001\u975e\u5bf9\u79f0\u5bc6\u7801\u5b66\u7b97\u6cd5\u8ba1\u7b97\u670d\u52a1\u7b49\u3002 \u67b6\u6784\u4ecb\u7ecd \u4e0b\u56fe\u5c55\u793a\u4e86BFE\u7684\u67b6\u6784\u53caBFE\u751f\u6001\u4e2d\u7684\u4e00\u4e9b\u4f9d\u8d56\u7cfb\u7edf\u3002 \u6570\u636e\u5e73\u9762 \u7528\u6237\u6d41\u91cf\u7ecf\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u8bbe\u65bd\u8fbe\u5230BFE Server\u3002BFE Server\u5728\u8f6c\u53d1\u6d41\u91cf\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u8bbf\u95ee\u591a\u4e2a\u4f9d\u8d56\u7684\u670d\u52a1\u3002\u5e76\u7ecf\u8fc7\u5185\u5bb9\u8def\u7531\u3001\u8d1f\u8f7d\u5747\u8861\uff0c\u6700\u7ec8\u8f6c\u53d1\u7ed9\u5408\u9002\u7684\u540e\u7aef\u96c6\u7fa4\u3002\u5173\u4e8e\u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u7684\u8be6\u7ec6\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u9605\u8bfb \u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u6a21\u578b \u3002 \u63a7\u5236\u5e73\u9762 BFE\u79df\u6237\u901a\u8fc7BFE-Web UI\u6216BFE-API\u7ba1\u7406\u6d41\u91cf\u63a5\u5165\u53ca\u8f6c\u53d1\u7b56\u7565\u3002\u6b64\u5916\uff0c\u63a7\u5236\u5e73\u9762\u8fd8\u8d1f\u8d23\u6267\u884c\u5168\u5c40\u6027\u51b3\u7b56\uff08\u4f8b\u5982\u5168\u5c40\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\u8ba1\u7b97\uff09\u53ca\u96c6\u7fa4\u7ea7\u522b\u5176\u5b83\u7ba1\u7406\u5de5\u4f5c\uff08\u4f8b\u5982\u96c6\u7fa4\u7ea7\u522b\u5f02\u5e38\u5de1\u68c0\u53ca\u5904\u7406\u7b49\uff09\u3002","title":"BFE\u6982\u89c8"},{"location":"introduction/overview/#_1","text":"","title":"\u6982\u89c8"},{"location":"introduction/overview/#bfe","text":"BFE\u662f\u57fa\u4e8e\u767e\u5ea6\u7edf\u4e00\u63a5\u5165\u524d\u7aef(Baidu FrontEnd)\u5f00\u6e90\u7684\u4e03\u5c42\u6d41\u91cf\u63a5\u5165\u7cfb\u7edf\u3002","title":"BFE\u662f\u4ec0\u4e48"},{"location":"introduction/overview/#_2","text":"\u57fa\u4e8eGolang\u6784\u5efa \u57fa\u4e8e\u5185\u5b58\u5b89\u5168\u8bed\u8a00\u6784\u5efa\u65e0\u7f13\u51b2\u533a\u6ea2\u51fa\u5b89\u5168\u6f0f\u6d1e\u9690\u60a3\uff1b\u5177\u5907\u5f02\u5e38\u6355\u83b7\u5bb9\u9519\u5904\u7406\u80fd\u529b\u907f\u514d\u8fdb\u7a0b\u5f02\u5e38\u9000\u51fa\uff1b\u517c\u5bb9\u652f\u6301Linux/Windows/MacOS\u7b49\u591a\u5e73\u53f0\u8fd0\u884c\u3002 \u7075\u6d3b\u7684\u6a21\u5757\u6846\u67b6 \u5185\u7f6e\u7075\u6d3b\u7684\u6a21\u5757\u6846\u67b6\uff0c\u652f\u6301\u9ad8\u6548\u7387\u5b9a\u5236\u5f00\u53d1\u7b2c\u4e09\u65b9\u6269\u5c55\u6a21\u5757\u3002 \u9762\u5411\u591a\u79df\u6237\u67b6\u6784 \u57fa\u4e8e\u591a\u79df\u6237\u67b6\u6784\u8bbe\u8ba1\uff0c\u79df\u6237\u4e4b\u95f4\u914d\u7f6e\u76f8\u4e92\u9694\u79bb\u3002 \u652f\u6301\u4e30\u5bcc\u7684\u63a5\u5165\u534f\u8bae \u652f\u6301HTTP\uff0cHTTPS\uff0cSPDY\uff0cHTTP/2\uff0cWebSocket\uff0cTLS\u7b49\u3002\u672a\u6765\u8ba1\u5212\u652f\u6301gRPC, HTTP/3\u3002 \u57fa\u4e8e\u8bf7\u6c42\u5185\u5bb9\u8def\u7531 \u652f\u6301 \u9ad8\u7ea7\u6761\u4ef6\u8868\u8fbe\u5f0f \u5b9a\u5236\u8f6c\u53d1\u89c4\u5219\uff0c\u8f6c\u53d1\u89c4\u5219\u6613\u4e8e\u7406\u89e3\u53ca\u7ef4\u62a4\u3002 \u9ad8\u7ea7\u8d1f\u8f7d\u5747\u8861 \u652f\u6301\u5168\u5c40/\u5206\u5e03\u5f0f\u8d1f\u8f7d\u5747\u8861\uff0c\u5b9e\u73b0\u5c31\u8fd1\u8bbf\u95ee\u3001\u8de8\u53ef\u7528\u533a\u5bb9\u707e\u53ca\u8fc7\u8f7d\u4fdd\u62a4\u7b49\u3002 \u4e30\u5bcc\u7684\u6269\u5c55\u6a21\u5757 \u63d0\u4f9b\u4e30\u5bcc\u7684\u6d41\u91cf\u7ba1\u7406\u3001\u5b89\u5168\u9632\u653b\u51fb\u3001\u53ef\u89c1\u6027\u7b49\u76f8\u5173\u6269\u5c55\u6a21\u5757\u3002 \u4e00\u6d41\u7684\u53ef\u89c1\u6027 \u63d0\u4f9b\u4e30\u5bcc\u8be6\u5c3d\u7684\u76d1\u63a7\u6307\u6807\uff1b\u63d0\u4f9b\u5404\u7c7b\u65e5\u5fd7\uff08\u670d\u52a1\u65e5\u5fd7/\u8bbf\u95ee\u65e5\u5fd7/TLS Key\u65e5\u5fd7\uff09\u4f9b\u95ee\u9898\u8bca\u65ad\u3001\u6570\u636e\u5206\u6790\u53ca\u53ef\u89c6\u5316\uff1bBFE\u8fd8\u652f\u6301\u8bf7\u6c42\u5206\u5e03\u5f0fTracing\u3002 \u517c\u5bb9\u9002\u914d\u4e3b\u6d41\u751f\u6001\u9879\u76ee \u517c\u5bb9\u9002\u914d\u4e3b\u6d41\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u65b9\u6848\uff0c\u53ca\u5176\u5b83\u751f\u6001\u9879\u76ee\u5982Kubernetes\u3001Prometheus\u3001Jaeger\u3001Fluentd\u7b49\u3002","title":"\u529f\u80fd\u7279\u6027\u53ca\u4f18\u70b9"},{"location":"introduction/overview/#_3","text":"BFE\u5305\u542b\u4e86\u591a\u4e2a\u7ec4\u4ef6\uff0c\u90e8\u5206\u662f\u53ef\u9009\u7684: BFE Server: BFE\u6570\u636e\u5e73\u9762\u6838\u5fc3\u8f6c\u53d1\u6a21\u5757(\u5fc5\u9009\uff0c\u5df2\u5f00\u6e90\uff09 BFE-Reader: BFE\u65e5\u5fd7\u5206\u6790\u6a21\u5757\uff0c\u4e0eBFE Server\u90e8\u7f72\u5728\u4e00\u8d77\uff0c\u7528\u4e8e\u5bf9BFE\u65e5\u5fd7\u8fdb\u884c\u672c\u5730\u6c47\u805a\u8ba1\u7b97\uff0c\u964d\u4f4e\u540e\u7eed\u8ba1\u7b97\u5904\u7406\u7684\u6570\u636e\u89c4\u6a21\u3002 BFE-API Server: BFE\u63a7\u5236\u5e73\u9762API Server\uff0c\u5176\u5b83\u63a7\u5236\u5e73\u9762\u6a21\u5757\u4ee5BFE-API Server\u4e3a\u6838\u5fc3\u534f\u540c\u5de5\u4f5c\u3002 BFE-Aggregator: BFE\u65e5\u5fd7\u6570\u636e\u5b9e\u65f6\u805a\u5408\u8ba1\u7b97\u6a21\u5757\u3002 BFE-Scheduler: BFE\u6d41\u91cf\u8c03\u5ea6\u5668\uff0c\u57fa\u4e8e\u6d41\u91cf\u3001\u5bb9\u91cf\u3001\u7f51\u7edc\u8ddd\u79bb\u53ca\u8d28\u91cf\uff0c\u81ea\u52a8\u8ba1\u7b97\u5168\u5c40\u8d1f\u8f7d\u5747\u8861(GSLB)\u7b56\u7565\u3002 BFE-Controller: BFE\u96c6\u7fa4\u63a7\u5236\u5668\uff0c\u6267\u884c\u5e38\u89c4\u63a7\u5236\u4efb\u52a1\uff0c\u4f8b\u5982\u5f02\u5e38\u5de1\u68c0\u53ca\u62a5\u8b66\u3002 BFE-Web UI: BFE Web\u63a7\u5236\u53f0\u3002 \u5176\u5b83\u5468\u8fb9\u4f9d\u8d56\u7cfb\u7edf, \u4f8b\u5982\u7f13\u5b58\u670d\u52a1\u3001\u975e\u5bf9\u79f0\u5bc6\u7801\u5b66\u7b97\u6cd5\u8ba1\u7b97\u670d\u52a1\u7b49\u3002","title":"\u529f\u80fd\u7ec4\u4ef6"},{"location":"introduction/overview/#_4","text":"\u4e0b\u56fe\u5c55\u793a\u4e86BFE\u7684\u67b6\u6784\u53caBFE\u751f\u6001\u4e2d\u7684\u4e00\u4e9b\u4f9d\u8d56\u7cfb\u7edf\u3002","title":"\u67b6\u6784\u4ecb\u7ecd"},{"location":"introduction/overview/#_5","text":"\u7528\u6237\u6d41\u91cf\u7ecf\u56db\u5c42\u8d1f\u8f7d\u5747\u8861\u8bbe\u65bd\u8fbe\u5230BFE Server\u3002BFE Server\u5728\u8f6c\u53d1\u6d41\u91cf\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u8bbf\u95ee\u591a\u4e2a\u4f9d\u8d56\u7684\u670d\u52a1\u3002\u5e76\u7ecf\u8fc7\u5185\u5bb9\u8def\u7531\u3001\u8d1f\u8f7d\u5747\u8861\uff0c\u6700\u7ec8\u8f6c\u53d1\u7ed9\u5408\u9002\u7684\u540e\u7aef\u96c6\u7fa4\u3002\u5173\u4e8e\u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u7684\u8be6\u7ec6\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u9605\u8bfb \u6d41\u91cf\u63a5\u5165\u8f6c\u53d1\u6a21\u578b \u3002","title":"\u6570\u636e\u5e73\u9762"},{"location":"introduction/overview/#_6","text":"BFE\u79df\u6237\u901a\u8fc7BFE-Web UI\u6216BFE-API\u7ba1\u7406\u6d41\u91cf\u63a5\u5165\u53ca\u8f6c\u53d1\u7b56\u7565\u3002\u6b64\u5916\uff0c\u63a7\u5236\u5e73\u9762\u8fd8\u8d1f\u8d23\u6267\u884c\u5168\u5c40\u6027\u51b3\u7b56\uff08\u4f8b\u5982\u5168\u5c40\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\u8ba1\u7b97\uff09\u53ca\u96c6\u7fa4\u7ea7\u522b\u5176\u5b83\u7ba1\u7406\u5de5\u4f5c\uff08\u4f8b\u5982\u96c6\u7fa4\u7ea7\u522b\u5f02\u5e38\u5de1\u68c0\u53ca\u5904\u7406\u7b49\uff09\u3002","title":"\u63a7\u5236\u5e73\u9762"},{"location":"introduction/route/","text":"\u96c6\u7fa4\u95f4\u5206\u6d41 \u673a\u5236\u8bf4\u660e \u96c6\u7fa4\u95f4\u5206\u6d41\u662f\u6307BFE\u6536\u5230\u8bf7\u6c42\uff0c\u57fa\u4e8e\u6536\u5230\u6d88\u606f\u5185\u5bb9\u8fdb\u884c\u8def\u7531\uff0c\u786e\u5b9a\u7531\u4ea7\u54c1\u7ebf\u4e2d\u54ea\u4e00\u4e2a\u96c6\u7fa4\u6765\u5904\u7406\u6d88\u606f\u3002 \u793a\u4f8b\u573a\u666f \u5bf9\u4e8e\u4e00\u4e2a\u4ea7\u54c1\u7ebf\u7684\u6d41\u91cf\uff0c\u53ef\u80fd\u9700\u8981\u5b9a\u4e49\u4e0d\u540c\u7684\u96c6\u7fa4\u6765\u5904\u7406\u3002\u4f8b\u5982\uff0c\u5bf9\u4ea7\u54c1\u7ebf(demo)\uff0c\u53ef\u4ee5\u5b9a\u4e493\u79cd\u670d\u52a1\u96c6\u7fa4\uff0c\u5b9e\u73b0\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u6d41\u91cf\u7684\u5904\u7406\uff1a \u9759\u6001\u96c6\u7fa4(demo-static)\uff1a\u670d\u52a1\u9759\u6001\u6d41\u91cf post\u96c6\u7fa4(demo-post)\uff1a\u670d\u52a1post\u6d41\u91cf main\u96c6\u7fa4(demo-main)\uff1a\u670d\u52a1\u5176\u4ed6\u6d41\u91cf BFE\u652f\u6301\u6839\u636e\u914d\u7f6e\u7684\u5206\u6d41\u89c4\u5219, \u5c06\u6d41\u91cf\u8f6c\u53d1\u5230\u4ee5\u4e0a\u4e0d\u540c\u7684\u96c6\u7fa4\u3002 \u5206\u6d41\u7684\u914d\u7f6e\u65b9\u5f0f BFE\u57fa\u4e8e\u8bf7\u6c42\u5185\u5bb9\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\uff0c\u6765\u51b3\u5b9a\u5206\u6d41 \u53ef\u4ee5\u4f7f\u7528\u7684\u4fe1\u606f\u5305\u62ec\uff1ahost\uff0cpath\uff0c query\uff0ccookie\uff0cmethod\u7b49 BFE\u63d0\u4f9b\u4e86\u4e00\u4e2a\u79f0\u4e3aCondition\u7684\u63cf\u8ff0\u673a\u5236 \u5bf9\u4e8e\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5demo\u8fd9\u4e2a\u4ea7\u54c1\u7ebf\u521b\u5efa\u4e863\u6761\u5206\u6d41\u89c4\u5219 \u7b2c\u4e00\u6761\uff1a\u5bf9\u4e8epath\u4ee5\"/static\"\u4f5c\u4e3a\u524d\u7f00\u7684\uff0c\u90fd\u53d1\u5f80demo-static \u7b2c\u4e8c\u6761\uff1a\u8bf7\u6c42\u65b9\u6cd5\u4e3a\"POST\"\u3001\u5e76\u4e14path\u662f\u4ee5\"/setting\"\u4e3a\u524d\u7f00\u7684\uff0c\u90fd\u53d1\u5f80demo-post \u7b2c\u4e09\u6761\uff1a\u5982\u679c\u4ee5\u4e0a\u4e24\u6761\u89c4\u5219\u6ca1\u6709\u547d\u4e2d\uff0c\u5219\u51e1\u662f\u8fd9\u4e2a\u4ea7\u54c1\u7684\u6d41\u91cf\u3001\u90fd\u53d1\u5f80demo-main \u914d\u7f6e\u5206\u6d41\u89c4\u5219\u7684\u6ce8\u610f\u4e8b\u9879 \u5728\u914d\u7f6e\u4e00\u4e2a\u4ea7\u54c1\u7ebf\u7684\u5206\u6d41\u89c4\u5219\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u4e8b\u9879\uff1a \u591a\u6761\u5206\u6d41\u89c4\u5219\u4e4b\u95f4\u662f\u6709\u5e8f\u7684 \u5bf9\u4e8e\u4e00\u4e2aHTTP\u8bf7\u6c42\uff0c\u4f1a\u6309\u7167\u4ece\u4e0a\u81f3\u4e0b\u7684\u987a\u5e8f\uff0c\u9010\u6761\u53bb\u5c1d\u8bd5\u5339\u914d\u5206\u6d41\u6761\u4ef6 \u53ea\u8981\u547d\u4e2d\u4efb\u4f55\u4e00\u4e2a\u5206\u6d41\u89c4\u5219\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u7ed3\u675f \u5fc5\u987b\u5b58\u5728\u4e00\u4e2a\"default\u89c4\u5219\" default\u89c4\u5219\u6c38\u8fdc\u5904\u4e8e\u89c4\u5219\u5217\u8868\u7684\u6700\u540e\u4e00\u6761 \u5982\u679c\u5176\u4ed6\u5206\u6d41\u89c4\u5219\u90fd\u6ca1\u6709\u547d\u4e2d\uff0c\u5219\u8bf7\u6c42\u4f1a\u53d1\u5f80default\u89c4\u5219\u6240\u6307\u5b9a\u7684\u96c6\u7fa4","title":"\u57fa\u4e8e\u5185\u5bb9\u8def\u7531"},{"location":"introduction/route/#_1","text":"","title":"\u96c6\u7fa4\u95f4\u5206\u6d41"},{"location":"introduction/route/#_2","text":"\u96c6\u7fa4\u95f4\u5206\u6d41\u662f\u6307BFE\u6536\u5230\u8bf7\u6c42\uff0c\u57fa\u4e8e\u6536\u5230\u6d88\u606f\u5185\u5bb9\u8fdb\u884c\u8def\u7531\uff0c\u786e\u5b9a\u7531\u4ea7\u54c1\u7ebf\u4e2d\u54ea\u4e00\u4e2a\u96c6\u7fa4\u6765\u5904\u7406\u6d88\u606f\u3002","title":"\u673a\u5236\u8bf4\u660e"},{"location":"introduction/route/#_3","text":"\u5bf9\u4e8e\u4e00\u4e2a\u4ea7\u54c1\u7ebf\u7684\u6d41\u91cf\uff0c\u53ef\u80fd\u9700\u8981\u5b9a\u4e49\u4e0d\u540c\u7684\u96c6\u7fa4\u6765\u5904\u7406\u3002\u4f8b\u5982\uff0c\u5bf9\u4ea7\u54c1\u7ebf(demo)\uff0c\u53ef\u4ee5\u5b9a\u4e493\u79cd\u670d\u52a1\u96c6\u7fa4\uff0c\u5b9e\u73b0\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u6d41\u91cf\u7684\u5904\u7406\uff1a \u9759\u6001\u96c6\u7fa4(demo-static)\uff1a\u670d\u52a1\u9759\u6001\u6d41\u91cf post\u96c6\u7fa4(demo-post)\uff1a\u670d\u52a1post\u6d41\u91cf main\u96c6\u7fa4(demo-main)\uff1a\u670d\u52a1\u5176\u4ed6\u6d41\u91cf BFE\u652f\u6301\u6839\u636e\u914d\u7f6e\u7684\u5206\u6d41\u89c4\u5219, \u5c06\u6d41\u91cf\u8f6c\u53d1\u5230\u4ee5\u4e0a\u4e0d\u540c\u7684\u96c6\u7fa4\u3002","title":"\u793a\u4f8b\u573a\u666f"},{"location":"introduction/route/#_4","text":"BFE\u57fa\u4e8e\u8bf7\u6c42\u5185\u5bb9\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\uff0c\u6765\u51b3\u5b9a\u5206\u6d41 \u53ef\u4ee5\u4f7f\u7528\u7684\u4fe1\u606f\u5305\u62ec\uff1ahost\uff0cpath\uff0c query\uff0ccookie\uff0cmethod\u7b49 BFE\u63d0\u4f9b\u4e86\u4e00\u4e2a\u79f0\u4e3aCondition\u7684\u63cf\u8ff0\u673a\u5236 \u5bf9\u4e8e\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5demo\u8fd9\u4e2a\u4ea7\u54c1\u7ebf\u521b\u5efa\u4e863\u6761\u5206\u6d41\u89c4\u5219 \u7b2c\u4e00\u6761\uff1a\u5bf9\u4e8epath\u4ee5\"/static\"\u4f5c\u4e3a\u524d\u7f00\u7684\uff0c\u90fd\u53d1\u5f80demo-static \u7b2c\u4e8c\u6761\uff1a\u8bf7\u6c42\u65b9\u6cd5\u4e3a\"POST\"\u3001\u5e76\u4e14path\u662f\u4ee5\"/setting\"\u4e3a\u524d\u7f00\u7684\uff0c\u90fd\u53d1\u5f80demo-post \u7b2c\u4e09\u6761\uff1a\u5982\u679c\u4ee5\u4e0a\u4e24\u6761\u89c4\u5219\u6ca1\u6709\u547d\u4e2d\uff0c\u5219\u51e1\u662f\u8fd9\u4e2a\u4ea7\u54c1\u7684\u6d41\u91cf\u3001\u90fd\u53d1\u5f80demo-main","title":"\u5206\u6d41\u7684\u914d\u7f6e\u65b9\u5f0f"},{"location":"introduction/route/#_5","text":"\u5728\u914d\u7f6e\u4e00\u4e2a\u4ea7\u54c1\u7ebf\u7684\u5206\u6d41\u89c4\u5219\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u4e8b\u9879\uff1a \u591a\u6761\u5206\u6d41\u89c4\u5219\u4e4b\u95f4\u662f\u6709\u5e8f\u7684 \u5bf9\u4e8e\u4e00\u4e2aHTTP\u8bf7\u6c42\uff0c\u4f1a\u6309\u7167\u4ece\u4e0a\u81f3\u4e0b\u7684\u987a\u5e8f\uff0c\u9010\u6761\u53bb\u5c1d\u8bd5\u5339\u914d\u5206\u6d41\u6761\u4ef6 \u53ea\u8981\u547d\u4e2d\u4efb\u4f55\u4e00\u4e2a\u5206\u6d41\u89c4\u5219\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u7ed3\u675f \u5fc5\u987b\u5b58\u5728\u4e00\u4e2a\"default\u89c4\u5219\" default\u89c4\u5219\u6c38\u8fdc\u5904\u4e8e\u89c4\u5219\u5217\u8868\u7684\u6700\u540e\u4e00\u6761 \u5982\u679c\u5176\u4ed6\u5206\u6d41\u89c4\u5219\u90fd\u6ca1\u6709\u547d\u4e2d\uff0c\u5219\u8bf7\u6c42\u4f1a\u53d1\u5f80default\u89c4\u5219\u6240\u6307\u5b9a\u7684\u96c6\u7fa4","title":"\u914d\u7f6e\u5206\u6d41\u89c4\u5219\u7684\u6ce8\u610f\u4e8b\u9879"},{"location":"introduction/terminology/","text":"\u6982\u5ff5\u8bf4\u660e \u4ea7\u54c1\u7ebf(Product) \u4ea7\u54c1\u7ebf\u5373\u4e3aBFE\u4e2d\u7684\"\u79df\u6237\"\u3002BFE\u4e2d\u7684\u914d\u7f6e\uff0c\u6bd4\u5982\u8f6c\u53d1\u7684\u7b56\u7565\u3001\u6743\u9650\u7b49\uff0c\u662f\u4ee5\u4ea7\u54c1\u7ebf\u4e3a\u5355\u4f4d\u6765\u8fdb\u884c\u8bbe\u7f6e\u7684\u3002 \u96c6\u7fa4(Cluster) \u5177\u6709\u540c\u7c7b\u529f\u80fd\u7684\u540e\u7aef\u7684\u96c6\u5408\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u96c6\u7fa4\u3002\u4e00\u4e2a\u4ea7\u54c1\u7ebf\u4e2d\u53ef\u5b9a\u4e49\u591a\u4e2a\u96c6\u7fa4\u3002 \u901a\u5e38\uff0c\u4e00\u4e2a\u96c6\u7fa4\u7684\u8303\u56f4\u53ef\u80fd\u8de8\u8d8a\u591a\u4e2aIDC\u3002 \u5b50\u96c6\u7fa4(Subcluster) \u96c6\u7fa4\u53c8\u53ef\u4ee5\u5212\u5206\u4e3a\u591a\u4e2a\u5b50\u96c6\u7fa4\u3002 \u901a\u5e38\uff0c\u5c06\u96c6\u7fa4\u4e2d\u5904\u4e8e\u540c\u4e00IDC\u4e2d\u7684\u540e\u7aef\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5b50\u96c6\u7fa4\u3002 \u5b9e\u4f8b(Instance) \u6bcf\u4e2a\u5b50\u96c6\u7fa4\u53ef\u5305\u542b\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5b9e\u4f8b\u3002 \u5bf9\u4e8eBFE\uff0c\u6bcf\u4e2a\u540e\u7aef\u5b9e\u4f8b\u8868\u73b0\u4e3a\"IP\u5730\u5740 + \u7aef\u53e3\u53f7\"\u3002","title":"\u76f8\u5173\u672f\u8bed"},{"location":"introduction/terminology/#_1","text":"","title":"\u6982\u5ff5\u8bf4\u660e"},{"location":"introduction/terminology/#product","text":"\u4ea7\u54c1\u7ebf\u5373\u4e3aBFE\u4e2d\u7684\"\u79df\u6237\"\u3002BFE\u4e2d\u7684\u914d\u7f6e\uff0c\u6bd4\u5982\u8f6c\u53d1\u7684\u7b56\u7565\u3001\u6743\u9650\u7b49\uff0c\u662f\u4ee5\u4ea7\u54c1\u7ebf\u4e3a\u5355\u4f4d\u6765\u8fdb\u884c\u8bbe\u7f6e\u7684\u3002","title":"\u4ea7\u54c1\u7ebf(Product)"},{"location":"introduction/terminology/#cluster","text":"\u5177\u6709\u540c\u7c7b\u529f\u80fd\u7684\u540e\u7aef\u7684\u96c6\u5408\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u96c6\u7fa4\u3002\u4e00\u4e2a\u4ea7\u54c1\u7ebf\u4e2d\u53ef\u5b9a\u4e49\u591a\u4e2a\u96c6\u7fa4\u3002 \u901a\u5e38\uff0c\u4e00\u4e2a\u96c6\u7fa4\u7684\u8303\u56f4\u53ef\u80fd\u8de8\u8d8a\u591a\u4e2aIDC\u3002","title":"\u96c6\u7fa4(Cluster)"},{"location":"introduction/terminology/#subcluster","text":"\u96c6\u7fa4\u53c8\u53ef\u4ee5\u5212\u5206\u4e3a\u591a\u4e2a\u5b50\u96c6\u7fa4\u3002 \u901a\u5e38\uff0c\u5c06\u96c6\u7fa4\u4e2d\u5904\u4e8e\u540c\u4e00IDC\u4e2d\u7684\u540e\u7aef\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5b50\u96c6\u7fa4\u3002","title":"\u5b50\u96c6\u7fa4(Subcluster)"},{"location":"introduction/terminology/#instance","text":"\u6bcf\u4e2a\u5b50\u96c6\u7fa4\u53ef\u5305\u542b\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5b9e\u4f8b\u3002 \u5bf9\u4e8eBFE\uff0c\u6bcf\u4e2a\u540e\u7aef\u5b9e\u4f8b\u8868\u73b0\u4e3a\"IP\u5730\u5740 + \u7aef\u53e3\u53f7\"\u3002","title":"\u5b9e\u4f8b(Instance)"},{"location":"modules/modules/","text":"\u6269\u5c55\u6a21\u5757 mod_access mod_auth_basic mod_auth_jwt mod_block mod_compress mod_doh mod_errors mod_geo mod_header mod_http_code mod_key_log mod_logid mod_prison mod_redirect mod_rewrite mod_static mod_tag mod_trace mod_trust_clientip mod_userid","title":"\u6269\u5c55\u6a21\u5757"},{"location":"modules/modules/#_1","text":"mod_access mod_auth_basic mod_auth_jwt mod_block mod_compress mod_doh mod_errors mod_geo mod_header mod_http_code mod_key_log mod_logid mod_prison mod_redirect mod_rewrite mod_static mod_tag mod_trace mod_trust_clientip mod_userid","title":"\u6269\u5c55\u6a21\u5757"},{"location":"modules/mod_access/mod_access/","text":"mod_access \u6a21\u5757\u7b80\u4ecb mod_access\u4ee5\u6307\u5b9a\u683c\u5f0f\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\u548c\u4f1a\u8bdd\u65e5\u5fd7\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_access/mod_access.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Log.LogPrefix String \u65e5\u5fd7\u6587\u4ef6\u524d\u7f00\u540d\u79f0 Log.LogDir String access\u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 Log.RotateWhen String \u65e5\u5fd7\u5207\u5272\u65f6\u95f4\uff0c\u652f\u6301 M/H/D/MIDNIGHT/NEXTHOUR Log.BackupCount Integer \u6700\u5927\u7684\u65e5\u5fd7\u5b58\u50a8\u6570\u91cf Template.RequestTemplate String \u8bf7\u6c42\u65e5\u5fd7\u6a21\u677f Template.SessionTemplate String \u4f1a\u8bdd\u65e5\u5fd7\u6a21\u677f RequestTemplate/SessionTemplate \u4e2d $\u5f00\u5934\u7684\u4ee3\u8868\u53d8\u91cf, \u652f\u6301\u7684\u53d8\u91cf\u5217\u8868\u8be6\u89c1\"\u65e5\u5fd7\u53d8\u91cf\"\u7ae0\u8282\u8bf4\u660e RequestTemplate \u8fd8\u652f\u6301\u4ee5\u4e0b\u51e0\u79cd\u5185\u7f6e\u6a21\u677f\uff0c\u5982\u914d\u7f6e RequestTemplate = COMMON\u6253\u5370CLF\u65e5\u5fd7 COMMON\uff1aCommon Log Format; \u7b49\u4ef7\u4e8e\u914d\u7f6e RequestTemplate = $host - - $request_time \\\"$request_line\\\" $status_code $res_len COMBINED\uff1aCombined Log Format; \u7b49\u4ef7\u4e8e\u914d\u7f6e RequestTemplate = $host - - $request_time \\\"$request_line\\\" $status_code $res_len \\\"${Referer}req_header\\\" \\\"${User-Agent}req_header\\\" \u914d\u7f6e\u793a\u4f8b [Log] # filename prefix for log LogPrefix = access # access log directory LogDir = ../log # log rotate interval: M/H/D/MIDNIGHT/NEXTHOUR RotateWhen = NEXTHOUR # max number of rotated log files BackupCount = 2 [Template] # template of request log RequestTemplate = \"REQUEST_LOG $time clientip: $remote_addr serverip: $server_addr host: $host product: $product user_agent: ${User-Agent}req_header status: $status_code error: $error\" # template of session log SessionTemplate = \"SESSION_LOG $time clientip: $ses_clientip start_time: $ses_start_time end_time: $ses_end_time overhead: $ses_overhead read_total: $ses_read_total write_total: $ses_write_total keepalive_num: $ses_keepalive_num error: $ses_error\" \u65e5\u5fd7\u53d8\u91cf \u8bf7\u6c42\u65e5\u5fd7\u53d8\u91cf \u53d8\u91cf\u540d \u542b\u4e49 log_id \u8bf7\u6c42\u65e5\u5fd7ID error \u8bf7\u6c42\u5904\u7406\u9519\u8bef product \u4ea7\u54c1\u7ebf\u540d\u79f0 host \u8bf7\u6c42Host\u5b57\u6bb5 url \u8bf7\u6c42URL\u4fe1\u606f vip \u8bf7\u6c42\u8bbf\u95eeVIP is_trust_clientip \u8bf7\u6c42\u662f\u5426\u6765\u81ea\u4fe1\u4efbIP req_uri \u8bf7\u6c42\u884cURI req_header \u8bf7\u6c42\u5934\u90e8, \u4f8b${User-Agent}req_header req_cookie \u8bf7\u6c42Cookie req_nth \u8bf7\u6c42\u5e8f\u53f7\uff08\u8fde\u63a5\u4e0a\u7b2c\u51e0\u4e2a\u8bf7\u6c42) req_body_len \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 status_code \u54cd\u5e94\u72b6\u6001\u7801 res_proto \u54cd\u5e94HTTP\u534f\u8bae\u7248\u672c res_header \u54cd\u5e94\u5934\u90e8, \u4f8b${Server}req_header res_cookie \u54cd\u5e94Set-Cookie redirect \u91cd\u5b9a\u5411\u54cd\u5e94\u5730\u5740 res_body_len \u54cd\u5e94\u5185\u5bb9\u957f\u5ea6 remote_addr \u8fde\u63a5\u5bf9\u7aef\u5730\u5740 server_addr \u8fde\u63a5\u672c\u5730\u5730\u5740 backend \u8bf7\u6c42\u8f6c\u53d1\u540e\u7aef\u4fe1\u606f(\u96c6\u7fa4\u3001\u5b50\u96c6\u7fa4\u3001\u5b9e\u4f8b) cluster_name \u8bf7\u6c42\u8f6c\u53d1\u96c6\u7fa4\u540d\u79f0 subcluster \u8bf7\u6c42\u8f6c\u53d1\u5b50\u96c6\u7fa4\u540d\u79f0 retry_num \u8bf7\u6c42\u8f6c\u53d1\u91cd\u8bd5\u6b21\u6570 all_time \u8bf7\u6c42\u603b\u5904\u7406\u65f6\u95f4 read_req_duration \u8bfb\u8bf7\u6c42\u5934\u6301\u7eed\u65f6\u95f4 proxy_delay \u4ece\u63a5\u6536\u5230\u8bf7\u6c42\u5934\u5230\u5f00\u59cb\u8f6c\u53d1\u8bf7\u6c42\u5ef6\u8fdf\u65f6\u95f4 connect_time \u8fde\u63a5\u540e\u7aef\u65f6\u95f4 write_serve_time \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u63a5\u6536\u5230\u540e\u7aef\u54cd\u5e94\u5934\u6301\u7eed\u65f6\u95f4 response_duration \u4ece\u63a5\u6536\u5230\u54cd\u5e94\u5934\u5230\u5b8c\u6210\u54cd\u5e94\u8f6c\u53d1\u6301\u7eed\u65f6\u95f4 cluster_duration \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u63a5\u6536\u5230\u54cd\u5e94\u5934\u90e8\u6301\u7eed\u65f6\u95f4\uff08\u542b\u91cd\u8bd5\uff09 last_backend_duration \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u63a5\u6536\u5230\u54cd\u5e94\u5934\u90e8\u6301\u7eed\u65f6\u95f4 readwrite_serve_time \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u5b8c\u6210\u54cd\u5e94\u8f6c\u53d1\u6301\u7eed\u65f6\u95f4 since_ses_start_time \u63a5\u6536\u5230\u8bf7\u6c42\u65f6\u5f53\u524d\u4f1a\u8bdd\u6301\u7eed\u65f6\u95f4 \u4f1a\u8bdd\u65e5\u5fd7\u53d8\u91cf \u53d8\u91cf\u540d \u542b\u4e49 ses_clientip \u4f1a\u8bdd\u7528\u6237IP ses_error \u4f1a\u8bdd\u9519\u8bef ses_is_secure \u662f\u5426\u57fa\u4e8eTLS\u534f\u8bae ses_start_time \u4f1a\u8bdd\u5f00\u59cb\u65f6\u95f4 ses_end_time \u4f1a\u8bdd\u7ed3\u675f\u65f6\u95f4 ses_overhead \u4f1a\u8bdd\u6301\u7eed\u65f6\u957f ses_read_total \u4f1a\u8bdd\u8bfb\u53d6\u5b57\u8282\u603b\u6570 ses_write_total \u4f1a\u8bdd\u5199\u51fa\u5b57\u8282\u603b\u6570 ses_tls_client_random TLS\u8fde\u63a5ClientHello Random ses_tls_server_random TLS\u8fde\u63a5ServerHello Random ses_use100 \u662f\u5426\u51fa\u73b0Expect: 100-continue\u8bf7\u6c42 ses_keepalive_num \u4f1a\u8bdd\u603b\u5904\u7406\u8bf7\u6c42\u6570 \u901a\u7528\u65e5\u5fd7\u53d8\u91cf \u53d8\u91cf\u540d \u542b\u4e49 time \u65e5\u5fd7\u8bb0\u5f55\u65f6\u95f4","title":"mod_access"},{"location":"modules/mod_access/mod_access/#mod_access","text":"","title":"mod_access"},{"location":"modules/mod_access/mod_access/#_1","text":"mod_access\u4ee5\u6307\u5b9a\u683c\u5f0f\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\u548c\u4f1a\u8bdd\u65e5\u5fd7\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_access/mod_access/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_access/mod_access/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_access/mod_access.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Log.LogPrefix String \u65e5\u5fd7\u6587\u4ef6\u524d\u7f00\u540d\u79f0 Log.LogDir String access\u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 Log.RotateWhen String \u65e5\u5fd7\u5207\u5272\u65f6\u95f4\uff0c\u652f\u6301 M/H/D/MIDNIGHT/NEXTHOUR Log.BackupCount Integer \u6700\u5927\u7684\u65e5\u5fd7\u5b58\u50a8\u6570\u91cf Template.RequestTemplate String \u8bf7\u6c42\u65e5\u5fd7\u6a21\u677f Template.SessionTemplate String \u4f1a\u8bdd\u65e5\u5fd7\u6a21\u677f RequestTemplate/SessionTemplate \u4e2d $\u5f00\u5934\u7684\u4ee3\u8868\u53d8\u91cf, \u652f\u6301\u7684\u53d8\u91cf\u5217\u8868\u8be6\u89c1\"\u65e5\u5fd7\u53d8\u91cf\"\u7ae0\u8282\u8bf4\u660e RequestTemplate \u8fd8\u652f\u6301\u4ee5\u4e0b\u51e0\u79cd\u5185\u7f6e\u6a21\u677f\uff0c\u5982\u914d\u7f6e RequestTemplate = COMMON\u6253\u5370CLF\u65e5\u5fd7 COMMON\uff1aCommon Log Format; \u7b49\u4ef7\u4e8e\u914d\u7f6e RequestTemplate = $host - - $request_time \\\"$request_line\\\" $status_code $res_len COMBINED\uff1aCombined Log Format; \u7b49\u4ef7\u4e8e\u914d\u7f6e RequestTemplate = $host - - $request_time \\\"$request_line\\\" $status_code $res_len \\\"${Referer}req_header\\\" \\\"${User-Agent}req_header\\\"","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_access/mod_access/#_4","text":"[Log] # filename prefix for log LogPrefix = access # access log directory LogDir = ../log # log rotate interval: M/H/D/MIDNIGHT/NEXTHOUR RotateWhen = NEXTHOUR # max number of rotated log files BackupCount = 2 [Template] # template of request log RequestTemplate = \"REQUEST_LOG $time clientip: $remote_addr serverip: $server_addr host: $host product: $product user_agent: ${User-Agent}req_header status: $status_code error: $error\" # template of session log SessionTemplate = \"SESSION_LOG $time clientip: $ses_clientip start_time: $ses_start_time end_time: $ses_end_time overhead: $ses_overhead read_total: $ses_read_total write_total: $ses_write_total keepalive_num: $ses_keepalive_num error: $ses_error\"","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_access/mod_access/#_5","text":"","title":"\u65e5\u5fd7\u53d8\u91cf"},{"location":"modules/mod_access/mod_access/#_6","text":"\u53d8\u91cf\u540d \u542b\u4e49 log_id \u8bf7\u6c42\u65e5\u5fd7ID error \u8bf7\u6c42\u5904\u7406\u9519\u8bef product \u4ea7\u54c1\u7ebf\u540d\u79f0 host \u8bf7\u6c42Host\u5b57\u6bb5 url \u8bf7\u6c42URL\u4fe1\u606f vip \u8bf7\u6c42\u8bbf\u95eeVIP is_trust_clientip \u8bf7\u6c42\u662f\u5426\u6765\u81ea\u4fe1\u4efbIP req_uri \u8bf7\u6c42\u884cURI req_header \u8bf7\u6c42\u5934\u90e8, \u4f8b${User-Agent}req_header req_cookie \u8bf7\u6c42Cookie req_nth \u8bf7\u6c42\u5e8f\u53f7\uff08\u8fde\u63a5\u4e0a\u7b2c\u51e0\u4e2a\u8bf7\u6c42) req_body_len \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 status_code \u54cd\u5e94\u72b6\u6001\u7801 res_proto \u54cd\u5e94HTTP\u534f\u8bae\u7248\u672c res_header \u54cd\u5e94\u5934\u90e8, \u4f8b${Server}req_header res_cookie \u54cd\u5e94Set-Cookie redirect \u91cd\u5b9a\u5411\u54cd\u5e94\u5730\u5740 res_body_len \u54cd\u5e94\u5185\u5bb9\u957f\u5ea6 remote_addr \u8fde\u63a5\u5bf9\u7aef\u5730\u5740 server_addr \u8fde\u63a5\u672c\u5730\u5730\u5740 backend \u8bf7\u6c42\u8f6c\u53d1\u540e\u7aef\u4fe1\u606f(\u96c6\u7fa4\u3001\u5b50\u96c6\u7fa4\u3001\u5b9e\u4f8b) cluster_name \u8bf7\u6c42\u8f6c\u53d1\u96c6\u7fa4\u540d\u79f0 subcluster \u8bf7\u6c42\u8f6c\u53d1\u5b50\u96c6\u7fa4\u540d\u79f0 retry_num \u8bf7\u6c42\u8f6c\u53d1\u91cd\u8bd5\u6b21\u6570 all_time \u8bf7\u6c42\u603b\u5904\u7406\u65f6\u95f4 read_req_duration \u8bfb\u8bf7\u6c42\u5934\u6301\u7eed\u65f6\u95f4 proxy_delay \u4ece\u63a5\u6536\u5230\u8bf7\u6c42\u5934\u5230\u5f00\u59cb\u8f6c\u53d1\u8bf7\u6c42\u5ef6\u8fdf\u65f6\u95f4 connect_time \u8fde\u63a5\u540e\u7aef\u65f6\u95f4 write_serve_time \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u63a5\u6536\u5230\u540e\u7aef\u54cd\u5e94\u5934\u6301\u7eed\u65f6\u95f4 response_duration \u4ece\u63a5\u6536\u5230\u54cd\u5e94\u5934\u5230\u5b8c\u6210\u54cd\u5e94\u8f6c\u53d1\u6301\u7eed\u65f6\u95f4 cluster_duration \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u63a5\u6536\u5230\u54cd\u5e94\u5934\u90e8\u6301\u7eed\u65f6\u95f4\uff08\u542b\u91cd\u8bd5\uff09 last_backend_duration \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u63a5\u6536\u5230\u54cd\u5e94\u5934\u90e8\u6301\u7eed\u65f6\u95f4 readwrite_serve_time \u4ece\u8bf7\u6c42\u540e\u7aef\u5230\u5b8c\u6210\u54cd\u5e94\u8f6c\u53d1\u6301\u7eed\u65f6\u95f4 since_ses_start_time \u63a5\u6536\u5230\u8bf7\u6c42\u65f6\u5f53\u524d\u4f1a\u8bdd\u6301\u7eed\u65f6\u95f4","title":"\u8bf7\u6c42\u65e5\u5fd7\u53d8\u91cf"},{"location":"modules/mod_access/mod_access/#_7","text":"\u53d8\u91cf\u540d \u542b\u4e49 ses_clientip \u4f1a\u8bdd\u7528\u6237IP ses_error \u4f1a\u8bdd\u9519\u8bef ses_is_secure \u662f\u5426\u57fa\u4e8eTLS\u534f\u8bae ses_start_time \u4f1a\u8bdd\u5f00\u59cb\u65f6\u95f4 ses_end_time \u4f1a\u8bdd\u7ed3\u675f\u65f6\u95f4 ses_overhead \u4f1a\u8bdd\u6301\u7eed\u65f6\u957f ses_read_total \u4f1a\u8bdd\u8bfb\u53d6\u5b57\u8282\u603b\u6570 ses_write_total \u4f1a\u8bdd\u5199\u51fa\u5b57\u8282\u603b\u6570 ses_tls_client_random TLS\u8fde\u63a5ClientHello Random ses_tls_server_random TLS\u8fde\u63a5ServerHello Random ses_use100 \u662f\u5426\u51fa\u73b0Expect: 100-continue\u8bf7\u6c42 ses_keepalive_num \u4f1a\u8bdd\u603b\u5904\u7406\u8bf7\u6c42\u6570","title":"\u4f1a\u8bdd\u65e5\u5fd7\u53d8\u91cf"},{"location":"modules/mod_access/mod_access/#_8","text":"\u53d8\u91cf\u540d \u542b\u4e49 time \u65e5\u5fd7\u8bb0\u5f55\u65f6\u95f4","title":"\u901a\u7528\u65e5\u5fd7\u53d8\u91cf"},{"location":"modules/mod_auth_basic/mod_auth_basic/","text":"mod_auth_basic \u6a21\u5757\u7b80\u4ecb mod_auth_basic\u652f\u6301HTTP\u57fa\u672c\u8ba4\u8bc1\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_auth_basic/mod_auth_basic.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_auth_basic/auth_basic_rule.data [log] OpenDebug = false \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6240\u6709\u4ea7\u54c1\u7ebf\u7684 HTTP \u57fa\u672c\u8ba4\u8bc1\u89c4\u5219\u914d\u7f6e Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b HTTP \u57fa\u672c\u8ba4\u8bc1\u89c4\u5219\u5217\u8868 Config{v}[] Object HTTP\u57fa\u672c\u8ba4\u8bc1\u89c4\u5219 Config{v}[].Cond String \u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].UserFile String \u7528\u6237\u5bc6\u7801\u6587\u4ef6\u8def\u5f84 Config{v}[].Realm String \u8ba4\u8bc1\u89c4\u5219\u751f\u6548\u8303\u56f4 \u9ed8\u8ba4\u503c\"Restricted\" \u7528\u6237\u5bc6\u7801\u6587\u4ef6\u8bf4\u660e\uff1a * \u5bc6\u7801\u4f7f\u7528MD5\u3001SHA1 \u6216 BCrypt \u8fdb\u884c\u54c8\u5e0c\u7f16\u7801, \u53ef\u4f7f\u7528 htpasswd\u3001openssl \u751f\u6210 userfile \u6587\u4ef6 * openssl \u751f\u6210\u5bc6\u7801\u793a\u4f8b printf \"user1:$(openssl passwd -apr1 123456)\\n\" >> ./userfile \u7528\u6237\u5bc6\u7801\u6587\u4ef6\u914d\u7f6e\u793a\u4f8b # user1, 123456 user1:$apr1$mI7SilJz$CWwYJyYKbhVDNl26sdUSh/ user2:{SHA}fEqNCco3Yq9h5ZUglD3CZJT4lBs=:user2, 123456 \u914d\u7f6e\u793a\u4f8b { \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , \"UserFile\" : \"../conf/mod_auth_basic/userfile\" , \"Realm\" : \"example_product\" } ] }, Version \": \" 20190101000000 \" } \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 REQ_AUTH_RULE_HIT \u547d\u4e2d\u57fa\u672c\u8ba4\u8bc1\u89c4\u5219\u7684\u8bf7\u6c42\u6570 REQ_AUTH_CHALLENGE \u547d\u4e2d\u89c4\u5219\u3001\u672a\u643a\u5e26AUTHORIZATION\u5934\u7684\u8bf7\u6c42\u6570 REQ_AUTH_SUCCESS \u8ba4\u8bc1\u6210\u529f\u7684\u8bf7\u6c42\u6570 REQ_AUTH_FAILURE \u8ba4\u8bc1\u5931\u8d25\u7684\u8bf7\u6c42\u6570","title":"mod_auth_basic"},{"location":"modules/mod_auth_basic/mod_auth_basic/#mod_auth_basic","text":"","title":"mod_auth_basic"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_1","text":"mod_auth_basic\u652f\u6301HTTP\u57fa\u672c\u8ba4\u8bc1\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_auth_basic/mod_auth_basic.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_4","text":"[basic] DataPath = mod_auth_basic/auth_basic_rule.data [log] OpenDebug = false","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_6","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6240\u6709\u4ea7\u54c1\u7ebf\u7684 HTTP \u57fa\u672c\u8ba4\u8bc1\u89c4\u5219\u914d\u7f6e Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b HTTP \u57fa\u672c\u8ba4\u8bc1\u89c4\u5219\u5217\u8868 Config{v}[] Object HTTP\u57fa\u672c\u8ba4\u8bc1\u89c4\u5219 Config{v}[].Cond String \u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].UserFile String \u7528\u6237\u5bc6\u7801\u6587\u4ef6\u8def\u5f84 Config{v}[].Realm String \u8ba4\u8bc1\u89c4\u5219\u751f\u6548\u8303\u56f4 \u9ed8\u8ba4\u503c\"Restricted\" \u7528\u6237\u5bc6\u7801\u6587\u4ef6\u8bf4\u660e\uff1a * \u5bc6\u7801\u4f7f\u7528MD5\u3001SHA1 \u6216 BCrypt \u8fdb\u884c\u54c8\u5e0c\u7f16\u7801, \u53ef\u4f7f\u7528 htpasswd\u3001openssl \u751f\u6210 userfile \u6587\u4ef6 * openssl \u751f\u6210\u5bc6\u7801\u793a\u4f8b printf \"user1:$(openssl passwd -apr1 123456)\\n\" >> ./userfile \u7528\u6237\u5bc6\u7801\u6587\u4ef6\u914d\u7f6e\u793a\u4f8b # user1, 123456 user1:$apr1$mI7SilJz$CWwYJyYKbhVDNl26sdUSh/ user2:{SHA}fEqNCco3Yq9h5ZUglD3CZJT4lBs=:user2, 123456","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_7","text":"{ \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , \"UserFile\" : \"../conf/mod_auth_basic/userfile\" , \"Realm\" : \"example_product\" } ] }, Version \": \" 20190101000000 \" }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_auth_basic/mod_auth_basic/#_8","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 REQ_AUTH_RULE_HIT \u547d\u4e2d\u57fa\u672c\u8ba4\u8bc1\u89c4\u5219\u7684\u8bf7\u6c42\u6570 REQ_AUTH_CHALLENGE \u547d\u4e2d\u89c4\u5219\u3001\u672a\u643a\u5e26AUTHORIZATION\u5934\u7684\u8bf7\u6c42\u6570 REQ_AUTH_SUCCESS \u8ba4\u8bc1\u6210\u529f\u7684\u8bf7\u6c42\u6570 REQ_AUTH_FAILURE \u8ba4\u8bc1\u5931\u8d25\u7684\u8bf7\u6c42\u6570","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/","text":"mod_auth_jwt \u6a21\u5757\u7b80\u4ecb mod_auth_jwt\u652f\u6301JWT\u8ba4\u8bc1\u3002 \u914d\u7f6e\u8bf4\u660e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6\uff1aconf/mod_auth_jwt/mod_auth_jwt.conf \u914d\u7f6e\u793a\u4f8b [basic] # The path of the JWK file # For more details, see https://tools.ietf.org/html/rfc7517 SecretPath = mod_auth_jwt/secret.jwk # Config path for products ProductConfigPath = mod_auth_jwt/product_config.data # By default, the module read JWT claims from payload(JWS) or plaintext(JWE) only. # By setting EnabledHeaderClaims to true, the module will try to read JWT claims from header - # in the case that a claim validation was enabled while it's not exists in payload(JWS) or plaintext(JWE). EnabledHeaderClaims = false # Enabled validation for nested JWT # NOTICE:This step will be skipped in the case that the nested JWT parse failed, # it is in the consideration of different encryption key may be used for the nested JWT. # The nested JWT should be Base64URL-encoded as the payload for JWS, # or Base64URL-encoded as encrypted plaintext for JWE. ValidateNested = true # Validation for JWT claims # NOTICE: Validation for claims will be applied when relative claim(s) present in the JWT header - # or payload(when EnabledPayloadClaims was set to true). When no any relative claim(s) present, - # only basic validation (for example: signature check) will be applied. # For more details, see https://tools.ietf.org/html/rfc7519#section-4 # Enable validation for Expiration claim ValidateClaimExp = true # Enable validation for Not Before claim ValidateClaimNbf = true # Enable validation for Issuer claim # ValidateClaimIss = issuer # Enable validation for Subject claim # ValidateClaimSub = subject # Enable validation for Audience claim # ValidateClaimAud = audience [log] OpenDebug = true \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"Version\" , \"Config\" : { \"example_product\" : [ \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , } } } \u4f7f\u7528\u7ea6\u5b9a \u7528\u6cd5\uff1a\u9700\u5c06token\u653e\u7f6e\u5230HTTP\u8bf7\u6c42Authorization\u5934\u4e2d\uff0c\u5e76\u6307\u5b9a\u4e3aBearer\u7c7b\u578b\u3002 \u793a\u4f8b\uff1a Authorization: Bearer <token> JWT(\u5305\u62ec\u5d4c\u5957JWT)\u5fc5\u987b\u4f7f\u7528\u538b\u7f29\u5e8f\u5217\u683c\u5f0f(Compact Serialization)\uff0c\u4e0d\u652f\u6301JSON\u5e8f\u5217\u683c\u5f0f(JSON Serialization)\u3002\u5177\u4f53\u539f\u56e0\u89c1\u4e0b\u8ff0\u7528\u6cd5\u8bf4\u660e\u3002 - \u5173\u4e8e\u5d4c\u5957JWT * \u5728JWS\u4e2d\uff0c\u5c06\u8fdb\u884c\u4e86base64URL\u7f16\u7801\u540e\u7684JWT\u76f4\u63a5\u4f5c\u4e3aJWS\u7684Payload\u90e8\u5206\uff0c\u5219Payload\u4e3a\uff1abase64URLEncode(Nested JWT)\u3002 * \u5728JWE\u4e2d\uff0c\u5c06\u8fdb\u884c\u4e86base64URL\u7f16\u7801\u540e\u7684JWT\u4f5c\u4e3aJWE\u7684plaintext\uff0c\u5219ciphertext\u4e3a\uff1abase64URLEncode(Encrypt(Nested JWT))\u3002 * \u5f53\u5d4c\u5957JWT\u80fd\u591f\u88ab\u6b63\u5e38\u89e3\u6790(\u672a\u89e3\u5bc6\uff0c\u4ec5\u89e3\u6790)\u65f6\uff0cJWT\u9a8c\u8bc1\u901a\u8fc7\u7684\u6761\u4ef6\u4e3a \u4e3b\u4f53JWT\u9a8c\u8bc1\u901a\u8fc7+\u5d4c\u5957JWT\u9a8c\u8bc1\u901a\u8fc7 (\u8fd9\u662f\u4e2a\u9012\u5f52\u8fc7\u7a0b)\u3002 * \u5bf9\u4e8e\u65e0\u6cd5\u6b63\u5e38\u89e3\u6790\u7684\u5d4c\u5957JWT(\u5bc6\u94a5\u4e0d\u540c\u6216\u8005\u683c\u5f0f\u95ee\u9898)\uff0c\u5bf9\u5d4c\u5957JWT\u7684\u9a8c\u8bc1\u4f1a\u88ab\u8df3\u8fc7(\u9ed8\u8ba4\u6210\u529f)\uff0c\u6b64\u65f6JWT\u9a8c\u8bc1\u901a\u8fc7\u7684\u6761\u4ef6\u4ec5\u4e3a \u4e3b\u4f53JWT\u9a8c\u8bc1\u901a\u8fc7 \u3002 \u5173\u4e8e\u57fa\u7840\u9a8c\u8bc1 \u5bf9\u4e8eJWS\uff0c\u82e5\u7b7e\u540d\u6821\u9a8c\u901a\u8fc7\uff0c\u5219\u8ba4\u4e3a\u57fa\u7840\u9a8c\u8bc1\u901a\u8fc7\u3002 \u5bf9\u4e8eJWE\uff0c\u82e5 \u80fd\u591f\u6b63\u786e\u89e3\u5bc6\u51faCEK(Content Encrypted Key) \u3001\u4e14\u5229\u7528\u8be5CEK \u80fd\u591f\u89e3\u5bc6\u51fa\u660e\u6587\u5185\u5bb9 \uff0c\u5373\u89e3\u5bc6\u660e\u6587\u8fc7\u7a0b\u65e0\u5f02\u5e38\u629b\u51fa(\u65e0\u89c6\u660e\u6587\u5177\u4f53\u5185\u5bb9\uff0c\u4e8b\u5b9e\u4e0a\u5bf9\u4e8e\u660e\u6587\u5177\u4f53\u5185\u5bb9\u4e5f\u6ca1\u6709\u4e00\u4e2a\u6807\u51c6\u80fd\u591f\u8fdb\u884c\u68c0\u67e5)\uff0c\u5219\u8ba4\u4e3a\u57fa\u7840\u9a8c\u8bc1\u901a\u8fc7\u3002 \u5173\u4e8e\u5b57\u6bb5\u9a8c\u8bc1 \u5f00\u542f\u5b57\u6bb5\u9a8c\u8bc1\u4ec5\u5728\u80fd\u591f\u5728JWT\u4e2d\u67e5\u627e\u5230\u76f8\u5173\u5b57\u6bb5\u7684\u6761\u4ef6\u4e0b\u751f\u6548\uff0c\u5f53\u5b57\u6bb5\u4e0d\u5b58\u5728\u65f6\uff0c\u76f8\u5173\u5b57\u6bb5\u9a8c\u8bc1\u4f1a\u88ab\u8df3\u8fc7(\u9ed8\u8ba4\u6210\u529f)\u3002 \u9ed8\u8ba4\u7684\uff0c\u8fdb\u884c\u5b57\u6bb5\u9a8c\u8bc1\u65f6\u4ec5\u5728JWS\u7684Payload\u90e8\u5206\u6216JWE\u7684plaintext\u90e8\u5206\u67e5\u627e\u76f8\u5173\u5b57\u6bb5\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u542f\u7528EnabledHeaderClaims\u914d\u7f6e\u9879\u8fbe\u5230\u5f53\u9ed8\u8ba4\u4f4d\u7f6e\u4e0d\u5b58\u5728\u76f8\u5e94\u5b57\u6bb5\u65f6\uff0c\u5219\u5230Header\u90e8\u5206\u4e2d\u67e5\u627e\u76f8\u5173\u5b57\u6bb5\u7684\u76ee\u7684\u3002JWS\u7684\u7b7e\u540d\u9a8c\u8bc1\u673a\u5236\u5929\u7136\u5730\u53ef\u4ee5\u4fdd\u8bc1Header\u548cPayload\u7684\u6570\u636e\u5b8c\u6574\u6027\uff1bJWE\u867d\u7136\u6ca1\u6709\u7b7e\u540d\u9a8c\u8bc1\u673a\u5236\uff0c\u4f46\u7531\u4e8e\u5176\u89e3\u5bc6AAD\u4e0eHeader\u76f8\u5173\uff0cHeader\u88ab\u7be1\u6539\u4f1a\u5bfc\u81f4AAD\u4e0d\u6b63\u786e\uff0c\u65e0\u6cd5\u6b63\u786e\u89e3\u5bc6\u51fa\u660e\u6587\uff0c\u95f4\u63a5\u4fdd\u8bc1\u4e86JWE\u7684Header\u7684\u6570\u636e\u5b8c\u6574\u6027\u3002\u56e0\u6b64\uff0c\u542f\u7528\u8be5\u914d\u7f6e\u9009\u9879\u4e0d\u5fc5\u62c5\u5fc3\u6570\u636e\u5b8c\u6574\u6027\u95ee\u9898\uff0c\u65e0\u8bba\u662f\u5bf9\u4e8eJWS\u6216\u662fJWE\u3002 \u7531\u4e8e JWE \u7684RFC\u6587\u6863\u4e2d\u5e76\u672a\u89c4\u5b9aplaintext\u7684\u5177\u4f53\u683c\u5f0f\uff1b\u800c JWT \u7684RFC\u6587\u6863\u8bf4\u660e\u4e86\u5728JWE\u4e2d\uff0c\u58f0\u660e\u5b57\u6bb5\u5e94\u4e3aJWE\u7684plaintext\u90e8\u5206\u3002\u6545\u7ea6\u5b9a\uff0c\u5bf9\u4e8eJWE\uff0c\u5728\u9700\u8981\u627f\u8f7d\u58f0\u660e\u5b57\u6bb5\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u8fdb\u884c\u4e86base64URL\u7f16\u7801\u540e\u7684\u58f0\u660e\u5b57\u6bb5JSON\u5b57\u7b26\u4e32\u4f5c\u4e3aJWE\u7684plaintext\uff0c\u5219ciphertext\u4e3a\uff1abase64URLEncode(Encrypt(Claim Set))\u3002\u5728plaintext\u65e0\u6cd5\u5e94\u7528\u8be5\u89c4\u5219\u8fdb\u884c\u89e3\u7801\u3001\u4e14\u672a\u542f\u7528EnabledHeaderClaims\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9JWE\u7684\u5b57\u6bb5\u9a8c\u8bc1\u4f1a\u88ab\u8df3\u8fc7(\u9ed8\u8ba4\u6210\u529f)\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 AUTH_TOTAL \u547d\u4e2d\u8ba4\u8bc1\u89c4\u5219\u7684\u8bf7\u6c42\u6570 AUTH_SUCCESS \u8ba4\u8bc1\u6210\u529f\u7684\u8bf7\u6c42\u6570 AUTH_FAILED \u8ba4\u8bc1\u5931\u8d25\u7684\u8bf7\u6c42\u6570","title":"mod_auth_jwt"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#mod_auth_jwt","text":"","title":"mod_auth_jwt"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_1","text":"mod_auth_jwt\u652f\u6301JWT\u8ba4\u8bc1\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_2","text":"","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6\uff1aconf/mod_auth_jwt/mod_auth_jwt.conf","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_4","text":"[basic] # The path of the JWK file # For more details, see https://tools.ietf.org/html/rfc7517 SecretPath = mod_auth_jwt/secret.jwk # Config path for products ProductConfigPath = mod_auth_jwt/product_config.data # By default, the module read JWT claims from payload(JWS) or plaintext(JWE) only. # By setting EnabledHeaderClaims to true, the module will try to read JWT claims from header - # in the case that a claim validation was enabled while it's not exists in payload(JWS) or plaintext(JWE). EnabledHeaderClaims = false # Enabled validation for nested JWT # NOTICE:This step will be skipped in the case that the nested JWT parse failed, # it is in the consideration of different encryption key may be used for the nested JWT. # The nested JWT should be Base64URL-encoded as the payload for JWS, # or Base64URL-encoded as encrypted plaintext for JWE. ValidateNested = true # Validation for JWT claims # NOTICE: Validation for claims will be applied when relative claim(s) present in the JWT header - # or payload(when EnabledPayloadClaims was set to true). When no any relative claim(s) present, - # only basic validation (for example: signature check) will be applied. # For more details, see https://tools.ietf.org/html/rfc7519#section-4 # Enable validation for Expiration claim ValidateClaimExp = true # Enable validation for Not Before claim ValidateClaimNbf = true # Enable validation for Issuer claim # ValidateClaimIss = issuer # Enable validation for Subject claim # ValidateClaimSub = subject # Enable validation for Audience claim # ValidateClaimAud = audience [log] OpenDebug = true","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_6","text":"{ \"Version\" : \"Version\" , \"Config\" : { \"example_product\" : [ \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , } } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_7","text":"\u7528\u6cd5\uff1a\u9700\u5c06token\u653e\u7f6e\u5230HTTP\u8bf7\u6c42Authorization\u5934\u4e2d\uff0c\u5e76\u6307\u5b9a\u4e3aBearer\u7c7b\u578b\u3002 \u793a\u4f8b\uff1a Authorization: Bearer <token> JWT(\u5305\u62ec\u5d4c\u5957JWT)\u5fc5\u987b\u4f7f\u7528\u538b\u7f29\u5e8f\u5217\u683c\u5f0f(Compact Serialization)\uff0c\u4e0d\u652f\u6301JSON\u5e8f\u5217\u683c\u5f0f(JSON Serialization)\u3002\u5177\u4f53\u539f\u56e0\u89c1\u4e0b\u8ff0\u7528\u6cd5\u8bf4\u660e\u3002 - \u5173\u4e8e\u5d4c\u5957JWT * \u5728JWS\u4e2d\uff0c\u5c06\u8fdb\u884c\u4e86base64URL\u7f16\u7801\u540e\u7684JWT\u76f4\u63a5\u4f5c\u4e3aJWS\u7684Payload\u90e8\u5206\uff0c\u5219Payload\u4e3a\uff1abase64URLEncode(Nested JWT)\u3002 * \u5728JWE\u4e2d\uff0c\u5c06\u8fdb\u884c\u4e86base64URL\u7f16\u7801\u540e\u7684JWT\u4f5c\u4e3aJWE\u7684plaintext\uff0c\u5219ciphertext\u4e3a\uff1abase64URLEncode(Encrypt(Nested JWT))\u3002 * \u5f53\u5d4c\u5957JWT\u80fd\u591f\u88ab\u6b63\u5e38\u89e3\u6790(\u672a\u89e3\u5bc6\uff0c\u4ec5\u89e3\u6790)\u65f6\uff0cJWT\u9a8c\u8bc1\u901a\u8fc7\u7684\u6761\u4ef6\u4e3a \u4e3b\u4f53JWT\u9a8c\u8bc1\u901a\u8fc7+\u5d4c\u5957JWT\u9a8c\u8bc1\u901a\u8fc7 (\u8fd9\u662f\u4e2a\u9012\u5f52\u8fc7\u7a0b)\u3002 * \u5bf9\u4e8e\u65e0\u6cd5\u6b63\u5e38\u89e3\u6790\u7684\u5d4c\u5957JWT(\u5bc6\u94a5\u4e0d\u540c\u6216\u8005\u683c\u5f0f\u95ee\u9898)\uff0c\u5bf9\u5d4c\u5957JWT\u7684\u9a8c\u8bc1\u4f1a\u88ab\u8df3\u8fc7(\u9ed8\u8ba4\u6210\u529f)\uff0c\u6b64\u65f6JWT\u9a8c\u8bc1\u901a\u8fc7\u7684\u6761\u4ef6\u4ec5\u4e3a \u4e3b\u4f53JWT\u9a8c\u8bc1\u901a\u8fc7 \u3002 \u5173\u4e8e\u57fa\u7840\u9a8c\u8bc1 \u5bf9\u4e8eJWS\uff0c\u82e5\u7b7e\u540d\u6821\u9a8c\u901a\u8fc7\uff0c\u5219\u8ba4\u4e3a\u57fa\u7840\u9a8c\u8bc1\u901a\u8fc7\u3002 \u5bf9\u4e8eJWE\uff0c\u82e5 \u80fd\u591f\u6b63\u786e\u89e3\u5bc6\u51faCEK(Content Encrypted Key) \u3001\u4e14\u5229\u7528\u8be5CEK \u80fd\u591f\u89e3\u5bc6\u51fa\u660e\u6587\u5185\u5bb9 \uff0c\u5373\u89e3\u5bc6\u660e\u6587\u8fc7\u7a0b\u65e0\u5f02\u5e38\u629b\u51fa(\u65e0\u89c6\u660e\u6587\u5177\u4f53\u5185\u5bb9\uff0c\u4e8b\u5b9e\u4e0a\u5bf9\u4e8e\u660e\u6587\u5177\u4f53\u5185\u5bb9\u4e5f\u6ca1\u6709\u4e00\u4e2a\u6807\u51c6\u80fd\u591f\u8fdb\u884c\u68c0\u67e5)\uff0c\u5219\u8ba4\u4e3a\u57fa\u7840\u9a8c\u8bc1\u901a\u8fc7\u3002 \u5173\u4e8e\u5b57\u6bb5\u9a8c\u8bc1 \u5f00\u542f\u5b57\u6bb5\u9a8c\u8bc1\u4ec5\u5728\u80fd\u591f\u5728JWT\u4e2d\u67e5\u627e\u5230\u76f8\u5173\u5b57\u6bb5\u7684\u6761\u4ef6\u4e0b\u751f\u6548\uff0c\u5f53\u5b57\u6bb5\u4e0d\u5b58\u5728\u65f6\uff0c\u76f8\u5173\u5b57\u6bb5\u9a8c\u8bc1\u4f1a\u88ab\u8df3\u8fc7(\u9ed8\u8ba4\u6210\u529f)\u3002 \u9ed8\u8ba4\u7684\uff0c\u8fdb\u884c\u5b57\u6bb5\u9a8c\u8bc1\u65f6\u4ec5\u5728JWS\u7684Payload\u90e8\u5206\u6216JWE\u7684plaintext\u90e8\u5206\u67e5\u627e\u76f8\u5173\u5b57\u6bb5\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u542f\u7528EnabledHeaderClaims\u914d\u7f6e\u9879\u8fbe\u5230\u5f53\u9ed8\u8ba4\u4f4d\u7f6e\u4e0d\u5b58\u5728\u76f8\u5e94\u5b57\u6bb5\u65f6\uff0c\u5219\u5230Header\u90e8\u5206\u4e2d\u67e5\u627e\u76f8\u5173\u5b57\u6bb5\u7684\u76ee\u7684\u3002JWS\u7684\u7b7e\u540d\u9a8c\u8bc1\u673a\u5236\u5929\u7136\u5730\u53ef\u4ee5\u4fdd\u8bc1Header\u548cPayload\u7684\u6570\u636e\u5b8c\u6574\u6027\uff1bJWE\u867d\u7136\u6ca1\u6709\u7b7e\u540d\u9a8c\u8bc1\u673a\u5236\uff0c\u4f46\u7531\u4e8e\u5176\u89e3\u5bc6AAD\u4e0eHeader\u76f8\u5173\uff0cHeader\u88ab\u7be1\u6539\u4f1a\u5bfc\u81f4AAD\u4e0d\u6b63\u786e\uff0c\u65e0\u6cd5\u6b63\u786e\u89e3\u5bc6\u51fa\u660e\u6587\uff0c\u95f4\u63a5\u4fdd\u8bc1\u4e86JWE\u7684Header\u7684\u6570\u636e\u5b8c\u6574\u6027\u3002\u56e0\u6b64\uff0c\u542f\u7528\u8be5\u914d\u7f6e\u9009\u9879\u4e0d\u5fc5\u62c5\u5fc3\u6570\u636e\u5b8c\u6574\u6027\u95ee\u9898\uff0c\u65e0\u8bba\u662f\u5bf9\u4e8eJWS\u6216\u662fJWE\u3002 \u7531\u4e8e JWE \u7684RFC\u6587\u6863\u4e2d\u5e76\u672a\u89c4\u5b9aplaintext\u7684\u5177\u4f53\u683c\u5f0f\uff1b\u800c JWT \u7684RFC\u6587\u6863\u8bf4\u660e\u4e86\u5728JWE\u4e2d\uff0c\u58f0\u660e\u5b57\u6bb5\u5e94\u4e3aJWE\u7684plaintext\u90e8\u5206\u3002\u6545\u7ea6\u5b9a\uff0c\u5bf9\u4e8eJWE\uff0c\u5728\u9700\u8981\u627f\u8f7d\u58f0\u660e\u5b57\u6bb5\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u8fdb\u884c\u4e86base64URL\u7f16\u7801\u540e\u7684\u58f0\u660e\u5b57\u6bb5JSON\u5b57\u7b26\u4e32\u4f5c\u4e3aJWE\u7684plaintext\uff0c\u5219ciphertext\u4e3a\uff1abase64URLEncode(Encrypt(Claim Set))\u3002\u5728plaintext\u65e0\u6cd5\u5e94\u7528\u8be5\u89c4\u5219\u8fdb\u884c\u89e3\u7801\u3001\u4e14\u672a\u542f\u7528EnabledHeaderClaims\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9JWE\u7684\u5b57\u6bb5\u9a8c\u8bc1\u4f1a\u88ab\u8df3\u8fc7(\u9ed8\u8ba4\u6210\u529f)\u3002","title":"\u4f7f\u7528\u7ea6\u5b9a"},{"location":"modules/mod_auth_jwt/mod_auth_jwt/#_8","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 AUTH_TOTAL \u547d\u4e2d\u8ba4\u8bc1\u89c4\u5219\u7684\u8bf7\u6c42\u6570 AUTH_SUCCESS \u8ba4\u8bc1\u6210\u529f\u7684\u8bf7\u6c42\u6570 AUTH_FAILED \u8ba4\u8bc1\u5931\u8d25\u7684\u8bf7\u6c42\u6570","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_block/mod_block/","text":"mod_block \u6a21\u5757\u7b80\u4ecb mod_block\u57fa\u4e8e\u81ea\u5b9a\u4e49\u7684\u89c4\u5219\uff0c\u5bf9\u8fde\u63a5\u6216\u8bf7\u6c42\u8fdb\u884c\u5c01\u7981\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_block/mod_block.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.ProductRulePath String \u5c01\u7981\u89c4\u5219\u6587\u4ef6\u8def\u5f84 Basic.IPBlacklistPath String \u5168\u5c40IP\u9ed1\u540d\u5355\u6587\u4ef6\u8def\u5f84 \u5168\u5c40IP\u9ed1\u540d\u5355\u6587\u4ef6\u8bf4\u660e\uff1a \u53ef\u4ee5\u914d\u7f6e\u5355\u72ec\u7684 IP\uff0c\u4e5f\u53ef\u914d\u7f6e\u8d77\u59cb IP \u5168\u5c40IP\u9ed1\u540d\u5355\u6587\u4ef6\u914d\u7f6e\u793a\u4f8b 192.168.1.253 192.168.1.254 192.168.1.250 \u914d\u7f6e\u793a\u4f8b [basic] # product rule config file path ProductRulePath = mod_block/block_rules.data # global ip blacklist file path IPBlacklistPath = mod_block/ip_blacklist.data \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u5c01\u7981\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684\u5c01\u7981\u89c4\u5219\u5217\u8868 Config{v}[] Object \u5c01\u7981\u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Name String \u89c4\u5219\u540d\u79f0 Config{v}[].Action Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Action.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Action.Params Object \u6267\u884c\u6307\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u5217\u8868 Config{v}[].Action.Params[] String \u53c2\u6570\u4fe1\u606f \u6a21\u5757\u52a8\u4f5c \u52a8\u4f5c \u542b\u4e49 CLOSE \u5173\u95ed\u8fde\u63a5 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"action\" : { \"cmd\" : \"CLOSE\" , \"params\" : [] }, \"name\" : \"example rule\" , \"cond\" : \"req_path_in(\\\"/limit\\\", false)\" } ] } } \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 CONN_TOTAL \u8fde\u63a5\u603b\u6570 CONN_REFUSE \u8fde\u63a5\u62d2\u7edd\u7684\u603b\u6570 CONN_ACCEPT \u8fde\u63a5\u63a5\u53d7\u7684\u603b\u6570 REQ_TOTAL \u8bf7\u6c42\u603b\u6570 REQ_REFUSE \u8bf7\u6c42\u62d2\u7edd\u7684\u603b\u6570 REQ_ACCEPT \u8bf7\u6c42\u63a5\u53d7\u7684\u603b\u6570 REQ_TO_CHECK \u68c0\u67e5\u7684\u8bf7\u6c42\u6570","title":"mod_block"},{"location":"modules/mod_block/mod_block/#mod_block","text":"","title":"mod_block"},{"location":"modules/mod_block/mod_block/#_1","text":"mod_block\u57fa\u4e8e\u81ea\u5b9a\u4e49\u7684\u89c4\u5219\uff0c\u5bf9\u8fde\u63a5\u6216\u8bf7\u6c42\u8fdb\u884c\u5c01\u7981\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_block/mod_block/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_block/mod_block/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_block/mod_block.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.ProductRulePath String \u5c01\u7981\u89c4\u5219\u6587\u4ef6\u8def\u5f84 Basic.IPBlacklistPath String \u5168\u5c40IP\u9ed1\u540d\u5355\u6587\u4ef6\u8def\u5f84 \u5168\u5c40IP\u9ed1\u540d\u5355\u6587\u4ef6\u8bf4\u660e\uff1a \u53ef\u4ee5\u914d\u7f6e\u5355\u72ec\u7684 IP\uff0c\u4e5f\u53ef\u914d\u7f6e\u8d77\u59cb IP \u5168\u5c40IP\u9ed1\u540d\u5355\u6587\u4ef6\u914d\u7f6e\u793a\u4f8b 192.168.1.253 192.168.1.254 192.168.1.250","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_block/mod_block/#_4","text":"[basic] # product rule config file path ProductRulePath = mod_block/block_rules.data # global ip blacklist file path IPBlacklistPath = mod_block/ip_blacklist.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_block/mod_block/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_block/mod_block/#_6","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u5c01\u7981\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684\u5c01\u7981\u89c4\u5219\u5217\u8868 Config{v}[] Object \u5c01\u7981\u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Name String \u89c4\u5219\u540d\u79f0 Config{v}[].Action Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Action.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Action.Params Object \u6267\u884c\u6307\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u5217\u8868 Config{v}[].Action.Params[] String \u53c2\u6570\u4fe1\u606f","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_block/mod_block/#_7","text":"\u52a8\u4f5c \u542b\u4e49 CLOSE \u5173\u95ed\u8fde\u63a5","title":"\u6a21\u5757\u52a8\u4f5c"},{"location":"modules/mod_block/mod_block/#_8","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"action\" : { \"cmd\" : \"CLOSE\" , \"params\" : [] }, \"name\" : \"example rule\" , \"cond\" : \"req_path_in(\\\"/limit\\\", false)\" } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_block/mod_block/#_9","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 CONN_TOTAL \u8fde\u63a5\u603b\u6570 CONN_REFUSE \u8fde\u63a5\u62d2\u7edd\u7684\u603b\u6570 CONN_ACCEPT \u8fde\u63a5\u63a5\u53d7\u7684\u603b\u6570 REQ_TOTAL \u8bf7\u6c42\u603b\u6570 REQ_REFUSE \u8bf7\u6c42\u62d2\u7edd\u7684\u603b\u6570 REQ_ACCEPT \u8bf7\u6c42\u63a5\u53d7\u7684\u603b\u6570 REQ_TO_CHECK \u68c0\u67e5\u7684\u8bf7\u6c42\u6570","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_compress/mod_compress/","text":"mod_compress \u6a21\u5757\u7b80\u4ecb mod_compress\u652f\u6301\u5bf9\u54cd\u5e94\u4e3b\u4f53\u538b\u7f29\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_compress/mod_compress.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse \u914d\u7f6e\u793a\u4f8b \u6a21\u5757\u914d\u7f6e\u6587\u4ef6 [basic] DataPath = mod_compress/compress_rule.data [log] OpenDebug = false \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u538b\u7f29\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684\u538b\u7f29\u89c4\u5219\u5217\u8868 Config{v}[] Object \u538b\u7f29\u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Action Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Action.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Action.Quality Integer \u538b\u7f29\u7ea7\u522b Config{v}[].Action.FlushSize Integer \u538b\u7f29\u8fc7\u7a0b\u5f53\u4e2d\u7684\u7f13\u5b58\u5927\u5c0f \u6a21\u5757\u52a8\u4f5c \u52a8\u4f5c \u542b\u4e49 GZIP gzip\u538b\u7f29 BROTLI brotli\u538b\u7f29 \u914d\u7f6e\u793a\u4f8b { \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , \"Action\" : { \"Cmd\" : \"GZIP\" , \"Quality\" : 9 , \"FlushSize\" : 512 } } ] }, \"Version\" : \"20190101000000\" } \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 REQ_TOTAL \u7edf\u8ba1mod_compress\u5904\u7406\u7684\u603b\u8bf7\u6c42\u6570 REQ_SUPPORT_COMPRESS \u652f\u6301\u538b\u7f29\u8bf7\u6c42\u6570 REQ_MATCH_COMPRESS_RULE \u547d\u4e2d\u538b\u7f29\u89c4\u5219\u8bf7\u6c42\u6570 RES_ENCODE_COMPRESS \u54cd\u5e94\u88ab\u538b\u7f29\u8bf7\u6c42\u6570","title":"mod_compress"},{"location":"modules/mod_compress/mod_compress/#mod_compress","text":"","title":"mod_compress"},{"location":"modules/mod_compress/mod_compress/#_1","text":"mod_compress\u652f\u6301\u5bf9\u54cd\u5e94\u4e3b\u4f53\u538b\u7f29\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_compress/mod_compress/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_compress/mod_compress/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_compress/mod_compress.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_compress/mod_compress/#_4","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6 [basic] DataPath = mod_compress/compress_rule.data [log] OpenDebug = false","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_compress/mod_compress/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_compress/mod_compress/#_6","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u538b\u7f29\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684\u538b\u7f29\u89c4\u5219\u5217\u8868 Config{v}[] Object \u538b\u7f29\u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Action Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Action.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Action.Quality Integer \u538b\u7f29\u7ea7\u522b Config{v}[].Action.FlushSize Integer \u538b\u7f29\u8fc7\u7a0b\u5f53\u4e2d\u7684\u7f13\u5b58\u5927\u5c0f","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_compress/mod_compress/#_7","text":"\u52a8\u4f5c \u542b\u4e49 GZIP gzip\u538b\u7f29 BROTLI brotli\u538b\u7f29","title":"\u6a21\u5757\u52a8\u4f5c"},{"location":"modules/mod_compress/mod_compress/#_8","text":"{ \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , \"Action\" : { \"Cmd\" : \"GZIP\" , \"Quality\" : 9 , \"FlushSize\" : 512 } } ] }, \"Version\" : \"20190101000000\" }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_compress/mod_compress/#_9","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 REQ_TOTAL \u7edf\u8ba1mod_compress\u5904\u7406\u7684\u603b\u8bf7\u6c42\u6570 REQ_SUPPORT_COMPRESS \u652f\u6301\u538b\u7f29\u8bf7\u6c42\u6570 REQ_MATCH_COMPRESS_RULE \u547d\u4e2d\u538b\u7f29\u89c4\u5219\u8bf7\u6c42\u6570 RES_ENCODE_COMPRESS \u54cd\u5e94\u88ab\u538b\u7f29\u8bf7\u6c42\u6570","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_doh/mod_doh/","text":"mod_doh Note: This documentation is working in process. Please help improve it by filing issues or pull requests .","title":"mod_doh"},{"location":"modules/mod_doh/mod_doh/#mod_doh","text":"Note: This documentation is working in process. Please help improve it by filing issues or pull requests .","title":"mod_doh"},{"location":"modules/mod_errors/mod_errors/","text":"mod_errors \u6a21\u5757\u7b80\u4ecb mod_errors\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u5c06\u54cd\u5e94\u5185\u5bb9\u66ff\u6362\u4e3a/\u91cd\u5b9a\u5411\u81f3\u6307\u5b9a\u9519\u8bef\u9875\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_errors/mod_errors.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_errors/errors_rule.data \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u9519\u8bef\u54cd\u5e94\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684\u9519\u8bef\u54cd\u5e94\u89c4\u5219\u5217\u8868 Config{v}[] Object \u9519\u8bef\u54cd\u5e94\u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Actions Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Actions.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Actions.Params Object \u6267\u884c\u6307\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u5217\u8868 Config{v}[].Actions.Params[] String \u53c2\u6570\u4fe1\u606f \u6a21\u5757\u52a8\u4f5c \u52a8\u4f5c \u542b\u4e49 RETURN \u54cd\u5e94\u8fd4\u56de\u6307\u5b9a\u9519\u8bef\u9875 REDIRECT \u54cd\u5e94\u91cd\u5b9a\u5411\u81f3\u6307\u5b9a\u9519\u8bef\u9875 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"res_code_in(\\\"404\\\")\" , \"Actions\" : [ { \"Cmd\" : \"RETURN\" , \"Params\" : [ \"200\" , \"text/html\" , \"../conf/mod_errors/404.html\" ] } ] }, { \"Cond\" : \"res_code_in(\\\"500\\\")\" , \"Actions\" : [ { \"Cmd\" : \"REDIRECT\" , \"Params\" : [ \"http://example.org/error.html\" ] } ] } ] } }","title":"mod_errors"},{"location":"modules/mod_errors/mod_errors/#mod_errors","text":"","title":"mod_errors"},{"location":"modules/mod_errors/mod_errors/#_1","text":"mod_errors\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u5c06\u54cd\u5e94\u5185\u5bb9\u66ff\u6362\u4e3a/\u91cd\u5b9a\u5411\u81f3\u6307\u5b9a\u9519\u8bef\u9875\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_errors/mod_errors/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_errors/mod_errors/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_errors/mod_errors.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_errors/mod_errors/#_4","text":"[basic] DataPath = mod_errors/errors_rule.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_errors/mod_errors/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_errors/mod_errors/#_6","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u9519\u8bef\u54cd\u5e94\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684\u9519\u8bef\u54cd\u5e94\u89c4\u5219\u5217\u8868 Config{v}[] Object \u9519\u8bef\u54cd\u5e94\u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Actions Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Actions.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Actions.Params Object \u6267\u884c\u6307\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u5217\u8868 Config{v}[].Actions.Params[] String \u53c2\u6570\u4fe1\u606f","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_errors/mod_errors/#_7","text":"\u52a8\u4f5c \u542b\u4e49 RETURN \u54cd\u5e94\u8fd4\u56de\u6307\u5b9a\u9519\u8bef\u9875 REDIRECT \u54cd\u5e94\u91cd\u5b9a\u5411\u81f3\u6307\u5b9a\u9519\u8bef\u9875","title":"\u6a21\u5757\u52a8\u4f5c"},{"location":"modules/mod_errors/mod_errors/#_8","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"res_code_in(\\\"404\\\")\" , \"Actions\" : [ { \"Cmd\" : \"RETURN\" , \"Params\" : [ \"200\" , \"text/html\" , \"../conf/mod_errors/404.html\" ] } ] }, { \"Cond\" : \"res_code_in(\\\"500\\\")\" , \"Actions\" : [ { \"Cmd\" : \"REDIRECT\" , \"Params\" : [ \"http://example.org/error.html\" ] } ] } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_geo/mod_geo/","text":"mod_geo \u6a21\u5757\u7b80\u4ecb mod_geo\u57fa\u4e8e\u5730\u7406\u4fe1\u606f\u5b57\u5178\uff0c\u901a\u8fc7\u7528\u6237IP\u83b7\u53d6\u76f8\u5173\u7684\u5730\u7406\u4fe1\u606f\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_geo/mod_geo.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.GeoDBPath String \u5730\u7406\u4fe1\u606f\u5b57\u5178\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse \u5b57\u5178\u6587\u4ef6\u8bf4\u660e\uff1a\u5f53\u524d\u4ec5\u652f\u6301 MaxMind \u5730\u7406\u4fe1\u606f\u5b57\u5178, \u53ef\u5728 https://dev.maxmind.com/geoip/geoip2/geolite2/ \u4e0b\u8f7d \u914d\u7f6e\u793a\u4f8b [basic] GeoDBPath = mod_geo/geo.db \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_GET_GEO_INFO \u901a\u8fc7\u5730\u7406\u4fe1\u606f\u5b57\u5178\u67e5\u8be2\u7528\u6237\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u65f6\uff0c\u5931\u8d25\u7684\u6b21\u6570 ERR_RELOAD_GEO_DATABASE Reload \u5730\u7406\u4fe1\u606f\u5b57\u5178\u5931\u8d25\u7684\u6b21\u6570","title":"mod_geo"},{"location":"modules/mod_geo/mod_geo/#mod_geo","text":"","title":"mod_geo"},{"location":"modules/mod_geo/mod_geo/#_1","text":"mod_geo\u57fa\u4e8e\u5730\u7406\u4fe1\u606f\u5b57\u5178\uff0c\u901a\u8fc7\u7528\u6237IP\u83b7\u53d6\u76f8\u5173\u7684\u5730\u7406\u4fe1\u606f\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_geo/mod_geo/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_geo/mod_geo/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_geo/mod_geo.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.GeoDBPath String \u5730\u7406\u4fe1\u606f\u5b57\u5178\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse \u5b57\u5178\u6587\u4ef6\u8bf4\u660e\uff1a\u5f53\u524d\u4ec5\u652f\u6301 MaxMind \u5730\u7406\u4fe1\u606f\u5b57\u5178, \u53ef\u5728 https://dev.maxmind.com/geoip/geoip2/geolite2/ \u4e0b\u8f7d","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_geo/mod_geo/#_4","text":"[basic] GeoDBPath = mod_geo/geo.db","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_geo/mod_geo/#_5","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_GET_GEO_INFO \u901a\u8fc7\u5730\u7406\u4fe1\u606f\u5b57\u5178\u67e5\u8be2\u7528\u6237\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u65f6\uff0c\u5931\u8d25\u7684\u6b21\u6570 ERR_RELOAD_GEO_DATABASE Reload \u5730\u7406\u4fe1\u606f\u5b57\u5178\u5931\u8d25\u7684\u6b21\u6570","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_header/mod_header/","text":"mod_header \u6a21\u5757\u7b80\u4ecb mod_header\u6839\u636e\u81ea\u5b9a\u4e49\u6761\u4ef6\uff0c\u4fee\u6539\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u5934\u90e8\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_header/mod_header.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_header/header_rule.data \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684 Header \u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684 Header \u89c4\u5219\u5217\u8868 Config{v}[] Object Header \u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Last Boolean \u5982\u679c\u89c4\u5219\u6761\u4ef6\u5339\u914d\u6210\u529f\u540e\uff0c\u662f\u5426\u7ee7\u7eed\u5339\u914d\u4e0b\u4e00\u6761\u89c4\u5219 Config{v}[].Actions Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Actions.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Actions.Params Object \u6267\u884c\u6307\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u5217\u8868 Config{v}[].Actions.Params[] String \u53c2\u6570\u4fe1\u606f \u6a21\u5757\u52a8\u4f5c \u52a8\u4f5c\u540d\u79f0 \u542b\u4e49 \u53c2\u6570\u5217\u8868\u8bf4\u660e REQ_HEADER_SET \u8bbe\u7f6e\u8bf7\u6c42\u5934 HeaderName, HeaderValue REQ_HEADER_ADD \u6dfb\u52a0\u8bf7\u6c42\u5934 HeaderName, HeaderValue REQ_HEADER_DEL \u5220\u9664\u8bf7\u6c42\u5934 HeaderName RSP_HEADER_SET \u8bbe\u7f6e\u54cd\u5e94\u5934 HeaderName, HeaderValue RSP_HEADER_ADD \u6dfb\u52a0\u54cd\u5e94\u5934 HeaderName, HeaderValue RSP_HEADER_DEL \u5220\u9664\u54cd\u5e94\u5934 HeaderName \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"cond\" : \"req_path_prefix_in(\\\"/header\\\", false)\" , \"actions\" : [ { \"cmd\" : \"REQ_HEADER_SET\" , \"params\" : [ \"X-Bfe-Log-Id\" , \"%bfe_log_id\" ] } \uff0c { \"cmd\" : \"REQ_HEADER_SET\" , \"params\" : [ \"X-Bfe-Vip\" , \"%bfe_vip\" ] } \uff0c { \"cmd\" : \"RSP_HEADER_SET\" , \"params\" : [ \"X-Proxied-By\" , \"bfe\" ] } ], \"last\" : true } ] } } \u5185\u7f6e\u53d8\u91cf\u8bf4\u660e \u53ef\u4ee5\u901a\u8fc7 %variable \u4f7f\u7528\u53d8\u91cf\uff0c\u53c2\u89c1\u4e0b\u6587\u793a\u4f8b \u53d8\u91cf\u540d \u542b\u4e49 bfe_client_ip \u5ba2\u6237\u7aefIP bfe_client_port \u5ba2\u6237\u7aef\u7aef\u53e3 bfe_request_host \u8bf7\u6c42Host bfe_session_id \u4f1a\u8bddID bfe_log_id \u8bf7\u6c42ID bfe_cip \u5ba2\u6237\u7aefIP (CIP) bfe_vip \u670d\u52a1\u7aefIP (VIP) bfe_server_name \u6dfb\u52a0\u8bf7\u6c42\u5934 bfe_cluster \u76ee\u7684\u96c6\u7fa4 bfe_backend_info \u540e\u7aef\u4fe1\u606f bfe_ssl_resume \u662f\u5426tls/ssl\u4f1a\u8bdd\u590d\u7528 bfe_ssl_cipher tls/ssl\u52a0\u5bc6\u5957\u4ef6 bfe_ssl_version tls/ssl\u534f\u8bae\u7248\u672c bfe_protocol \u8bbf\u95ee\u534f\u8bae client_cert_serial_number \u5ba2\u6237\u7aef\u8bc1\u4e66\u5e8f\u5217\u53f7 client_cert_subject_title \u5ba2\u6237\u7aef\u8bc1\u4e66Subject title client_cert_subject_common_name \u5ba2\u6237\u7aef\u8bc1\u4e66Subject Common Name client_cert_subject_organization \u5ba2\u6237\u7aef\u8bc1\u4e66Subject Organization","title":"mod_header"},{"location":"modules/mod_header/mod_header/#mod_header","text":"","title":"mod_header"},{"location":"modules/mod_header/mod_header/#_1","text":"mod_header\u6839\u636e\u81ea\u5b9a\u4e49\u6761\u4ef6\uff0c\u4fee\u6539\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u5934\u90e8\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_header/mod_header/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_header/mod_header/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_header/mod_header.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u7684\u7684\u6587\u4ef6\u8def\u5f84 Log.OpenDebug Boolean \u662f\u5426\u5f00\u542f debug \u65e5\u5fd7 \u9ed8\u8ba4\u503cFalse","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_header/mod_header/#_4","text":"[basic] DataPath = mod_header/header_rule.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_header/mod_header/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_header/mod_header/#_6","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684 Header \u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u4ea7\u54c1\u7ebf\u4e0b\u7684 Header \u89c4\u5219\u5217\u8868 Config{v}[] Object Header \u89c4\u5219\u8be6\u7ec6\u4fe1\u606f Config{v}[].Cond String \u63cf\u8ff0\u5339\u914d\u8bf7\u6c42\u6216\u8fde\u63a5\u7684\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Last Boolean \u5982\u679c\u89c4\u5219\u6761\u4ef6\u5339\u914d\u6210\u529f\u540e\uff0c\u662f\u5426\u7ee7\u7eed\u5339\u914d\u4e0b\u4e00\u6761\u89c4\u5219 Config{v}[].Actions Object \u5339\u914d\u6210\u529f\u540e\u7684\u52a8\u4f5c Config{v}[].Actions.Cmd String \u5339\u914d\u6210\u529f\u540e\u6267\u884c\u7684\u6307\u4ee4 Config{v}[].Actions.Params Object \u6267\u884c\u6307\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u5217\u8868 Config{v}[].Actions.Params[] String \u53c2\u6570\u4fe1\u606f","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_header/mod_header/#_7","text":"\u52a8\u4f5c\u540d\u79f0 \u542b\u4e49 \u53c2\u6570\u5217\u8868\u8bf4\u660e REQ_HEADER_SET \u8bbe\u7f6e\u8bf7\u6c42\u5934 HeaderName, HeaderValue REQ_HEADER_ADD \u6dfb\u52a0\u8bf7\u6c42\u5934 HeaderName, HeaderValue REQ_HEADER_DEL \u5220\u9664\u8bf7\u6c42\u5934 HeaderName RSP_HEADER_SET \u8bbe\u7f6e\u54cd\u5e94\u5934 HeaderName, HeaderValue RSP_HEADER_ADD \u6dfb\u52a0\u54cd\u5e94\u5934 HeaderName, HeaderValue RSP_HEADER_DEL \u5220\u9664\u54cd\u5e94\u5934 HeaderName","title":"\u6a21\u5757\u52a8\u4f5c"},{"location":"modules/mod_header/mod_header/#_8","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"cond\" : \"req_path_prefix_in(\\\"/header\\\", false)\" , \"actions\" : [ { \"cmd\" : \"REQ_HEADER_SET\" , \"params\" : [ \"X-Bfe-Log-Id\" , \"%bfe_log_id\" ] } \uff0c { \"cmd\" : \"REQ_HEADER_SET\" , \"params\" : [ \"X-Bfe-Vip\" , \"%bfe_vip\" ] } \uff0c { \"cmd\" : \"RSP_HEADER_SET\" , \"params\" : [ \"X-Proxied-By\" , \"bfe\" ] } ], \"last\" : true } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_header/mod_header/#_9","text":"\u53ef\u4ee5\u901a\u8fc7 %variable \u4f7f\u7528\u53d8\u91cf\uff0c\u53c2\u89c1\u4e0b\u6587\u793a\u4f8b \u53d8\u91cf\u540d \u542b\u4e49 bfe_client_ip \u5ba2\u6237\u7aefIP bfe_client_port \u5ba2\u6237\u7aef\u7aef\u53e3 bfe_request_host \u8bf7\u6c42Host bfe_session_id \u4f1a\u8bddID bfe_log_id \u8bf7\u6c42ID bfe_cip \u5ba2\u6237\u7aefIP (CIP) bfe_vip \u670d\u52a1\u7aefIP (VIP) bfe_server_name \u6dfb\u52a0\u8bf7\u6c42\u5934 bfe_cluster \u76ee\u7684\u96c6\u7fa4 bfe_backend_info \u540e\u7aef\u4fe1\u606f bfe_ssl_resume \u662f\u5426tls/ssl\u4f1a\u8bdd\u590d\u7528 bfe_ssl_cipher tls/ssl\u52a0\u5bc6\u5957\u4ef6 bfe_ssl_version tls/ssl\u534f\u8bae\u7248\u672c bfe_protocol \u8bbf\u95ee\u534f\u8bae client_cert_serial_number \u5ba2\u6237\u7aef\u8bc1\u4e66\u5e8f\u5217\u53f7 client_cert_subject_title \u5ba2\u6237\u7aef\u8bc1\u4e66Subject title client_cert_subject_common_name \u5ba2\u6237\u7aef\u8bc1\u4e66Subject Common Name client_cert_subject_organization \u5ba2\u6237\u7aef\u8bc1\u4e66Subject Organization","title":"\u5185\u7f6e\u53d8\u91cf\u8bf4\u660e"},{"location":"modules/mod_http_code/mod_http_code/","text":"mod_http_code \u6a21\u5757\u7b80\u4ecb mod_http_code\u7528\u6765\u7edf\u8ba1HTTP\u54cd\u5e94\u72b6\u6001\u7801\u3002 \u57fa\u7840\u914d\u7f6e \u5728bfe.conf\u4e2d\u542f\u7528\u5373\u53ef\uff0c\u65e0\u5176\u5b83\u914d\u7f6e\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 ALL2_X_X 2XX\u54cd\u5e94\u6570 ALL3_X_X 3XX\u54cd\u5e94\u6570 ALL4_X_X 4XX\u54cd\u5e94\u6570 ALL5_X_X 5XX\u54cd\u5e94\u6570","title":"mod_http_code"},{"location":"modules/mod_http_code/mod_http_code/#mod_http_code","text":"","title":"mod_http_code"},{"location":"modules/mod_http_code/mod_http_code/#_1","text":"mod_http_code\u7528\u6765\u7edf\u8ba1HTTP\u54cd\u5e94\u72b6\u6001\u7801\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_http_code/mod_http_code/#_2","text":"\u5728bfe.conf\u4e2d\u542f\u7528\u5373\u53ef\uff0c\u65e0\u5176\u5b83\u914d\u7f6e\u3002","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_http_code/mod_http_code/#_3","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 ALL2_X_X 2XX\u54cd\u5e94\u6570 ALL3_X_X 3XX\u54cd\u5e94\u6570 ALL4_X_X 4XX\u54cd\u5e94\u6570 ALL5_X_X 5XX\u54cd\u5e94\u6570","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_key_log/mod_key_log/","text":"mod_key_log \u6a21\u5757\u7b80\u4ecb mod_key_log\u4ee5NSS key log\u683c\u5f0f\u8bb0\u5f55TLS\u4f1a\u8bdd\u5bc6\u94a5, \u4fbf\u4e8e\u57fa\u4e8e\u7b2c\u4e09\u65b9\u5de5\u5177\uff08\u4f8b\u5982wireshark) \u89e3\u5bc6\u5206\u6790TLS\u52a0\u5bc6\u6d41\u91cf\uff0c\u65b9\u4fbf\u95ee\u9898\u8bca\u65ad\u5206\u6790 \u5173\u4e8eNSS key log\u8be6\u7ec6\u683c\u5f0f\u8bf4\u660e\uff0c\u53c2\u89c1: https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/Key_Log_Format \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_key_log/mod_key_log.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Log.LogPrefix String \u65e5\u5fd7\u6587\u4ef6\u524d\u7f00\u540d\u79f0 Log.LogDir String \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 Log.RotateWhen String \u65e5\u5fd7\u5207\u5272\u65f6\u95f4\uff0c\u652f\u6301 M/H/D/MIDNIGHT/NEXTHOUR Log.BackupCount Integer \u6700\u5927\u7684\u65e5\u5fd7\u5b58\u50a8\u6570\u91cf \u914d\u7f6e\u793a\u4f8b [Log] # filename prefix for log LogPrefix = key # log directory LogDir = ../log # interval to rotate logs: M/H/D/MIDNIGHT/NEXTHOUR RotateWhen = H # max number of rotated log files BackupCount = 3","title":"mod_key_log"},{"location":"modules/mod_key_log/mod_key_log/#mod_key_log","text":"","title":"mod_key_log"},{"location":"modules/mod_key_log/mod_key_log/#_1","text":"mod_key_log\u4ee5NSS key log\u683c\u5f0f\u8bb0\u5f55TLS\u4f1a\u8bdd\u5bc6\u94a5, \u4fbf\u4e8e\u57fa\u4e8e\u7b2c\u4e09\u65b9\u5de5\u5177\uff08\u4f8b\u5982wireshark) \u89e3\u5bc6\u5206\u6790TLS\u52a0\u5bc6\u6d41\u91cf\uff0c\u65b9\u4fbf\u95ee\u9898\u8bca\u65ad\u5206\u6790 \u5173\u4e8eNSS key log\u8be6\u7ec6\u683c\u5f0f\u8bf4\u660e\uff0c\u53c2\u89c1: https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/Key_Log_Format","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_key_log/mod_key_log/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_key_log/mod_key_log/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_key_log/mod_key_log.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Log.LogPrefix String \u65e5\u5fd7\u6587\u4ef6\u524d\u7f00\u540d\u79f0 Log.LogDir String \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 Log.RotateWhen String \u65e5\u5fd7\u5207\u5272\u65f6\u95f4\uff0c\u652f\u6301 M/H/D/MIDNIGHT/NEXTHOUR Log.BackupCount Integer \u6700\u5927\u7684\u65e5\u5fd7\u5b58\u50a8\u6570\u91cf","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_key_log/mod_key_log/#_4","text":"[Log] # filename prefix for log LogPrefix = key # log directory LogDir = ../log # interval to rotate logs: M/H/D/MIDNIGHT/NEXTHOUR RotateWhen = H # max number of rotated log files BackupCount = 3","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_logid/mod_logid/","text":"mod_logid \u6a21\u5757\u7b80\u4ecb mod_logid\u7528\u6765\u751f\u6210logid\u3002 \u57fa\u7840\u914d\u7f6e \u5728bfe.conf\u4e2d\u542f\u7528\u5373\u53ef\uff0c\u65e0\u5176\u5b83\u914d\u7f6e\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 NO_LOGID_FROM_UPPER_BFE \u6765\u81ea\u4fe1\u4efb\u4e0a\u6e38\u4e14\u672a\u643a\u5e26logid\u7684\u8bf7\u6c42\u6570","title":"mod_logid"},{"location":"modules/mod_logid/mod_logid/#mod_logid","text":"","title":"mod_logid"},{"location":"modules/mod_logid/mod_logid/#_1","text":"mod_logid\u7528\u6765\u751f\u6210logid\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_logid/mod_logid/#_2","text":"\u5728bfe.conf\u4e2d\u542f\u7528\u5373\u53ef\uff0c\u65e0\u5176\u5b83\u914d\u7f6e\u3002","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_logid/mod_logid/#_3","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 NO_LOGID_FROM_UPPER_BFE \u6765\u81ea\u4fe1\u4efb\u4e0a\u6e38\u4e14\u672a\u643a\u5e26logid\u7684\u8bf7\u6c42\u6570","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_prison/mod_prison/","text":"mod_prison Note: This documentation is working in process. Please help improve it by filing issues or pull requests .","title":"mod_prison"},{"location":"modules/mod_prison/mod_prison/#mod_prison","text":"Note: This documentation is working in process. Please help improve it by filing issues or pull requests .","title":"mod_prison"},{"location":"modules/mod_redirect/mod_redirect/","text":"mod_redirect \u6a21\u5757\u7b80\u4ecb mod_rediect\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u5bf9\u8bf7\u6c42\u8fdb\u884c\u91cd\u5b9a\u5411\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_redirect/mod_redirect.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_redirect/redirect.data \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_redirect/redirect.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u91cd\u5b9a\u5411\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} String \u4ea7\u54c1\u7ebf\u91cd\u5b9a\u5411\u89c4\u5219\u8868 Config{v}[] String \u4ea7\u54c1\u7ebf\u91cd\u5b9a\u5411\u89c4\u5219 Config{v}[].Cond String \u89c4\u5219\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Actions Object \u89c4\u5219\u52a8\u4f5c Config{v}[].Actions.Cmd String \u89c4\u5219\u52a8\u4f5c\u540d\u79f0 Config{v}[].Actions.Params Object \u89c4\u5219\u52a8\u4f5c\u53c2\u6570 Config{v}[].Status Integer HTTP\u72b6\u6001\u7801 \u6a21\u5757\u52a8\u4f5c \u52a8\u4f5c \u63cf\u8ff0 URL_SET \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u6307\u5b9a\u503c URL_FROM_QUERY \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u6307\u5b9a\u8bf7\u6c42Query\u503c URL_PREFIX_ADD \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u539f\u59cbURL\u589e\u52a0\u6307\u5b9a\u524d\u7f00 SCHEME_SET \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u539f\u59cbURL\u5e76\u4fee\u6539\u534f\u8bae(\u652f\u6301HTTP\u548cHTTPS) \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_path_prefix_in(\\\"/redirect\\\", false)\" , \"Actions\" : [ { \"Cmd\" : \"URL_SET\" , \"Params\" : [ \"https://example.org\" ] } ], \"Status\" : 301 } ] } }","title":"mod_redirect"},{"location":"modules/mod_redirect/mod_redirect/#mod_redirect","text":"","title":"mod_redirect"},{"location":"modules/mod_redirect/mod_redirect/#_1","text":"mod_rediect\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u5bf9\u8bf7\u6c42\u8fdb\u884c\u91cd\u5b9a\u5411\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_redirect/mod_redirect/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_redirect/mod_redirect/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_redirect/mod_redirect.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_redirect/mod_redirect/#_4","text":"[basic] DataPath = mod_redirect/redirect.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_redirect/mod_redirect/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_redirect/mod_redirect/#_6","text":"\u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_redirect/redirect.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u91cd\u5b9a\u5411\u89c4\u5219 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} String \u4ea7\u54c1\u7ebf\u91cd\u5b9a\u5411\u89c4\u5219\u8868 Config{v}[] String \u4ea7\u54c1\u7ebf\u91cd\u5b9a\u5411\u89c4\u5219 Config{v}[].Cond String \u89c4\u5219\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Actions Object \u89c4\u5219\u52a8\u4f5c Config{v}[].Actions.Cmd String \u89c4\u5219\u52a8\u4f5c\u540d\u79f0 Config{v}[].Actions.Params Object \u89c4\u5219\u52a8\u4f5c\u53c2\u6570 Config{v}[].Status Integer HTTP\u72b6\u6001\u7801","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_redirect/mod_redirect/#_7","text":"\u52a8\u4f5c \u63cf\u8ff0 URL_SET \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u6307\u5b9a\u503c URL_FROM_QUERY \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u6307\u5b9a\u8bf7\u6c42Query\u503c URL_PREFIX_ADD \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u539f\u59cbURL\u589e\u52a0\u6307\u5b9a\u524d\u7f00 SCHEME_SET \u8bbe\u7f6e\u91cd\u5b9a\u5411URL\u4e3a\u539f\u59cbURL\u5e76\u4fee\u6539\u534f\u8bae(\u652f\u6301HTTP\u548cHTTPS)","title":"\u6a21\u5757\u52a8\u4f5c"},{"location":"modules/mod_redirect/mod_redirect/#_8","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_path_prefix_in(\\\"/redirect\\\", false)\" , \"Actions\" : [ { \"Cmd\" : \"URL_SET\" , \"Params\" : [ \"https://example.org\" ] } ], \"Status\" : 301 } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_rewrite/mod_rewrite/","text":"mod_rewrite \u6a21\u5757\u7b80\u4ecb mod_rewrite\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u8bf7\u6c42\u7684URI\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_rewrite/mod_rewrite.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_rewrite/rewrite.data \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_rewrite/rewrite.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u91cd\u5199\u89c4\u5219\u5217\u8868 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u91cd\u5199\u89c4\u5219\u5217\u8868 Config{v}[] Object \u91cd\u5199\u89c4\u5219 Config{v}[].Cond String \u89c4\u5219\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Action Object \u89c4\u5219\u52a8\u4f5c Config{v}[].Action.Cmd Object \u89c4\u5219\u52a8\u4f5c\u540d\u79f0 Config{v}[].Action.Param Object \u89c4\u5219\u52a8\u4f5c\u53c2\u6570\u5217\u8868 Config{v}[].Last Boolean \u5f53\u8be5\u9879\u4e3atrue\u65f6\uff0c\u547d\u4e2d\u67d0\u6761\u89c4\u5219\u540e\uff0c\u4e0d\u518d\u5411\u540e\u5339\u914d \u6a21\u5757\u52a8\u4f5c \u52a8\u4f5c \u63cf\u8ff0 HOST_SET_FROM_PATH_PREFIX \u6839\u636epath\u524d\u7f00\u8bbe\u7f6ehost HOST_SET \u8bbe\u7f6ehost HOST_SUFFIX_REPLACE \u66ff\u6362\u57df\u540d\u540e\u7f00 PATH_SET \u8bbe\u7f6epath PATH_PREFIX_ADD \u589e\u52a0path\u524d\u7f00 PATH_PREFIX_TRIM \u5220\u9664path\u524d\u7f00 QUERY_ADD \u589e\u52a0query QUERY_DEL \u5220\u9664query QUERY_RENAME \u91cd\u547d\u540dquery QUERY_DEL_ALL_EXCEPT \u5220\u9664\u9664\u6307\u5b9akey\u5916\u7684\u6240\u6709query \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_path_prefix_in(\\\"/rewrite\\\", false)\" , \"Actions\" : [ { \"Cmd\" : \"PATH_PREFIX_ADD\" , \"Params\" : [ \"/bfe/\" ] } ], \"Last\" : true } ] } }","title":"mod_rewrite"},{"location":"modules/mod_rewrite/mod_rewrite/#mod_rewrite","text":"","title":"mod_rewrite"},{"location":"modules/mod_rewrite/mod_rewrite/#_1","text":"mod_rewrite\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u8bf7\u6c42\u7684URI\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_rewrite/mod_rewrite/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_rewrite/mod_rewrite/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_rewrite/mod_rewrite.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_rewrite/mod_rewrite/#_4","text":"[basic] DataPath = mod_rewrite/rewrite.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_rewrite/mod_rewrite/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_rewrite/mod_rewrite/#_6","text":"\u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_rewrite/rewrite.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u91cd\u5199\u89c4\u5219\u5217\u8868 Config{k} String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config{v} Object \u91cd\u5199\u89c4\u5219\u5217\u8868 Config{v}[] Object \u91cd\u5199\u89c4\u5219 Config{v}[].Cond String \u89c4\u5219\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config{v}[].Action Object \u89c4\u5219\u52a8\u4f5c Config{v}[].Action.Cmd Object \u89c4\u5219\u52a8\u4f5c\u540d\u79f0 Config{v}[].Action.Param Object \u89c4\u5219\u52a8\u4f5c\u53c2\u6570\u5217\u8868 Config{v}[].Last Boolean \u5f53\u8be5\u9879\u4e3atrue\u65f6\uff0c\u547d\u4e2d\u67d0\u6761\u89c4\u5219\u540e\uff0c\u4e0d\u518d\u5411\u540e\u5339\u914d","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_rewrite/mod_rewrite/#_7","text":"\u52a8\u4f5c \u63cf\u8ff0 HOST_SET_FROM_PATH_PREFIX \u6839\u636epath\u524d\u7f00\u8bbe\u7f6ehost HOST_SET \u8bbe\u7f6ehost HOST_SUFFIX_REPLACE \u66ff\u6362\u57df\u540d\u540e\u7f00 PATH_SET \u8bbe\u7f6epath PATH_PREFIX_ADD \u589e\u52a0path\u524d\u7f00 PATH_PREFIX_TRIM \u5220\u9664path\u524d\u7f00 QUERY_ADD \u589e\u52a0query QUERY_DEL \u5220\u9664query QUERY_RENAME \u91cd\u547d\u540dquery QUERY_DEL_ALL_EXCEPT \u5220\u9664\u9664\u6307\u5b9akey\u5916\u7684\u6240\u6709query","title":"\u6a21\u5757\u52a8\u4f5c"},{"location":"modules/mod_rewrite/mod_rewrite/#_8","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_path_prefix_in(\\\"/rewrite\\\", false)\" , \"Actions\" : [ { \"Cmd\" : \"PATH_PREFIX_ADD\" , \"Params\" : [ \"/bfe/\" ] } ], \"Last\" : true } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_static/mod_static/","text":"mod_static \u6a21\u5757\u7b80\u4ecb mod_static\u652f\u6301\u8fd4\u56de\u9759\u6001\u6587\u4ef6\u4f5c\u4e3a\u54cd\u5e94\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_static/mod_static.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Basic.MimeTypePath String MIME\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_static/static_rule.data MimeTypePath = mod_static/mime_type.data \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_static/static_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[v][] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219 Config[v][].Cond String \u89c4\u5219\u7684\u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Action Object br>\u89c4\u5219\u7684\u6267\u884c\u52a8\u4f5c Config[v][].Action.Cmd String \u52a8\u4f5c\u540d\u79f0, \u5408\u6cd5\u503c\u5305\u62ecBROWSE(\u8bbf\u95ee\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u9759\u6001\u6587\u4ef6) Config[v][].Action.Params Object \u52a8\u4f5c\u53c2\u6570 Config[v][].Action.Param[0] String \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u6839\u76ee\u5f55\u4f4d\u7f6e Config[v][].Action.Param[1] String \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u9759\u6001\u6587\u4ef6\u540d \u914d\u7f6e\u793a\u4f8b { \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , \"Action\" : { \"Cmd\" : \"BROWSE\" , \"Params\" : [ \"./\" , \"index.html\" ] } } ] }, \"Version\" : \"20190101000000\" } MIME\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 MIME\u914d\u7f6e\u6587\u4ef6: conf/mod_static/mime_type.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6587\u4ef6\u6269\u5c55\u540d\u4e0eMIME\u7c7b\u578b\u6620\u5c04\u8868 Config[k] String \u6587\u4ef6\u6269\u5c55\u540d Config[v] String MIME\u7c7b\u578b \u914d\u7f6e\u793a\u4f8b { \"Config\" : { \".avi\" : \"video/x-msvideo\" , \".doc\" : \"application/msword\" }, \"Version\" : \"20190101000000\" } \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 FILE_BROWSE_COUNT \u7edf\u8ba1BROWSE\u8bf7\u6c42\u6570 FILE_CURRENT_OPENED \u7edf\u8ba1\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u6570 FILE_BROWSE_NOT_EXIST \u6587\u4ef6\u4e0d\u5b58\u5728\u8bf7\u6c42\u6570 FILE_BROWSE_SIZE \u5df2\u5904\u7406\u6587\u4ef6\u603b\u5927\u5c0f","title":"mod_static"},{"location":"modules/mod_static/mod_static/#mod_static","text":"","title":"mod_static"},{"location":"modules/mod_static/mod_static/#_1","text":"mod_static\u652f\u6301\u8fd4\u56de\u9759\u6001\u6587\u4ef6\u4f5c\u4e3a\u54cd\u5e94\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_static/mod_static/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_static/mod_static/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_static/mod_static.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Basic.MimeTypePath String MIME\u914d\u7f6e\u6587\u4ef6\u8def\u5f84","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_static/mod_static/#_4","text":"[basic] DataPath = mod_static/static_rule.data MimeTypePath = mod_static/mime_type.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_static/mod_static/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_static/mod_static/#_6","text":"\u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_static/static_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[v][] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219 Config[v][].Cond String \u89c4\u5219\u7684\u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Action Object br>\u89c4\u5219\u7684\u6267\u884c\u52a8\u4f5c Config[v][].Action.Cmd String \u52a8\u4f5c\u540d\u79f0, \u5408\u6cd5\u503c\u5305\u62ecBROWSE(\u8bbf\u95ee\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u9759\u6001\u6587\u4ef6) Config[v][].Action.Params Object \u52a8\u4f5c\u53c2\u6570 Config[v][].Action.Param[0] String \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u6839\u76ee\u5f55\u4f4d\u7f6e Config[v][].Action.Param[1] String \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u9759\u6001\u6587\u4ef6\u540d","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_static/mod_static/#_7","text":"{ \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"www.example.org\\\")\" , \"Action\" : { \"Cmd\" : \"BROWSE\" , \"Params\" : [ \"./\" , \"index.html\" ] } } ] }, \"Version\" : \"20190101000000\" }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_static/mod_static/#mime","text":"","title":"MIME\u914d\u7f6e"},{"location":"modules/mod_static/mod_static/#_8","text":"MIME\u914d\u7f6e\u6587\u4ef6: conf/mod_static/mime_type.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6587\u4ef6\u6269\u5c55\u540d\u4e0eMIME\u7c7b\u578b\u6620\u5c04\u8868 Config[k] String \u6587\u4ef6\u6269\u5c55\u540d Config[v] String MIME\u7c7b\u578b","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_static/mod_static/#_9","text":"{ \"Config\" : { \".avi\" : \"video/x-msvideo\" , \".doc\" : \"application/msword\" }, \"Version\" : \"20190101000000\" }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_static/mod_static/#_10","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 FILE_BROWSE_COUNT \u7edf\u8ba1BROWSE\u8bf7\u6c42\u6570 FILE_CURRENT_OPENED \u7edf\u8ba1\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u6570 FILE_BROWSE_NOT_EXIST \u6587\u4ef6\u4e0d\u5b58\u5728\u8bf7\u6c42\u6570 FILE_BROWSE_SIZE \u5df2\u5904\u7406\u6587\u4ef6\u603b\u5927\u5c0f","title":"\u76d1\u63a7\u9879"},{"location":"modules/mod_tag/mod_tag/","text":"mod_tag \u6a21\u5757\u7b80\u4ecb mod_tag\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u4e3a\u8bf7\u6c42\u8bbe\u7f6eTag\u6807\u8bc6\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_tag/mod_tag.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Log.OpenDebug String \u662f\u5426\u542f\u7528\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7\u5f00\u5173 \u914d\u7f6e\u793a\u4f8b [Basic] DataPath = mod_tag/tag_rule.data [Log] OpenDebug = false \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_tag/tag_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[v][] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219 Config[v][].Cond String \u89c4\u5219\u7684\u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Param.TagName String \u6807\u7b7e\u540d\u79f0 Config[v][].Param.TagValue String \u6807\u7b7e\u53d6\u503c Config[v][].Last Boolean \u8bbe\u7f6e\u4e3atrue\u65f6\uff0c\u547d\u4e2d\u5f53\u524d\u89c4\u5219\u540e\u505c\u6b62\u5904\u7406\u540e\u7eed\u89c4\u5219 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20200218210000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"example.org\\\")\" , \"Param\" : { \"TagName\" : \"tag\" , \"TagValue\" : \"bfe\" }, \"Last\" : false } ] } }","title":"mod_tag"},{"location":"modules/mod_tag/mod_tag/#mod_tag","text":"","title":"mod_tag"},{"location":"modules/mod_tag/mod_tag/#_1","text":"mod_tag\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u4e3a\u8bf7\u6c42\u8bbe\u7f6eTag\u6807\u8bc6\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_tag/mod_tag/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_tag/mod_tag/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_tag/mod_tag.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Log.OpenDebug String \u662f\u5426\u542f\u7528\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7\u5f00\u5173","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_tag/mod_tag/#_4","text":"[Basic] DataPath = mod_tag/tag_rule.data [Log] OpenDebug = false","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_tag/mod_tag/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_tag/mod_tag/#_6","text":"\u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_tag/tag_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[v][] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219 Config[v][].Cond String \u89c4\u5219\u7684\u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Param.TagName String \u6807\u7b7e\u540d\u79f0 Config[v][].Param.TagValue String \u6807\u7b7e\u53d6\u503c Config[v][].Last Boolean \u8bbe\u7f6e\u4e3atrue\u65f6\uff0c\u547d\u4e2d\u5f53\u524d\u89c4\u5219\u540e\u505c\u6b62\u5904\u7406\u540e\u7eed\u89c4\u5219","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_tag/mod_tag/#_7","text":"{ \"Version\" : \"20200218210000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"example.org\\\")\" , \"Param\" : { \"TagName\" : \"tag\" , \"TagValue\" : \"bfe\" }, \"Last\" : false } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_trace/mod_trace/","text":"mod_trace \u6a21\u5757\u7b80\u4ecb mod_trace\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u4e3a\u8bf7\u6c42\u5f00\u542f\u5206\u5e03\u5f0f\u8ddf\u8e2a\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_trace/mod_trace.conf \u57fa\u7840\u914d\u7f6e\u9879 \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Basic.ServiceName String \u670d\u52a1\u540d Basic.TraceAgent String \u8bbe\u7f6etrace\u7ec4\u4ef6\uff0c\u53ef\u9009\u503c\uff1ajaeger\u548czipkin Log.OpenDebug Boolean \u662f\u5426\u542f\u7528\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7\u5f00\u5173 Zipkin\u914d\u7f6e\u9879 \u914d\u7f6e\u9879 \u63cf\u8ff0 Zipkin.HTTPEndpoint String \u8bbe\u7f6e\u63a5\u6536trace\u4fe1\u606f\u7684\u63a5\u53e3 Zipkin.SameSpan String \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u662f\u5426\u4f7f\u7528\u76f8\u540c\u7684span Zipkin.ID128Bit String \u662f\u5426\u4f7f\u7528128\u4f4dspan ID Zipkin.SampleRate Float \u8bbe\u7f6e\u8bf7\u6c42\u62bd\u6837\u6bd4\u4f8b Jaeger\u914d\u7f6e\u9879 \u914d\u7f6e\u9879 \u63cf\u8ff0 Jaeger.SamplingServerURL String \u8bbe\u7f6e\u62bd\u6837\u670d\u52a1\u5730\u5740 Jaeger.SamplingType String \u8bbe\u7f6e\u62bd\u6837\u7c7b\u578b\uff0c\u53ef\u9009\u503c\uff1aconst, probabilistic, rateLimiting, remote Jaeger.SamplingParam Float \u8bbe\u7f6e\u62bd\u6837\u53c2\u6570 Jaeger.LocalAgentHostPort String \u8bbe\u7f6e\u63a5\u6536span\u4fe1\u606f\u7684jaeger-agent\u5730\u5740 Jaeger.Propagation String \u8bbe\u7f6e\u900f\u4f20\u683c\u5f0f\uff0c\u53ef\u9009\u503c\uff1ajaeger\u6216b3 Jaeger.Gen128Bit Boolean \u662f\u5426\u4f7f\u7528128\u4f4dspan ID Jaeger.TraceContextHeaderName String \u8bbe\u7f6e\u4e0a\u4e0b\u6587\u4e2dheader\u540d\u79f0 Jaeger.CollectorEndpoint String \u8bbe\u7f6ejaeger-collector\u5730\u5740 Jaeger.CollectorUser String \u8bbe\u7f6ejaeger-collector\u8ba4\u8bc1\u7528\u6237\u540d Jaeger.CollectorPassword String \u8bbe\u7f6ejaeger-collector\u8ba4\u8bc1\u5bc6\u7801 Elastic\u914d\u7f6e\u9879 \u914d\u7f6e\u9879 \u63cf\u8ff0 Elastic.ServerURL String \u8bbe\u7f6eElastic APM server Elastic.SecretToken String \u8bbe\u7f6eElastic APM server\u8ba4\u8bc1token \u914d\u7f6e\u793a\u4f8b \u57fa\u4e8eZipkin\u793a\u4f8b [ Basic ] DataPath = mod_trace/trace_rule.data ServiceName = bfe # Which trace agent to use (zipkin, jaeger, elastic) TraceAgent = zipkin [ Log ] OpenDebug = false [ Zipkin ] # Zipkin, only useful when the TraceAgent is zipkin # HTTP Endpoint to report traces to HTTPEndpoint = http:// 127.0 . 0.1 : 9411 /api/v 2 /spans # Use Zipkin SameSpan RPC style traces SameSpan = false # Use Zipkin 128 bit root span IDs ID 128 Bit = true # The rate between 0.0001 and 1.0 of requests to trace SampleRate = 1.0 \u57fa\u4e8eJaeger\u793a\u4f8b [Basic] DataPath = mod_trace/trace_rule.data ServiceName = bfe # Which trace agent to use (zipkin, jaeger, elastic) TraceAgent = jaeger [Log] OpenDebug = false [Jaeger] # Jaeger, only useful when the TraceAgent is jaeger # SamplingServerURL is the address of jaeger-agent's HTTP sampling server SamplingServerURL = http://127.0.0.1:5778/sampling # Type specifies the type of the sampler: const, probabilistic, rateLimiting, or remote SamplingType = const # Param is a value passed to the sampler. # Valid values for Param field are: # - for \"const\" sampler, 0 or 1 for always false/true respectively # - for \"probabilistic\" sampler, a probability between 0 and 1 # - for \"rateLimiting\" sampler, the number of spans per second # - for \"remote\" sampler, param is the same as for \"probabilistic\" # and indicates the initial sampling rate before the actual one # is received from the mothership. SamplingParam = 1.0 # LocalAgentHostPort instructs reporter to send spans to jaeger-agent at this address LocalAgentHostPort = 127.0.0.1:6831 # Which propagation format to use (jaeger/b3) Propagation = jaeger # Use Jaeger 128 bit root span IDs Gen128Bit = true # TraceContextHeaderName is the http header name used to propagate tracing context. TraceContextHeaderName = uber-trace-id # Instructs reporter to send spans to jaeger-collector at this URL CollectorEndpoint = \"\" # CollectorUser for basic http authentication when sending spans to jaeger-collector CollectorUser = \"\" # CollectorPassword for basic http authentication when sending spans to jaeger-collector CollectorPassword = \"\" \u57fa\u4e8eElastic\u793a\u4f8b [Basic] DataPath = mod_trace/trace_rule.data ServiceName = bfe # Which trace agent to use (zipkin, jaeger, elastic) TraceAgent = elastic [Log] OpenDebug = false [Elastic] # Elastic, only useful when TraceAgent is elastic # Set the URL of the Elastic APM server ServerURL = http://127.0.0.1:8200 # Set the token used to connect to Elastic APM Server SecretToken = \"\" \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_trace/trace_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[v][] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219 Config[v][].Cond String \u89c4\u5219\u7684\u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Enable Boolean \u662f\u5426\u5f00\u542ftrace \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20200218210000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"example.org\\\")\" , \"Enable\" : true } ] } }","title":"mod_trace"},{"location":"modules/mod_trace/mod_trace/#mod_trace","text":"","title":"mod_trace"},{"location":"modules/mod_trace/mod_trace/#_1","text":"mod_trace\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6761\u4ef6\uff0c\u4e3a\u8bf7\u6c42\u5f00\u542f\u5206\u5e03\u5f0f\u8ddf\u8e2a\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_trace/mod_trace/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_trace/mod_trace/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_trace/mod_trace.conf","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_trace/mod_trace/#_4","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Basic.ServiceName String \u670d\u52a1\u540d Basic.TraceAgent String \u8bbe\u7f6etrace\u7ec4\u4ef6\uff0c\u53ef\u9009\u503c\uff1ajaeger\u548czipkin Log.OpenDebug Boolean \u662f\u5426\u542f\u7528\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7\u5f00\u5173","title":"\u57fa\u7840\u914d\u7f6e\u9879"},{"location":"modules/mod_trace/mod_trace/#zipkin","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Zipkin.HTTPEndpoint String \u8bbe\u7f6e\u63a5\u6536trace\u4fe1\u606f\u7684\u63a5\u53e3 Zipkin.SameSpan String \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u662f\u5426\u4f7f\u7528\u76f8\u540c\u7684span Zipkin.ID128Bit String \u662f\u5426\u4f7f\u7528128\u4f4dspan ID Zipkin.SampleRate Float \u8bbe\u7f6e\u8bf7\u6c42\u62bd\u6837\u6bd4\u4f8b","title":"Zipkin\u914d\u7f6e\u9879"},{"location":"modules/mod_trace/mod_trace/#jaeger","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Jaeger.SamplingServerURL String \u8bbe\u7f6e\u62bd\u6837\u670d\u52a1\u5730\u5740 Jaeger.SamplingType String \u8bbe\u7f6e\u62bd\u6837\u7c7b\u578b\uff0c\u53ef\u9009\u503c\uff1aconst, probabilistic, rateLimiting, remote Jaeger.SamplingParam Float \u8bbe\u7f6e\u62bd\u6837\u53c2\u6570 Jaeger.LocalAgentHostPort String \u8bbe\u7f6e\u63a5\u6536span\u4fe1\u606f\u7684jaeger-agent\u5730\u5740 Jaeger.Propagation String \u8bbe\u7f6e\u900f\u4f20\u683c\u5f0f\uff0c\u53ef\u9009\u503c\uff1ajaeger\u6216b3 Jaeger.Gen128Bit Boolean \u662f\u5426\u4f7f\u7528128\u4f4dspan ID Jaeger.TraceContextHeaderName String \u8bbe\u7f6e\u4e0a\u4e0b\u6587\u4e2dheader\u540d\u79f0 Jaeger.CollectorEndpoint String \u8bbe\u7f6ejaeger-collector\u5730\u5740 Jaeger.CollectorUser String \u8bbe\u7f6ejaeger-collector\u8ba4\u8bc1\u7528\u6237\u540d Jaeger.CollectorPassword String \u8bbe\u7f6ejaeger-collector\u8ba4\u8bc1\u5bc6\u7801","title":"Jaeger\u914d\u7f6e\u9879"},{"location":"modules/mod_trace/mod_trace/#elastic","text":"\u914d\u7f6e\u9879 \u63cf\u8ff0 Elastic.ServerURL String \u8bbe\u7f6eElastic APM server Elastic.SecretToken String \u8bbe\u7f6eElastic APM server\u8ba4\u8bc1token","title":"Elastic\u914d\u7f6e\u9879"},{"location":"modules/mod_trace/mod_trace/#_5","text":"","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_trace/mod_trace/#zipkin_1","text":"[ Basic ] DataPath = mod_trace/trace_rule.data ServiceName = bfe # Which trace agent to use (zipkin, jaeger, elastic) TraceAgent = zipkin [ Log ] OpenDebug = false [ Zipkin ] # Zipkin, only useful when the TraceAgent is zipkin # HTTP Endpoint to report traces to HTTPEndpoint = http:// 127.0 . 0.1 : 9411 /api/v 2 /spans # Use Zipkin SameSpan RPC style traces SameSpan = false # Use Zipkin 128 bit root span IDs ID 128 Bit = true # The rate between 0.0001 and 1.0 of requests to trace SampleRate = 1.0","title":"\u57fa\u4e8eZipkin\u793a\u4f8b"},{"location":"modules/mod_trace/mod_trace/#jaeger_1","text":"[Basic] DataPath = mod_trace/trace_rule.data ServiceName = bfe # Which trace agent to use (zipkin, jaeger, elastic) TraceAgent = jaeger [Log] OpenDebug = false [Jaeger] # Jaeger, only useful when the TraceAgent is jaeger # SamplingServerURL is the address of jaeger-agent's HTTP sampling server SamplingServerURL = http://127.0.0.1:5778/sampling # Type specifies the type of the sampler: const, probabilistic, rateLimiting, or remote SamplingType = const # Param is a value passed to the sampler. # Valid values for Param field are: # - for \"const\" sampler, 0 or 1 for always false/true respectively # - for \"probabilistic\" sampler, a probability between 0 and 1 # - for \"rateLimiting\" sampler, the number of spans per second # - for \"remote\" sampler, param is the same as for \"probabilistic\" # and indicates the initial sampling rate before the actual one # is received from the mothership. SamplingParam = 1.0 # LocalAgentHostPort instructs reporter to send spans to jaeger-agent at this address LocalAgentHostPort = 127.0.0.1:6831 # Which propagation format to use (jaeger/b3) Propagation = jaeger # Use Jaeger 128 bit root span IDs Gen128Bit = true # TraceContextHeaderName is the http header name used to propagate tracing context. TraceContextHeaderName = uber-trace-id # Instructs reporter to send spans to jaeger-collector at this URL CollectorEndpoint = \"\" # CollectorUser for basic http authentication when sending spans to jaeger-collector CollectorUser = \"\" # CollectorPassword for basic http authentication when sending spans to jaeger-collector CollectorPassword = \"\"","title":"\u57fa\u4e8eJaeger\u793a\u4f8b"},{"location":"modules/mod_trace/mod_trace/#elastic_1","text":"[Basic] DataPath = mod_trace/trace_rule.data ServiceName = bfe # Which trace agent to use (zipkin, jaeger, elastic) TraceAgent = elastic [Log] OpenDebug = false [Elastic] # Elastic, only useful when TraceAgent is elastic # Set the URL of the Elastic APM server ServerURL = http://127.0.0.1:8200 # Set the token used to connect to Elastic APM Server SecretToken = \"\"","title":"\u57fa\u4e8eElastic\u793a\u4f8b"},{"location":"modules/mod_trace/mod_trace/#_6","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_trace/mod_trace/#_7","text":"\u89c4\u5219\u914d\u7f6e\u6587\u4ef6: conf/mod_trace/trace_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u5217\u8868 Config[v][] Object \u4ea7\u54c1\u7ebf\u7684\u89c4\u5219 Config[v][].Cond String \u89c4\u5219\u7684\u5339\u914d\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Enable Boolean \u662f\u5426\u5f00\u542ftrace","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_trace/mod_trace/#_8","text":"{ \"Version\" : \"20200218210000\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_host_in(\\\"example.org\\\")\" , \"Enable\" : true } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/","text":"mod_trust_clientip \u6a21\u5757\u7b80\u4ecb mod_trust_clientip\u57fa\u4e8e\u914d\u7f6e\u4fe1\u4efbIP\u5217\u8868\uff0c\u68c0\u67e5\u5e76\u6807\u8bc6\u8bbf\u95ee\u7528\u6237\u771f\u5b9eIP\u662f\u5426\u5c5e\u4e8e\u4fe1\u4efbIP\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_trust_clientip/mod_trust_clientip.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String IP\u5b57\u5178\u6587\u4ef6\u8def\u5f84\uff0c\u5305\u542b\u4e86\u6240\u6709\u4fe1\u4efbIP \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_trust_clientip/trust_client_ip.data \u5b57\u5178\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u5b57\u5178\u914d\u7f6e\u6587\u4ef6\u8def\u5f84: conf/mod_trust_clientip/trust_client_ip.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6240\u6709\u4fe1\u4efb\u7684IP\u5217\u8868 Config[k] String \u5730\u5740\u6807\u7b7e Config[v] Object \u4fe1\u4efb\u7684IP\u6bb5\u5217\u8868 Config[v][] Object IP\u6bb5 Config[v][].Begin String IP\u6bb5\u8d77\u59cb\u5730\u5740 Config[v][].End String IP\u6bb5\u7ed3\u675f\u5730\u5740 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"20190101000000\" , \"Config\" : { \"inner-idc\" : [ { \"Begin\" : \"10.0.0.0\" , \"End\" : \"10.255.255.255\" } ] } } \u76d1\u63a7\u4fe1\u606f \u76d1\u63a7\u9879 \u63cf\u8ff0 CONN_TOTAL \u6240\u6709\u8fde\u63a5\u6570 CONN_TRUST_CLIENTIP \u6765\u6e90\u4e8e\u4fe1\u4efb\u5730\u5740\u7684\u8fde\u63a5\u6570","title":"mod_trust_clientip"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#mod_trust_clientip","text":"","title":"mod_trust_clientip"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_1","text":"mod_trust_clientip\u57fa\u4e8e\u914d\u7f6e\u4fe1\u4efbIP\u5217\u8868\uff0c\u68c0\u67e5\u5e76\u6807\u8bc6\u8bbf\u95ee\u7528\u6237\u771f\u5b9eIP\u662f\u5426\u5c5e\u4e8e\u4fe1\u4efbIP\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_3","text":"\u6a21\u5757\u914d\u7f6e\u6587\u4ef6: conf/mod_trust_clientip/mod_trust_clientip.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath String IP\u5b57\u5178\u6587\u4ef6\u8def\u5f84\uff0c\u5305\u542b\u4e86\u6240\u6709\u4fe1\u4efbIP","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_4","text":"[basic] DataPath = mod_trust_clientip/trust_client_ip.data","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_5","text":"","title":"\u5b57\u5178\u914d\u7f6e"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_6","text":"\u5b57\u5178\u914d\u7f6e\u6587\u4ef6\u8def\u5f84: conf/mod_trust_clientip/trust_client_ip.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u6240\u6709\u4fe1\u4efb\u7684IP\u5217\u8868 Config[k] String \u5730\u5740\u6807\u7b7e Config[v] Object \u4fe1\u4efb\u7684IP\u6bb5\u5217\u8868 Config[v][] Object IP\u6bb5 Config[v][].Begin String IP\u6bb5\u8d77\u59cb\u5730\u5740 Config[v][].End String IP\u6bb5\u7ed3\u675f\u5730\u5740","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_7","text":"{ \"Version\" : \"20190101000000\" , \"Config\" : { \"inner-idc\" : [ { \"Begin\" : \"10.0.0.0\" , \"End\" : \"10.255.255.255\" } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_trust_clientip/mod_trust_clientip/#_8","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 CONN_TOTAL \u6240\u6709\u8fde\u63a5\u6570 CONN_TRUST_CLIENTIP \u6765\u6e90\u4e8e\u4fe1\u4efb\u5730\u5740\u7684\u8fde\u63a5\u6570","title":"\u76d1\u63a7\u4fe1\u606f"},{"location":"modules/mod_userid/mod_userid/","text":"mod_userid \u6a21\u5757\u7b80\u4ecb mod_userid\u4e3a\u65b0\u7528\u6237\u81ea\u52a8\u5728Cookie\u4e2d\u6dfb\u52a0\u7528\u6237\u6807\u8bc6\u3002 \u57fa\u7840\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u57fa\u7840\u914d\u7f6e\u6587\u4ef6: conf/mod_userid/mod_userid.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Log.OpenDebug \u662f\u5426\u542f\u7528\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7\u5f00\u5173 \u914d\u7f6e\u793a\u4f8b [basic] DataPath = mod_userid/userid_rule.data [Log] OpenDebug = true \u89c4\u5219\u914d\u7f6e \u914d\u7f6e\u63cf\u8ff0 \u6a21\u5757\u89c4\u5219\u914d\u7f6e\u6587\u4ef6\uff1aconf/mod_userid/userid_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u914d\u7f6e Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u89c4\u5219\u5217\u8868 Config[v][].Cond \u89c4\u5219\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Params.Name Cookie\u7684Name\u5c5e\u6027 Config[v][].Params.Domain Cookie\u7684Domain\u5c5e\u6027 Config[v][].Params.Path Cookie\u7684Path\u5c5e\u6027 Config[v][].Params.MaxAge Cookie\u7684MaxAge\u5c5e\u6027 \u914d\u7f6e\u793a\u4f8b { \"Version\" : \"2019-12-10184356\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_path_prefix_in(\\\"/abc\\\", true)\" , \"Params\" : { \"Name\" : \"bfe_userid_abc\" , \"Domain\" : \"\" , \"Path\" : \"/abc\" , \"MaxAge\" : 3153600 }, \"Generator\" : \"default\" }, { \"Cond\" : \"default_t()\" , \"Params\" : { \"Name\" : \"bfe_userid\" , \"Domain\" : \"\" , \"Path\" : \"/\" , \"MaxAge\" : 3153600 } } ] } }","title":"mod_userid"},{"location":"modules/mod_userid/mod_userid/#mod_userid","text":"","title":"mod_userid"},{"location":"modules/mod_userid/mod_userid/#_1","text":"mod_userid\u4e3a\u65b0\u7528\u6237\u81ea\u52a8\u5728Cookie\u4e2d\u6dfb\u52a0\u7528\u6237\u6807\u8bc6\u3002","title":"\u6a21\u5757\u7b80\u4ecb"},{"location":"modules/mod_userid/mod_userid/#_2","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"modules/mod_userid/mod_userid/#_3","text":"\u6a21\u5757\u57fa\u7840\u914d\u7f6e\u6587\u4ef6: conf/mod_userid/mod_userid.conf \u914d\u7f6e\u9879 \u63cf\u8ff0 Basic.DataPath \u89c4\u5219\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 Log.OpenDebug \u662f\u5426\u542f\u7528\u6a21\u5757\u8c03\u8bd5\u65e5\u5fd7\u5f00\u5173","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_userid/mod_userid/#_4","text":"[basic] DataPath = mod_userid/userid_rule.data [Log] OpenDebug = true","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"modules/mod_userid/mod_userid/#_5","text":"","title":"\u89c4\u5219\u914d\u7f6e"},{"location":"modules/mod_userid/mod_userid/#_6","text":"\u6a21\u5757\u89c4\u5219\u914d\u7f6e\u6587\u4ef6\uff1aconf/mod_userid/userid_rule.data \u914d\u7f6e\u9879 \u63cf\u8ff0 Version String \u914d\u7f6e\u6587\u4ef6\u7248\u672c Config Object \u5404\u4ea7\u54c1\u7ebf\u7684\u89c4\u5219\u914d\u7f6e Config[k] String \u4ea7\u54c1\u7ebf\u540d\u79f0 Config[v] Object \u4ea7\u54c1\u7ebf\u89c4\u5219\u5217\u8868 Config[v][].Cond \u89c4\u5219\u6761\u4ef6, \u8bed\u6cd5\u8be6\u89c1 Condition Config[v][].Params.Name Cookie\u7684Name\u5c5e\u6027 Config[v][].Params.Domain Cookie\u7684Domain\u5c5e\u6027 Config[v][].Params.Path Cookie\u7684Path\u5c5e\u6027 Config[v][].Params.MaxAge Cookie\u7684MaxAge\u5c5e\u6027","title":"\u914d\u7f6e\u63cf\u8ff0"},{"location":"modules/mod_userid/mod_userid/#_7","text":"{ \"Version\" : \"2019-12-10184356\" , \"Config\" : { \"example_product\" : [ { \"Cond\" : \"req_path_prefix_in(\\\"/abc\\\", true)\" , \"Params\" : { \"Name\" : \"bfe_userid_abc\" , \"Domain\" : \"\" , \"Path\" : \"/abc\" , \"MaxAge\" : 3153600 }, \"Generator\" : \"default\" }, { \"Cond\" : \"default_t()\" , \"Params\" : { \"Name\" : \"bfe_userid\" , \"Domain\" : \"\" , \"Path\" : \"/\" , \"MaxAge\" : 3153600 } } ] } }","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"monitor/bal_state/","text":"\u5747\u8861\u9519\u8bef \u7b80\u4ecb bal_state\u662f\u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861\u72b6\u6001\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_BK_NO_BACKEND \u672a\u627e\u5230\u540e\u7aef\u7684\u9519\u8bef\u6570 ERR_BK_NO_SUB_CLUSTER \u672a\u627e\u5230\u5b50\u96c6\u7fa4\u7684\u9519\u8bef\u6570 ERR_BK_NO_SUB_CLUSTER_CROSS \u8de8\u5b50\u96c6\u7fa4\u8f6c\u53d1\u65f6\uff0c\u672a\u627e\u5230\u5b50\u96c6\u7fa4\u7684\u9519\u8bef\u6570 ERR_BK_RETRY_TOO_MANY \u8f6c\u53d1\u8fbe\u5230\u6700\u5927\u91cd\u8bd5\u6b21\u6570\u7684\u9519\u8bef\u6570 ERR_GSLB_BLACKHOLE \u8f6c\u53d1\u5230\u9ed1\u6d1e\u7684\u6570\u91cf","title":"\u5747\u8861\u9519\u8bef"},{"location":"monitor/bal_state/#_1","text":"","title":"\u5747\u8861\u9519\u8bef"},{"location":"monitor/bal_state/#_2","text":"bal_state\u662f\u5b50\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861\u72b6\u6001\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/bal_state/#_3","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_BK_NO_BACKEND \u672a\u627e\u5230\u540e\u7aef\u7684\u9519\u8bef\u6570 ERR_BK_NO_SUB_CLUSTER \u672a\u627e\u5230\u5b50\u96c6\u7fa4\u7684\u9519\u8bef\u6570 ERR_BK_NO_SUB_CLUSTER_CROSS \u8de8\u5b50\u96c6\u7fa4\u8f6c\u53d1\u65f6\uff0c\u672a\u627e\u5230\u5b50\u96c6\u7fa4\u7684\u9519\u8bef\u6570 ERR_BK_RETRY_TOO_MANY \u8f6c\u53d1\u8fbe\u5230\u6700\u5927\u91cd\u8bd5\u6b21\u6570\u7684\u9519\u8bef\u6570 ERR_GSLB_BLACKHOLE \u8f6c\u53d1\u5230\u9ed1\u6d1e\u7684\u6570\u91cf","title":"\u76d1\u63a7\u9879"},{"location":"monitor/bal_table_status/","text":"\u5747\u8861\u8be6\u60c5 \u7b80\u4ecb bal_table_status \u662f\u4fdd\u5b58\u540e\u7aef\u96c6\u7fa4table\u7684\u72b6\u6001\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 Balancers \u96c6\u7fa4\u72b6\u6001\uff0c\u8be5\u76d1\u63a7\u9879\u65f6map\u6570\u636e\uff0ckey\u662f\u96c6\u7fa4\u540d\u79f0\uff0cvalue\u662f\u96c6\u7fa4\u7684\u72b6\u6001\u4fe1\u606f BackendNum \u6240\u6709\u96c6\u7fa4\u540e\u7aef\u5b9e\u4f8b\u603b\u6570 \u96c6\u7fa4\u72b6\u6001\u4fe1\u606f \u76d1\u63a7\u9879 \u63cf\u8ff0 SubClusters \u5b50\u96c6\u7fa4\u72b6\u6001\uff0c\u8be5\u76d1\u63a7\u9879\u65f6map\u6570\u636e\uff0ckey\u662f\u5b50\u96c6\u7fa4\u540d\u79f0\uff0cvalue\u662f\u8be5\u5b50\u96c6\u7fa4\u540e\u7aef\u5b9e\u4f8b\u7684\u603b\u6570 BackendNum \u6240\u6709\u5b50\u96c6\u7fa4\u540e\u7aef\u5b9e\u4f8b\u603b\u6570","title":"\u5747\u8861\u8be6\u60c5"},{"location":"monitor/bal_table_status/#_1","text":"","title":"\u5747\u8861\u8be6\u60c5"},{"location":"monitor/bal_table_status/#_2","text":"bal_table_status \u662f\u4fdd\u5b58\u540e\u7aef\u96c6\u7fa4table\u7684\u72b6\u6001\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/bal_table_status/#_3","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 Balancers \u96c6\u7fa4\u72b6\u6001\uff0c\u8be5\u76d1\u63a7\u9879\u65f6map\u6570\u636e\uff0ckey\u662f\u96c6\u7fa4\u540d\u79f0\uff0cvalue\u662f\u96c6\u7fa4\u7684\u72b6\u6001\u4fe1\u606f BackendNum \u6240\u6709\u96c6\u7fa4\u540e\u7aef\u5b9e\u4f8b\u603b\u6570","title":"\u76d1\u63a7\u9879"},{"location":"monitor/bal_table_status/#_4","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 SubClusters \u5b50\u96c6\u7fa4\u72b6\u6001\uff0c\u8be5\u76d1\u63a7\u9879\u65f6map\u6570\u636e\uff0ckey\u662f\u5b50\u96c6\u7fa4\u540d\u79f0\uff0cvalue\u662f\u8be5\u5b50\u96c6\u7fa4\u540e\u7aef\u5b9e\u4f8b\u7684\u603b\u6570 BackendNum \u6240\u6709\u5b50\u96c6\u7fa4\u540e\u7aef\u5b9e\u4f8b\u603b\u6570","title":"\u96c6\u7fa4\u72b6\u6001\u4fe1\u606f"},{"location":"monitor/bal_table_version/","text":"\u7b80\u4ecb bal_table_version\u662f\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7684\u7248\u672c\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 ClusterTableConfVer \u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7248\u672c GslbConfTimeStamp \u5b50\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7248\u672c GslbConfSrc Gslb\u8c03\u5ea6\u5668\u4fe1\u606f","title":"\u7b80\u4ecb"},{"location":"monitor/bal_table_version/#_1","text":"bal_table_version\u662f\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7684\u7248\u672c\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/bal_table_version/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 ClusterTableConfVer \u5b9e\u4f8b\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7248\u672c GslbConfTimeStamp \u5b50\u96c6\u7fa4\u7ea7\u522b\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7248\u672c GslbConfSrc Gslb\u8c03\u5ea6\u5668\u4fe1\u606f","title":"\u76d1\u63a7\u9879"},{"location":"monitor/cluster_table_version/","text":"\u7b80\u4ecb cluster_table_version\u662f\u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u7684\u7248\u672c\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 ClusterConfVer \u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u7248\u672c","title":"\u7b80\u4ecb"},{"location":"monitor/cluster_table_version/#_1","text":"cluster_table_version\u662f\u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u7684\u7248\u672c\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/cluster_table_version/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 ClusterConfVer \u96c6\u7fa4\u8f6c\u53d1\u914d\u7f6e\u7248\u672c","title":"\u76d1\u63a7\u9879"},{"location":"monitor/host_table_status/","text":"\u8def\u7531\u8868 \u7b80\u4ecb host_table_status \u662f\u8def\u7531\u76f8\u5173\u914d\u7f6e\u7684\u72b6\u6001\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 HostTableSize \u4ea7\u54c1\u7ebf\u57df\u540d\u8868\u7684\u5927\u5c0f HostTagTableSize \u4ea7\u54c1\u7ebf\u57df\u540d\u6807\u7b7e\u8868\u7684\u5927\u5c0f VipTableSize \u4ea7\u54c1\u7ebfVIP\u8868\u7684\u5927\u5c0f ProductRouteTableSize \u4ea7\u54c1\u7ebf\u8def\u7531\u8868\u7684\u5927\u5c0f","title":"\u57df\u540d\u8868"},{"location":"monitor/host_table_status/#_1","text":"","title":"\u8def\u7531\u8868"},{"location":"monitor/host_table_status/#_2","text":"host_table_status \u662f\u8def\u7531\u76f8\u5173\u914d\u7f6e\u7684\u72b6\u6001\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/host_table_status/#_3","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 HostTableSize \u4ea7\u54c1\u7ebf\u57df\u540d\u8868\u7684\u5927\u5c0f HostTagTableSize \u4ea7\u54c1\u7ebf\u57df\u540d\u6807\u7b7e\u8868\u7684\u5927\u5c0f VipTableSize \u4ea7\u54c1\u7ebfVIP\u8868\u7684\u5927\u5c0f ProductRouteTableSize \u4ea7\u54c1\u7ebf\u8def\u7531\u8868\u7684\u5927\u5c0f","title":"\u76d1\u63a7\u9879"},{"location":"monitor/host_table_version/","text":"\u7b80\u4ecb host_table_version \u662f\u4ea7\u54c1\u7ebf\u8def\u7531\u76f8\u5173\u914d\u7f6e\u7684\u7248\u672c\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 HostTag \u4ea7\u54c1\u7ebf\u57df\u540d\u89c4\u5219\u914d\u7f6e\u7684\u7248\u672c Vip \u4ea7\u54c1\u7ebfvip\u89c4\u5219\u914d\u7f6e\u7684\u7248\u672c ProductRoute \u4ea7\u54c1\u7ebf\u5206\u6d41\u89c4\u5219\u914d\u7f6e\u7684\u7248\u672c","title":"\u7b80\u4ecb"},{"location":"monitor/host_table_version/#_1","text":"host_table_version \u662f\u4ea7\u54c1\u7ebf\u8def\u7531\u76f8\u5173\u914d\u7f6e\u7684\u7248\u672c\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/host_table_version/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 HostTag \u4ea7\u54c1\u7ebf\u57df\u540d\u89c4\u5219\u914d\u7f6e\u7684\u7248\u672c Vip \u4ea7\u54c1\u7ebfvip\u89c4\u5219\u914d\u7f6e\u7684\u7248\u672c ProductRoute \u4ea7\u54c1\u7ebf\u5206\u6d41\u89c4\u5219\u914d\u7f6e\u7684\u7248\u672c","title":"\u76d1\u63a7\u9879"},{"location":"monitor/http2_state/","text":"HTTP2 \u7b80\u4ecb http2_state \u662fHTTP2\u7684\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 H2_ERR_MAX_HEADER_LIST_SIZE \u8bf7\u6c42header\u8d85\u9650\u9519\u8bef\u7684\u6570\u91cf H2_ERR_MAX_HEADER_URI_SIZE \u8bf7\u6c42\u4e2dURI\u8d85\u9650\u9519\u8bef\u7684\u6570\u91cf H2_ERR_MAX_STREAM_PER_CONN \u8fde\u63a5\u5e76\u53d1\u6d41\u8d85\u9650\u9519\u8bef\u7684\u6570\u91cf H2_ERR_GOT_RESET \u6d41\u6536\u5230RESET\u5e27\u7684\u6570\u91cf H2_PANIC_CONN \u8fde\u63a5\u5904\u7406\u534f\u7a0bpanic\u7684\u6570\u91cf H2_PANIC_STREAM \u6d41\u5904\u7406\u534f\u7a0bpanic\u7684\u6570\u91cf H2_TIMEOUT_CONN \u8fde\u63a5\u8d85\u65f6\u7684\u6570\u91cf H2_TIMEOUT_PREFACE \u8bfb\u5ba2\u6237\u7aefperface\u8d85\u65f6\u6570\u91cf H2_TIMEOUT_SETTING \u8bfb\u5ba2\u6237\u7aefsettings\u8d85\u65f6\u6570\u91cf H2_TIMEOUT_READ_STREAM \u6d41\u8bfb\u8d85\u65f6\u6570\u91cf H2_TIMEOUT_WRITE_STREAM \u6d41\u5199\u8d85\u65f6\u6570\u91cf H2_CONN_OVERLOAD \u8fc7\u8f7d\u72b6\u6001\u62d2\u7edd\u8fde\u63a5\u7684\u6570\u91cf H2_REQ_OVERLOAD \u8fc7\u8f7d\u72b6\u6001\u62d2\u7edd\u8bf7\u6c42\u7684\u6570\u91cf H2_REQ_HEADER_COMPRESS_SIZE \u538b\u7f29\u7684\u8bf7\u6c42\u5934\u603b\u5b57\u8282\u6570 H2_REQ_HEADER_ORIGINAL_SIZE \u89e3\u538b\u7684\u8bf7\u6c42\u5934\u603b\u5b57\u8282\u6570 H2_RES_HEADER_COMPRESS_SIZE \u538b\u7f29\u7684\u54cd\u5e94\u5934\u603b\u5b57\u8282\u6570 H2_RES_HEADER_ORIGINAL_SIZE \u89e3\u538b\u7684\u54cd\u5e94\u5934\u603b\u5b57\u8282\u6570","title":"HTTP2"},{"location":"monitor/http2_state/#http2","text":"","title":"HTTP2"},{"location":"monitor/http2_state/#_1","text":"http2_state \u662fHTTP2\u7684\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/http2_state/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 H2_ERR_MAX_HEADER_LIST_SIZE \u8bf7\u6c42header\u8d85\u9650\u9519\u8bef\u7684\u6570\u91cf H2_ERR_MAX_HEADER_URI_SIZE \u8bf7\u6c42\u4e2dURI\u8d85\u9650\u9519\u8bef\u7684\u6570\u91cf H2_ERR_MAX_STREAM_PER_CONN \u8fde\u63a5\u5e76\u53d1\u6d41\u8d85\u9650\u9519\u8bef\u7684\u6570\u91cf H2_ERR_GOT_RESET \u6d41\u6536\u5230RESET\u5e27\u7684\u6570\u91cf H2_PANIC_CONN \u8fde\u63a5\u5904\u7406\u534f\u7a0bpanic\u7684\u6570\u91cf H2_PANIC_STREAM \u6d41\u5904\u7406\u534f\u7a0bpanic\u7684\u6570\u91cf H2_TIMEOUT_CONN \u8fde\u63a5\u8d85\u65f6\u7684\u6570\u91cf H2_TIMEOUT_PREFACE \u8bfb\u5ba2\u6237\u7aefperface\u8d85\u65f6\u6570\u91cf H2_TIMEOUT_SETTING \u8bfb\u5ba2\u6237\u7aefsettings\u8d85\u65f6\u6570\u91cf H2_TIMEOUT_READ_STREAM \u6d41\u8bfb\u8d85\u65f6\u6570\u91cf H2_TIMEOUT_WRITE_STREAM \u6d41\u5199\u8d85\u65f6\u6570\u91cf H2_CONN_OVERLOAD \u8fc7\u8f7d\u72b6\u6001\u62d2\u7edd\u8fde\u63a5\u7684\u6570\u91cf H2_REQ_OVERLOAD \u8fc7\u8f7d\u72b6\u6001\u62d2\u7edd\u8bf7\u6c42\u7684\u6570\u91cf H2_REQ_HEADER_COMPRESS_SIZE \u538b\u7f29\u7684\u8bf7\u6c42\u5934\u603b\u5b57\u8282\u6570 H2_REQ_HEADER_ORIGINAL_SIZE \u89e3\u538b\u7684\u8bf7\u6c42\u5934\u603b\u5b57\u8282\u6570 H2_RES_HEADER_COMPRESS_SIZE \u538b\u7f29\u7684\u54cd\u5e94\u5934\u603b\u5b57\u8282\u6570 H2_RES_HEADER_ORIGINAL_SIZE \u89e3\u538b\u7684\u54cd\u5e94\u5934\u603b\u5b57\u8282\u6570","title":"\u76d1\u63a7\u9879"},{"location":"monitor/http_state/","text":"HTTP \u7b80\u4ecb http_state \u662fHTTP1.0/1.1\u7684\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 HTTP_BACKEND_CONN_ALL \u4e0e\u540e\u7aef\u5efa\u7acb\u8fde\u63a5\u7684\u603b\u6570\u91cf HTTP_BACKEND_CONN_SUCC \u4e0e\u540e\u7aef\u5efa\u7acb\u8fde\u63a5\u6210\u529f\u6570\u91cf HTTP_BACKEND_REQ_ALL \u8f6c\u53d1\u8bf7\u6c42\u5230\u540e\u7aef\u7684\u603b\u6570\u91cf HTTP_BACKEND_REQ_SUCC \u8f6c\u53d1\u8bf7\u6c42\u5230\u540e\u7aef\u6210\u529f\u6570\u91cf HTTP_CANCEL_ON_CLIENT_CLOSE \u7531\u4e8e\u5ba2\u6237\u7aef\u65ad\u8fde\u505c\u6b62\u963b\u585e\u8bfb\u540e\u7aef\u54cd\u5e94\u4e8b\u4ef6\u6570\u91cf HTTP_PANIC_BACKEND_READ \u540e\u7aefREAD\u534f\u7a0bpanic\u7684\u6570\u91cf HTTP_PANIC_BACKEND_WRITE \u540e\u7aefWRITE\u534f\u7a0bpanic\u7684\u6570\u91cf HTTP_PANIC_CLIENT_FLUSH_LOOP \u5ba2\u6237\u7aefFLUSH\u534f\u7a0bpanic\u7684\u6570\u91cf HTTP_PANIC_CLIENT_WATCH_LOOP \u5ba2\u6237\u7aefWATCH\u534f\u7a0bpanic\u7684\u6570\u91cf","title":"HTTP"},{"location":"monitor/http_state/#http","text":"","title":"HTTP"},{"location":"monitor/http_state/#_1","text":"http_state \u662fHTTP1.0/1.1\u7684\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/http_state/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 HTTP_BACKEND_CONN_ALL \u4e0e\u540e\u7aef\u5efa\u7acb\u8fde\u63a5\u7684\u603b\u6570\u91cf HTTP_BACKEND_CONN_SUCC \u4e0e\u540e\u7aef\u5efa\u7acb\u8fde\u63a5\u6210\u529f\u6570\u91cf HTTP_BACKEND_REQ_ALL \u8f6c\u53d1\u8bf7\u6c42\u5230\u540e\u7aef\u7684\u603b\u6570\u91cf HTTP_BACKEND_REQ_SUCC \u8f6c\u53d1\u8bf7\u6c42\u5230\u540e\u7aef\u6210\u529f\u6570\u91cf HTTP_CANCEL_ON_CLIENT_CLOSE \u7531\u4e8e\u5ba2\u6237\u7aef\u65ad\u8fde\u505c\u6b62\u963b\u585e\u8bfb\u540e\u7aef\u54cd\u5e94\u4e8b\u4ef6\u6570\u91cf HTTP_PANIC_BACKEND_READ \u540e\u7aefREAD\u534f\u7a0bpanic\u7684\u6570\u91cf HTTP_PANIC_BACKEND_WRITE \u540e\u7aefWRITE\u534f\u7a0bpanic\u7684\u6570\u91cf HTTP_PANIC_CLIENT_FLUSH_LOOP \u5ba2\u6237\u7aefFLUSH\u534f\u7a0bpanic\u7684\u6570\u91cf HTTP_PANIC_CLIENT_WATCH_LOOP \u5ba2\u6237\u7aefWATCH\u534f\u7a0bpanic\u7684\u6570\u91cf","title":"\u76d1\u63a7\u9879"},{"location":"monitor/module_status/","text":"\u6269\u5c55\u6a21\u5757 \u7b80\u4ecb module_status \u662f\u6a21\u5757\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 available \u53ef\u7528\u6a21\u5757\u5217\u8868 enabled \u542f\u7528\u6a21\u5757\u5217\u8868 \u5173\u4e8e\u5404\u6a21\u5757\u76d1\u63a7\u9879, \u8be6\u89c1 \u6a21\u5757\u8bf4\u660e","title":"\u6269\u5c55\u6a21\u5757"},{"location":"monitor/module_status/#_1","text":"","title":"\u6269\u5c55\u6a21\u5757"},{"location":"monitor/module_status/#_2","text":"module_status \u662f\u6a21\u5757\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/module_status/#_3","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 available \u53ef\u7528\u6a21\u5757\u5217\u8868 enabled \u542f\u7528\u6a21\u5757\u5217\u8868 \u5173\u4e8e\u5404\u6a21\u5757\u76d1\u63a7\u9879, \u8be6\u89c1 \u6a21\u5757\u8bf4\u660e","title":"\u76d1\u63a7\u9879"},{"location":"monitor/proxy_XXX_delay/","text":"\u8f6c\u53d1\u5ef6\u65f6 \u7b80\u4ecb proxy_XXX_delay \u662f\u8f6c\u53d1\u5ef6\u65f6\u7684\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 Interval \u83b7\u53d6\u8f6c\u53d1\u5ef6\u65f6\u7684\u65f6\u95f4\u95f4\u9694 KeyPrefix key \u524d\u7f00 ProgramName \u670d\u52a1\u540d\u79f0 CurrTime \u5f53\u524d\u65f6\u95f4 Current \u5f53\u524d\u91c7\u96c6\u65f6\u95f4\u95f4\u9694\u4e2d\u7684\u8f6c\u53d1\u5ef6\u65f6 PastTime \u4e0a\u4e2a\u91c7\u96c6\u65f6\u95f4 Past \u4e0a\u4e2a\u91c7\u96c6\u65f6\u95f4\u7684\u8f6c\u53d1\u5ef6\u65f6 \u8f6c\u53d1\u5ef6\u65f6\u8be6\u7ec6\u4fe1\u606f \u76d1\u63a7\u9879 \u63cf\u8ff0 BucketSize \u6bcf\u4e2a\u5ef6\u65f6bucket\u7684\u5927\u5c0f\uff0c\u4f8b\u5982\uff1a1(ms) \u6216 2(ms) BucketNum bucket\u4e2a\u6570 Count \u6837\u4f8b\u603b\u6570 Sum \u6c47\u603b\u6570\u636e\uff0c\u5355\u4f4d\u4e3a\u5fae\u79d2 Ave \u5e73\u5747\u6570\u636e\uff0c\u5355\u4f4d\u4e3a\u5fae\u79d2 Counters \u6bcf\u4e2abucket\u7684\u5177\u4f53\u4fe1\u606f\u3002\u4f8b\u5982\uff1abucketSize == 1ms\uff0c BucketNum == 5, counters \u4e3a0-1, 1-2, 2-3, 3-4, 4-5, >5","title":"\u5ef6\u8fdf\u5206\u5e03"},{"location":"monitor/proxy_XXX_delay/#_1","text":"","title":"\u8f6c\u53d1\u5ef6\u65f6"},{"location":"monitor/proxy_XXX_delay/#_2","text":"proxy_XXX_delay \u662f\u8f6c\u53d1\u5ef6\u65f6\u7684\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/proxy_XXX_delay/#_3","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 Interval \u83b7\u53d6\u8f6c\u53d1\u5ef6\u65f6\u7684\u65f6\u95f4\u95f4\u9694 KeyPrefix key \u524d\u7f00 ProgramName \u670d\u52a1\u540d\u79f0 CurrTime \u5f53\u524d\u65f6\u95f4 Current \u5f53\u524d\u91c7\u96c6\u65f6\u95f4\u95f4\u9694\u4e2d\u7684\u8f6c\u53d1\u5ef6\u65f6 PastTime \u4e0a\u4e2a\u91c7\u96c6\u65f6\u95f4 Past \u4e0a\u4e2a\u91c7\u96c6\u65f6\u95f4\u7684\u8f6c\u53d1\u5ef6\u65f6","title":"\u76d1\u63a7\u9879"},{"location":"monitor/proxy_XXX_delay/#_4","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 BucketSize \u6bcf\u4e2a\u5ef6\u65f6bucket\u7684\u5927\u5c0f\uff0c\u4f8b\u5982\uff1a1(ms) \u6216 2(ms) BucketNum bucket\u4e2a\u6570 Count \u6837\u4f8b\u603b\u6570 Sum \u6c47\u603b\u6570\u636e\uff0c\u5355\u4f4d\u4e3a\u5fae\u79d2 Ave \u5e73\u5747\u6570\u636e\uff0c\u5355\u4f4d\u4e3a\u5fae\u79d2 Counters \u6bcf\u4e2abucket\u7684\u5177\u4f53\u4fe1\u606f\u3002\u4f8b\u5982\uff1abucketSize == 1ms\uff0c BucketNum == 5, counters \u4e3a0-1, 1-2, 2-3, 3-4, 4-5, >5","title":"\u8f6c\u53d1\u5ef6\u65f6\u8be6\u7ec6\u4fe1\u606f"},{"location":"monitor/proxy_mem_stat/","text":"\u7b80\u4ecb proxy_mem_stat \u662fBFE\u7684\u5185\u5b58\u7684\u72b6\u6001\u4fe1\u606f \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 Alloc \u5df2\u5206\u914d\u4e14\u4ecd\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570 TotalAlloc \u5df2\u5206\u914d\uff08\u5305\u62ec\u5df2\u91ca\u653e\u7684\uff09\u5b57\u8282\u6570 Sys \u4ece\u7cfb\u7edf\u4e2d\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff08\u5e94\u5f53\u4e3a\u4e0b\u9762 XxxSys \u4e4b\u548c\uff09 Lookups \u6307\u9488\u67e5\u627e\u6570 Mallocs malloc \u6570 Frees free \u6570 HeapAlloc \u5df2\u5206\u914d\u4e14\u4ecd\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570 HeapSys \u4ece\u7cfb\u7edf\u4e2d\u83b7\u53d6\u7684\u5b57\u8282\u6570 HeapIdle \u7a7a\u95f2\u533a\u95f4\u7684\u5b57\u8282\u6570 HeapInuse \u975e\u7a7a\u95f2\u533a\u95f4\u7684\u5b57\u8282\u6570 HeapReleased \u91ca\u653e\u7ed9OS\u7684\u5b57\u8282\u6570 HeapObjects \u5df2\u5206\u914d\u5bf9\u8c61\u7684\u603b\u6570 StackInuse \u6808\u5206\u914d\u5668\u4f7f\u7528\u7684\u5b57\u8282\uff08\u6b63\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff09 StackSys \u6808\u5206\u914d\u5668\u4f7f\u7528\u7684\u5b57\u8282\uff08\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff09 MSpanInuse mspan\uff08\u5185\u5b58\u533a\u95f4\uff09\u7ed3\u6784\u6570\uff08\u6b63\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff09 MSpanSys mspan\uff08\u5185\u5b58\u533a\u95f4\uff09\u7ed3\u6784\u6570\uff08\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff09 MCacheInuse mcache\uff08\u5185\u5b58\u7f13\u5b58\uff09\u7ed3\u6784\u6570\uff08\u6b63\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff09 MCacheSys mcache\uff08\u5185\u5b58\u7f13\u5b58\uff09\u7ed3\u6784\u6570\uff08\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff09 BuckHashSys \u5206\u6790\u6876\u6563\u5217\u8868 GCSys GC \u5143\u6570\u636e OtherSys \u5176\u5b83\u7cfb\u7edf\u5206\u914d NextGC \u5f53HeapAlloc\u5927\u4e8e\u7b49\u4e8e\u914d\u7f6e\u503c\u65f6\uff0c\u4e0b\u6b21GC\u6536\u96c6\u5c06\u4f1a\u8fdb\u884c LastGC \u4e0a\u6b21GC\u6536\u96c6\u7ed3\u675f\u65f6\u95f4 PauseTotalNs GC\u6682\u505c\u7684\u603b\u65f6\u95f4 PauseNs \u6700\u8fd1GC\u6682\u505c\u65f6\u95f4\u7684\u5faa\u73af\u7f13\u5b58\uff0c\u6700\u8fd1\u4e00\u6b21\u5e94\u4e3a [(NumGC+255)%256] PauseEnd \u6700\u8fd1GC\u6682\u505c\u65f6\u95f4\u7684\u5faa\u73af\u7f13\u5b58\uff0c\u6700\u8fd1\u4e00\u6b21\u7684\u7ed3\u675f\u65f6\u95f4 NumGC GC\u7684\u6570\u91cf EnableGC \u662f\u5426\u5f00\u542fGC DebugGC \u662f\u5426\u5f00\u542fGC\u8c03\u8bd5\u65e5\u5fd7 BySize \u6bcf\u4e2a\u5206\u914d\u7684\u5927\u5c0f\u7edf\u8ba1\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/proxy_mem_stat/#_1","text":"proxy_mem_stat \u662fBFE\u7684\u5185\u5b58\u7684\u72b6\u6001\u4fe1\u606f","title":"\u7b80\u4ecb"},{"location":"monitor/proxy_mem_stat/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 Alloc \u5df2\u5206\u914d\u4e14\u4ecd\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570 TotalAlloc \u5df2\u5206\u914d\uff08\u5305\u62ec\u5df2\u91ca\u653e\u7684\uff09\u5b57\u8282\u6570 Sys \u4ece\u7cfb\u7edf\u4e2d\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff08\u5e94\u5f53\u4e3a\u4e0b\u9762 XxxSys \u4e4b\u548c\uff09 Lookups \u6307\u9488\u67e5\u627e\u6570 Mallocs malloc \u6570 Frees free \u6570 HeapAlloc \u5df2\u5206\u914d\u4e14\u4ecd\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570 HeapSys \u4ece\u7cfb\u7edf\u4e2d\u83b7\u53d6\u7684\u5b57\u8282\u6570 HeapIdle \u7a7a\u95f2\u533a\u95f4\u7684\u5b57\u8282\u6570 HeapInuse \u975e\u7a7a\u95f2\u533a\u95f4\u7684\u5b57\u8282\u6570 HeapReleased \u91ca\u653e\u7ed9OS\u7684\u5b57\u8282\u6570 HeapObjects \u5df2\u5206\u914d\u5bf9\u8c61\u7684\u603b\u6570 StackInuse \u6808\u5206\u914d\u5668\u4f7f\u7528\u7684\u5b57\u8282\uff08\u6b63\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff09 StackSys \u6808\u5206\u914d\u5668\u4f7f\u7528\u7684\u5b57\u8282\uff08\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff09 MSpanInuse mspan\uff08\u5185\u5b58\u533a\u95f4\uff09\u7ed3\u6784\u6570\uff08\u6b63\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff09 MSpanSys mspan\uff08\u5185\u5b58\u533a\u95f4\uff09\u7ed3\u6784\u6570\uff08\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff09 MCacheInuse mcache\uff08\u5185\u5b58\u7f13\u5b58\uff09\u7ed3\u6784\u6570\uff08\u6b63\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff09 MCacheSys mcache\uff08\u5185\u5b58\u7f13\u5b58\uff09\u7ed3\u6784\u6570\uff08\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570\uff09 BuckHashSys \u5206\u6790\u6876\u6563\u5217\u8868 GCSys GC \u5143\u6570\u636e OtherSys \u5176\u5b83\u7cfb\u7edf\u5206\u914d NextGC \u5f53HeapAlloc\u5927\u4e8e\u7b49\u4e8e\u914d\u7f6e\u503c\u65f6\uff0c\u4e0b\u6b21GC\u6536\u96c6\u5c06\u4f1a\u8fdb\u884c LastGC \u4e0a\u6b21GC\u6536\u96c6\u7ed3\u675f\u65f6\u95f4 PauseTotalNs GC\u6682\u505c\u7684\u603b\u65f6\u95f4 PauseNs \u6700\u8fd1GC\u6682\u505c\u65f6\u95f4\u7684\u5faa\u73af\u7f13\u5b58\uff0c\u6700\u8fd1\u4e00\u6b21\u5e94\u4e3a [(NumGC+255)%256] PauseEnd \u6700\u8fd1GC\u6682\u505c\u65f6\u95f4\u7684\u5faa\u73af\u7f13\u5b58\uff0c\u6700\u8fd1\u4e00\u6b21\u7684\u7ed3\u675f\u65f6\u95f4 NumGC GC\u7684\u6570\u91cf EnableGC \u662f\u5426\u5f00\u542fGC DebugGC \u662f\u5426\u5f00\u542fGC\u8c03\u8bd5\u65e5\u5fd7 BySize \u6bcf\u4e2a\u5206\u914d\u7684\u5927\u5c0f\u7edf\u8ba1\u3002","title":"\u76d1\u63a7\u9879"},{"location":"monitor/proxy_state/","text":"\u8f6c\u53d1\u72b6\u6001 \u7b80\u4ecb proxy_state \u662fBFE\u670d\u52a1\u7684\u6838\u5fc3\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u57fa\u672c\u60c5\u51b5 \u76d1\u63a7\u9879 \u63cf\u8ff0 CLIENT_CONN_ACTIVE \u6d3b\u8dc3\u8fde\u63a5\u6570 CLIENT_CONN_SERVED \u5904\u7406\u8fde\u63a5\u6570 CLIENT_CONN_UNFINISHED_REQ \u5b58\u5728\u672a\u5b8c\u6210\u7684\u8bf7\u6c42\u7684\u8fde\u63a5\u6570 CLIENT_CONN_USE100_CONTINUE \u4f7f\u7528100-continue\u7684\u8fde\u63a5\u6570 CLIENT_REQ_ACTIVE \u6d3b\u8dc3\u8bf7\u6c42\u6570 CLIENT_REQ_SERVED \u5904\u7406\u8bf7\u6c42\u6570 CLIENT_REQ_FAIL \u5931\u8d25\u8bf7\u6c42\u6570 CLIENT_REQ_FAIL_WITH_NO_RETRY \u65e0\u91cd\u8bd5\u7684\u5931\u8d25\u8bf7\u6c42\u6570 CLIENT_REQ_WITH_CROSS_RETRY \u8de8\u96c6\u7fa4\u91cd\u8bd5\u7684\u8bf7\u6c42\u6570 CLIENT_REQ_WITH_RETRY \u91cd\u8bd5\u7684\u8bf7\u6c42\u6570 \u5ba2\u6237\u7aef\u76f8\u5173\u9519\u8bef \u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_BK_CONNECT_BACKEND \u8fde\u63a5\u540e\u7aef\u9519\u8bef\u7684\u6570\u91cf ERR_BK_FIND_PRODUCT \u67e5\u627e\u4ea7\u54c1\u7ebf\u5931\u8d25\u7684\u6570\u91cf ERR_BK_FIND_LOCATION \u67e5\u627e\u76ee\u7684\u96c6\u7fa4\u5931\u8d25\u7684\u6570\u91cf ERR_BK_NO_BALANCE \u65e0\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7684\u6570\u91cf ERR_BK_NO_CLUSTER \u65e0\u96c6\u7fa4\u914d\u7f6e\u7684\u6570\u91cf ERR_BK_READ_RESP_HEADER \u4ece\u540e\u7aef\u8bfb\u54cd\u5e94\u5934\u9519\u8bef\u7684\u6570\u91cf ERR_BK_REQUEST_BACKEND \u8f6c\u53d1\u8bf7\u6c42\u5230\u540e\u7aef\u9519\u8bef\u7684\u6570\u91cf ERR_BK_RESP_HEADER_TIMEOUT \u4ece\u540e\u7aef\u83b7\u53d6\u54cd\u5e94\u5934\u8d85\u65f6\u7684\u6570\u91cf ERR_BK_TRANSPORT_BROKEN \u540e\u7aef\u8fde\u63a5\u51fa\u9519\u6570\u91cf ERR_BK_WRITE_REQUEST \u5199\u8bf7\u6c42\u5230\u540e\u7aef\u7684\u9519\u8bef\u6570 \u540e\u7aef\u76f8\u5173\u9519\u8bef \u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_CLIENT_BAD_REQUEST \u5ba2\u6237\u7aef\u8bf7\u6c42\u683c\u5f0f\u9519\u8bef\u6570 ERR_CLIENT_CLOSE \u5ba2\u6237\u7aef\u5173\u95ed\u8fde\u63a5\u7684\u6570\u91cf ERR_CLIENT_CONN_ACCEPT \u63a5\u53d7\u5ba2\u6237\u7aef\u8fde\u63a5\u5931\u8d25\u7684\u6570\u91cf ERR_CLIENT_EXPECT_FAIL \u5ba2\u6237\u7aef\u8bf7\u6c42\u643a\u5e26\u5f02\u5e38Except\u5934\u90e8\u7684\u6570\u91cf ERR_CLIENT_LONG_HEADER \u8bf7\u6c42\u5934\u957f\u5ea6\u8d85\u9650\u7684\u8bf7\u6c42\u6570 ERR_CLIENT_LONG_URL \u8bf7\u6c42URL\u957f\u5ea6\u8d85\u9650\u7684\u8bf7\u6c42\u6570 ERR_CLIENT_RESET \u5ba2\u6237\u7aefReset\u8fde\u63a5\u9519\u8bef\u7684\u6570\u91cf ERR_CLIENT_TIMEOUT \u8bfb\u5ba2\u6237\u7aef\u8d85\u65f6\u7684\u6570\u91cf ERR_CLIENT_WRITE \u5411\u5ba2\u6237\u7aef\u5199\u54cd\u5e94\u9519\u8bef\u7684\u6570\u91cf ERR_CLIENT_ZERO_CONTENTLEN \u4ece\u5ba2\u6237\u7aef\u8bfb\u53d6\u8bf7\u6c42\u5305\u542b\u9519\u8bef\u7684\u96f6Content-Length\u7684\u6570\u91cf Panic\u76f8\u5173\u5f02\u5e38 \u76d1\u63a7\u9879 \u63cf\u8ff0 PANIC_BACKEND_READ \u8bfb\u540e\u7aef\u534f\u7a0bpanic\u7684\u6570\u91cf PANIC_BACKEND_WRITE \u5199\u540e\u7aef\u534f\u7a0bpanic\u7684\u6570\u91cf PANIC_CLIENT_CONN_SERVE \u5ba2\u6237\u7aef\u8fde\u63a5\u534f\u7a0bpanic\u7684\u6570\u91cf \u6d41\u91cf\u76f8\u5173 \u76d1\u63a7\u9879 \u63cf\u8ff0 HTTP2_CLIENT_CONN_ACTIVE HTTP2\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 HTTP2_CLIENT_CONN_SERVED HTTP2\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 HTTP2_CLIENT_REQ_ACTIVE HTTP2\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 HTTP2_CLIENT_REQ_SERVED HTTP2\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 HTTPS_CLIENT_CONN_ACTIVE HTTPS\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 HTTPS_CLIENT_CONN_SERVED HTTPS\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 HTTPS_CLIENT_REQ_ACTIVE HTTPS\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 HTTPS_CLIENT_REQ_SERVED HTTPS\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 HTTP_CLIENT_CONN_ACTIVE HTTP\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 HTTP_CLIENT_CONN_SERVED HTTP\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 HTTP_CLIENT_REQ_ACTIVE HTTP\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 HTTP_CLIENT_REQ_SERVED HTTP\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 SPDY_CLIENT_CONN_ACTIVE SPDY\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 SPDY_CLIENT_CONN_SERVED SPDY\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 SPDY_CLIENT_REQ_ACTIVE SPDY\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 SPDY_CLIENT_REQ_SERVED SPDY\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 STREAM_CLIENT_CONN_ACTIVE STREAM\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 STREAM_CLIENT_CONN_SERVED STREAM\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 WSS_CLIENT_CONN_ACTIVE WSS\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 WSS_CLIENT_CONN_SERVED WSS\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 WS_CLIENT_CONN_ACTIVE WS\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 WS_CLIENT_CONN_SERVED WS\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 TLS\u534f\u8bae\u76f8\u5173 \u76d1\u63a7\u9879 \u63cf\u8ff0 SESSION_CACHE_CONN \u4e0esession cache\u5efa\u7acb\u8fde\u63a5\u7684\u6570\u91cf SESSION_CACHE_CONN_FAIL \u4e0esession cache\u5efa\u7acb\u8fde\u63a5\u5931\u8d25\u7684\u6570\u91cf SESSION_CACHE_GET \u67e5\u8be2session cache\u7684\u6570\u91cf SESSION_CACHE_GET_FAIL \u67e5\u8be2session cache\u5931\u8d25\u7684\u6570\u91cf SESSION_CACHE_HIT \u67e5\u8be2session cache\u547d\u4e2d\u7684\u6570\u91cf SESSION_CACHE_MISS \u67e5\u8be2session cache\u672a\u547d\u4e2d\u7684\u6570\u91cf SESSION_CACHE_SET \u5199\u5165session cache\u7684\u6570\u91cf SESSION_CACHE_SET_FAIL \u5199\u5165session cache\u5931\u8d25\u7684\u6570\u91cf SESSION_CACHE_TYPE_NOT_BYTES \u67e5\u8be2session cache\u503c\u7c7b\u578b\u5f02\u5e38\u7684\u6570\u91cf TLS_HANDSHAKE_ALL TLS\u63e1\u624b\u603b\u6570\u91cf TLS_HANDSHAKE_SUCC TLS\u63e1\u624b\u6210\u529f\u6570\u91cf TLS_MULTI_CERT_CONN_VIP_UNKNOWN \u8fde\u63a5\u643a\u5e26\u672a\u77e5VIP\u7684\u6570\u91cf TLS_MULTI_CERT_CONN_WITHOUT_SNI \u8fde\u63a5\u672a\u643a\u5e26SNI\u7684\u6570\u91cf TLS_MULTI_CERT_CONN_WITHOUT_VIP \u8fde\u63a5\u672a\u643a\u5e26VIP\u7684\u6570\u91cf TLS_MULTI_CERT_USE_DEFAULT \u8fde\u63a5\u4f7f\u7528\u9ed8\u8ba4TLS\u8bc1\u4e66\u7684\u6570\u91cf TLS_MULTI_CERT_GET \u67e5\u8be2TLS\u8bc1\u4e66\u7684\u6570\u91cf TLS_MULTI_CERT_UPDATE \u66f4\u65b0TLS\u8bc1\u4e66\u64cd\u4f5c\u7684\u6570\u91cf TLS_MULTI_CERT_UPDATE_ERR \u66f4\u65b0TLS\u8bc1\u4e66\u9519\u8bef\u7684\u6570\u91cf","title":"\u8f6c\u53d1\u72b6\u6001"},{"location":"monitor/proxy_state/#_1","text":"","title":"\u8f6c\u53d1\u72b6\u6001"},{"location":"monitor/proxy_state/#_2","text":"proxy_state \u662fBFE\u670d\u52a1\u7684\u6838\u5fc3\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/proxy_state/#_3","text":"","title":"\u76d1\u63a7\u9879"},{"location":"monitor/proxy_state/#_4","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 CLIENT_CONN_ACTIVE \u6d3b\u8dc3\u8fde\u63a5\u6570 CLIENT_CONN_SERVED \u5904\u7406\u8fde\u63a5\u6570 CLIENT_CONN_UNFINISHED_REQ \u5b58\u5728\u672a\u5b8c\u6210\u7684\u8bf7\u6c42\u7684\u8fde\u63a5\u6570 CLIENT_CONN_USE100_CONTINUE \u4f7f\u7528100-continue\u7684\u8fde\u63a5\u6570 CLIENT_REQ_ACTIVE \u6d3b\u8dc3\u8bf7\u6c42\u6570 CLIENT_REQ_SERVED \u5904\u7406\u8bf7\u6c42\u6570 CLIENT_REQ_FAIL \u5931\u8d25\u8bf7\u6c42\u6570 CLIENT_REQ_FAIL_WITH_NO_RETRY \u65e0\u91cd\u8bd5\u7684\u5931\u8d25\u8bf7\u6c42\u6570 CLIENT_REQ_WITH_CROSS_RETRY \u8de8\u96c6\u7fa4\u91cd\u8bd5\u7684\u8bf7\u6c42\u6570 CLIENT_REQ_WITH_RETRY \u91cd\u8bd5\u7684\u8bf7\u6c42\u6570","title":"\u57fa\u672c\u60c5\u51b5"},{"location":"monitor/proxy_state/#_5","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_BK_CONNECT_BACKEND \u8fde\u63a5\u540e\u7aef\u9519\u8bef\u7684\u6570\u91cf ERR_BK_FIND_PRODUCT \u67e5\u627e\u4ea7\u54c1\u7ebf\u5931\u8d25\u7684\u6570\u91cf ERR_BK_FIND_LOCATION \u67e5\u627e\u76ee\u7684\u96c6\u7fa4\u5931\u8d25\u7684\u6570\u91cf ERR_BK_NO_BALANCE \u65e0\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7684\u6570\u91cf ERR_BK_NO_CLUSTER \u65e0\u96c6\u7fa4\u914d\u7f6e\u7684\u6570\u91cf ERR_BK_READ_RESP_HEADER \u4ece\u540e\u7aef\u8bfb\u54cd\u5e94\u5934\u9519\u8bef\u7684\u6570\u91cf ERR_BK_REQUEST_BACKEND \u8f6c\u53d1\u8bf7\u6c42\u5230\u540e\u7aef\u9519\u8bef\u7684\u6570\u91cf ERR_BK_RESP_HEADER_TIMEOUT \u4ece\u540e\u7aef\u83b7\u53d6\u54cd\u5e94\u5934\u8d85\u65f6\u7684\u6570\u91cf ERR_BK_TRANSPORT_BROKEN \u540e\u7aef\u8fde\u63a5\u51fa\u9519\u6570\u91cf ERR_BK_WRITE_REQUEST \u5199\u8bf7\u6c42\u5230\u540e\u7aef\u7684\u9519\u8bef\u6570","title":"\u5ba2\u6237\u7aef\u76f8\u5173\u9519\u8bef"},{"location":"monitor/proxy_state/#_6","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 ERR_CLIENT_BAD_REQUEST \u5ba2\u6237\u7aef\u8bf7\u6c42\u683c\u5f0f\u9519\u8bef\u6570 ERR_CLIENT_CLOSE \u5ba2\u6237\u7aef\u5173\u95ed\u8fde\u63a5\u7684\u6570\u91cf ERR_CLIENT_CONN_ACCEPT \u63a5\u53d7\u5ba2\u6237\u7aef\u8fde\u63a5\u5931\u8d25\u7684\u6570\u91cf ERR_CLIENT_EXPECT_FAIL \u5ba2\u6237\u7aef\u8bf7\u6c42\u643a\u5e26\u5f02\u5e38Except\u5934\u90e8\u7684\u6570\u91cf ERR_CLIENT_LONG_HEADER \u8bf7\u6c42\u5934\u957f\u5ea6\u8d85\u9650\u7684\u8bf7\u6c42\u6570 ERR_CLIENT_LONG_URL \u8bf7\u6c42URL\u957f\u5ea6\u8d85\u9650\u7684\u8bf7\u6c42\u6570 ERR_CLIENT_RESET \u5ba2\u6237\u7aefReset\u8fde\u63a5\u9519\u8bef\u7684\u6570\u91cf ERR_CLIENT_TIMEOUT \u8bfb\u5ba2\u6237\u7aef\u8d85\u65f6\u7684\u6570\u91cf ERR_CLIENT_WRITE \u5411\u5ba2\u6237\u7aef\u5199\u54cd\u5e94\u9519\u8bef\u7684\u6570\u91cf ERR_CLIENT_ZERO_CONTENTLEN \u4ece\u5ba2\u6237\u7aef\u8bfb\u53d6\u8bf7\u6c42\u5305\u542b\u9519\u8bef\u7684\u96f6Content-Length\u7684\u6570\u91cf","title":"\u540e\u7aef\u76f8\u5173\u9519\u8bef"},{"location":"monitor/proxy_state/#panic","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 PANIC_BACKEND_READ \u8bfb\u540e\u7aef\u534f\u7a0bpanic\u7684\u6570\u91cf PANIC_BACKEND_WRITE \u5199\u540e\u7aef\u534f\u7a0bpanic\u7684\u6570\u91cf PANIC_CLIENT_CONN_SERVE \u5ba2\u6237\u7aef\u8fde\u63a5\u534f\u7a0bpanic\u7684\u6570\u91cf","title":"Panic\u76f8\u5173\u5f02\u5e38"},{"location":"monitor/proxy_state/#_7","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 HTTP2_CLIENT_CONN_ACTIVE HTTP2\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 HTTP2_CLIENT_CONN_SERVED HTTP2\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 HTTP2_CLIENT_REQ_ACTIVE HTTP2\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 HTTP2_CLIENT_REQ_SERVED HTTP2\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 HTTPS_CLIENT_CONN_ACTIVE HTTPS\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 HTTPS_CLIENT_CONN_SERVED HTTPS\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 HTTPS_CLIENT_REQ_ACTIVE HTTPS\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 HTTPS_CLIENT_REQ_SERVED HTTPS\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 HTTP_CLIENT_CONN_ACTIVE HTTP\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 HTTP_CLIENT_CONN_SERVED HTTP\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 HTTP_CLIENT_REQ_ACTIVE HTTP\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 HTTP_CLIENT_REQ_SERVED HTTP\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 SPDY_CLIENT_CONN_ACTIVE SPDY\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 SPDY_CLIENT_CONN_SERVED SPDY\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 SPDY_CLIENT_REQ_ACTIVE SPDY\u534f\u8bae\u6d3b\u8dc3\u8bf7\u6c42\u6570 SPDY_CLIENT_REQ_SERVED SPDY\u534f\u8bae\u5904\u7406\u8bf7\u6c42\u6570 STREAM_CLIENT_CONN_ACTIVE STREAM\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 STREAM_CLIENT_CONN_SERVED STREAM\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 WSS_CLIENT_CONN_ACTIVE WSS\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 WSS_CLIENT_CONN_SERVED WSS\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570 WS_CLIENT_CONN_ACTIVE WS\u534f\u8bae\u6d3b\u8dc3\u8fde\u63a5\u6570 WS_CLIENT_CONN_SERVED WS\u534f\u8bae\u5904\u7406\u8fde\u63a5\u6570","title":"\u6d41\u91cf\u76f8\u5173"},{"location":"monitor/proxy_state/#tls","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 SESSION_CACHE_CONN \u4e0esession cache\u5efa\u7acb\u8fde\u63a5\u7684\u6570\u91cf SESSION_CACHE_CONN_FAIL \u4e0esession cache\u5efa\u7acb\u8fde\u63a5\u5931\u8d25\u7684\u6570\u91cf SESSION_CACHE_GET \u67e5\u8be2session cache\u7684\u6570\u91cf SESSION_CACHE_GET_FAIL \u67e5\u8be2session cache\u5931\u8d25\u7684\u6570\u91cf SESSION_CACHE_HIT \u67e5\u8be2session cache\u547d\u4e2d\u7684\u6570\u91cf SESSION_CACHE_MISS \u67e5\u8be2session cache\u672a\u547d\u4e2d\u7684\u6570\u91cf SESSION_CACHE_SET \u5199\u5165session cache\u7684\u6570\u91cf SESSION_CACHE_SET_FAIL \u5199\u5165session cache\u5931\u8d25\u7684\u6570\u91cf SESSION_CACHE_TYPE_NOT_BYTES \u67e5\u8be2session cache\u503c\u7c7b\u578b\u5f02\u5e38\u7684\u6570\u91cf TLS_HANDSHAKE_ALL TLS\u63e1\u624b\u603b\u6570\u91cf TLS_HANDSHAKE_SUCC TLS\u63e1\u624b\u6210\u529f\u6570\u91cf TLS_MULTI_CERT_CONN_VIP_UNKNOWN \u8fde\u63a5\u643a\u5e26\u672a\u77e5VIP\u7684\u6570\u91cf TLS_MULTI_CERT_CONN_WITHOUT_SNI \u8fde\u63a5\u672a\u643a\u5e26SNI\u7684\u6570\u91cf TLS_MULTI_CERT_CONN_WITHOUT_VIP \u8fde\u63a5\u672a\u643a\u5e26VIP\u7684\u6570\u91cf TLS_MULTI_CERT_USE_DEFAULT \u8fde\u63a5\u4f7f\u7528\u9ed8\u8ba4TLS\u8bc1\u4e66\u7684\u6570\u91cf TLS_MULTI_CERT_GET \u67e5\u8be2TLS\u8bc1\u4e66\u7684\u6570\u91cf TLS_MULTI_CERT_UPDATE \u66f4\u65b0TLS\u8bc1\u4e66\u64cd\u4f5c\u7684\u6570\u91cf TLS_MULTI_CERT_UPDATE_ERR \u66f4\u65b0TLS\u8bc1\u4e66\u9519\u8bef\u7684\u6570\u91cf","title":"TLS\u534f\u8bae\u76f8\u5173"},{"location":"monitor/spdy_state/","text":"SPDY \u7b80\u4ecb spdy_state \u662fSPDY\u7684\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 SPDY_CONN_OVERLOAD \u8fde\u63a5\u6570\u8d85\u8fc7\u8d1f\u8f7d\u7684\u6570\u91cf SPDY_ERR_BAD_REQUEST \u9519\u8bef\u8bf7\u6c42\u6570 SPDY_ERR_FLOW_CONTROL \u6d41\u91cf\u63a7\u5236\u7684\u6570\u91cf SPDY_ERR_GOT_RESET \u6536\u5230RST_STREAM\u7684\u6570\u91cf SPDY_ERR_INVALID_DATA_STREAM \u975e\u6cd5\u6570\u636e\u6d41\u7684\u4e2a\u6570 SPDY_ERR_INVALID_SYN_STREAM \u975e\u6cd5SYN stream\u7684\u4e2a\u6570 SPDY_ERR_MAX_STREAM_PER_CONN \u8fbe\u5230\u8fde\u63a5\u5efa\u8bae\u7684\u6700\u5927stream\u6570\u7684\u6570\u91cf SPDY_ERR_NEW_FRAMER \u65b0\u5efaframe\u9519\u8bef\u7684\u6570\u91cf SPDY_ERR_STREAM_ALREADY_CLOSED stream\u65e9\u5df2\u5173\u95ed\u7684\u6570\u91cf SPDY_ERR_STREAM_CANCEL \u4e3b\u52a8\u5173\u95edstream\u7684\u6570\u91cf SPDY_PANIC_CONN \u8fde\u63a5\u51fa\u73b0panic\u7684\u6570\u91cf SPDY_PANIC_STREAM stream\u51fa\u73b0panic\u7684\u6570\u91cf SPDY_REQ_HEADER_COMPRESS_SIZE \u538b\u7f29\u524d\uff0c\u8bf7\u6c42\u5934\u7684\u5927\u5c0f SPDY_REQ_HEADER_ORIGINAL_SIZE \u538b\u7f29\u540e\uff0c\u8bf7\u6c42\u5934\u7684\u5927\u5c0f SPDY_REQ_OVERLOAD \u8bf7\u6c42\u6570\u8d85\u8fc7\u8d1f\u8f7d\u7684\u6570\u91cf SPDY_RES_HEADER_COMPRESS_SIZE \u538b\u7f29\u524d\uff0c\u54cd\u5e94\u5934\u7684\u5927\u5c0f SPDY_RES_HEADER_ORIGINAL_SIZE \u538b\u7f29\u540e\uff0c\u54cd\u5e94\u5934\u7684\u5927\u5c0f SPDY_TIMEOUT_CONN SPDY\u8fde\u63a5\u51fa\u73b0\u8d85\u65f6\u7684\u6570\u91cf SPDY_TIMEOUT_READ_STREAM \u8bfbstream\u8d85\u65f6 SPDY_TIMEOUT_WRITE_STREAM \u5199stream\u8d85\u65f6 SPDY_UNKNOWN_FRAME \u672a\u77e5frame\u7684\u4e2a\u6570","title":"SPDY"},{"location":"monitor/spdy_state/#spdy","text":"","title":"SPDY"},{"location":"monitor/spdy_state/#_1","text":"spdy_state \u662fSPDY\u7684\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/spdy_state/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 SPDY_CONN_OVERLOAD \u8fde\u63a5\u6570\u8d85\u8fc7\u8d1f\u8f7d\u7684\u6570\u91cf SPDY_ERR_BAD_REQUEST \u9519\u8bef\u8bf7\u6c42\u6570 SPDY_ERR_FLOW_CONTROL \u6d41\u91cf\u63a7\u5236\u7684\u6570\u91cf SPDY_ERR_GOT_RESET \u6536\u5230RST_STREAM\u7684\u6570\u91cf SPDY_ERR_INVALID_DATA_STREAM \u975e\u6cd5\u6570\u636e\u6d41\u7684\u4e2a\u6570 SPDY_ERR_INVALID_SYN_STREAM \u975e\u6cd5SYN stream\u7684\u4e2a\u6570 SPDY_ERR_MAX_STREAM_PER_CONN \u8fbe\u5230\u8fde\u63a5\u5efa\u8bae\u7684\u6700\u5927stream\u6570\u7684\u6570\u91cf SPDY_ERR_NEW_FRAMER \u65b0\u5efaframe\u9519\u8bef\u7684\u6570\u91cf SPDY_ERR_STREAM_ALREADY_CLOSED stream\u65e9\u5df2\u5173\u95ed\u7684\u6570\u91cf SPDY_ERR_STREAM_CANCEL \u4e3b\u52a8\u5173\u95edstream\u7684\u6570\u91cf SPDY_PANIC_CONN \u8fde\u63a5\u51fa\u73b0panic\u7684\u6570\u91cf SPDY_PANIC_STREAM stream\u51fa\u73b0panic\u7684\u6570\u91cf SPDY_REQ_HEADER_COMPRESS_SIZE \u538b\u7f29\u524d\uff0c\u8bf7\u6c42\u5934\u7684\u5927\u5c0f SPDY_REQ_HEADER_ORIGINAL_SIZE \u538b\u7f29\u540e\uff0c\u8bf7\u6c42\u5934\u7684\u5927\u5c0f SPDY_REQ_OVERLOAD \u8bf7\u6c42\u6570\u8d85\u8fc7\u8d1f\u8f7d\u7684\u6570\u91cf SPDY_RES_HEADER_COMPRESS_SIZE \u538b\u7f29\u524d\uff0c\u54cd\u5e94\u5934\u7684\u5927\u5c0f SPDY_RES_HEADER_ORIGINAL_SIZE \u538b\u7f29\u540e\uff0c\u54cd\u5e94\u5934\u7684\u5927\u5c0f SPDY_TIMEOUT_CONN SPDY\u8fde\u63a5\u51fa\u73b0\u8d85\u65f6\u7684\u6570\u91cf SPDY_TIMEOUT_READ_STREAM \u8bfbstream\u8d85\u65f6 SPDY_TIMEOUT_WRITE_STREAM \u5199stream\u8d85\u65f6 SPDY_UNKNOWN_FRAME \u672a\u77e5frame\u7684\u4e2a\u6570","title":"\u76d1\u63a7\u9879"},{"location":"monitor/stream_state/","text":"Stream \u7b80\u4ecb stream_state \u662fTLS-TCP\u53cd\u5411\u4ee3\u7406\u7684\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 STREAM_BYTES_RECV \u6536\u5230\u6570\u636e\u7684\u603b\u5b57\u8282\u6570 STREAM_BYTES_SENT \u53d1\u9001\u6570\u636e\u7684\u603b\u5b57\u8282\u6570 STREAM_ERR_BALANCE \u65e0\u53ef\u7528\u540e\u7aef\u9519\u8bef\u6570 STREAM_ERR_CONNECT \u8fde\u63a5\u540e\u7aef\u5931\u8d25\u6570 STREAM_ERR_PROXY \u7531\u4e8e\u540e\u7aef\u96c6\u7fa4\u5f02\u5e38\u62d2\u7edd\u7528\u6237\u8fde\u63a5\u6570 STREAM_ERR_TRANSFER \u6570\u636e\u4f20\u8f93\u7684\u9519\u8bef\u6570 STREAM_PANIC_CONN \u8fde\u63a5panic\u7684\u5f02\u5e38\u6570","title":"Stream"},{"location":"monitor/stream_state/#stream","text":"","title":"Stream"},{"location":"monitor/stream_state/#_1","text":"stream_state \u662fTLS-TCP\u53cd\u5411\u4ee3\u7406\u7684\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/stream_state/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 STREAM_BYTES_RECV \u6536\u5230\u6570\u636e\u7684\u603b\u5b57\u8282\u6570 STREAM_BYTES_SENT \u53d1\u9001\u6570\u636e\u7684\u603b\u5b57\u8282\u6570 STREAM_ERR_BALANCE \u65e0\u53ef\u7528\u540e\u7aef\u9519\u8bef\u6570 STREAM_ERR_CONNECT \u8fde\u63a5\u540e\u7aef\u5931\u8d25\u6570 STREAM_ERR_PROXY \u7531\u4e8e\u540e\u7aef\u96c6\u7fa4\u5f02\u5e38\u62d2\u7edd\u7528\u6237\u8fde\u63a5\u6570 STREAM_ERR_TRANSFER \u6570\u636e\u4f20\u8f93\u7684\u9519\u8bef\u6570 STREAM_PANIC_CONN \u8fde\u63a5panic\u7684\u5f02\u5e38\u6570","title":"\u76d1\u63a7\u9879"},{"location":"monitor/tls_state/","text":"TLS \u7b80\u4ecb tls_state \u662fTLS\u7684\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 TLS_HANDSHAKE_ACCEPT_ECDHE_WITHOUT_EXT \u5904\u7406\u65e0\u6269\u5c55\u5185\u5bb9\u7684ECDHE\u7684\u6570\u91cf TLS_HANDSHAKE_ACCEPT_SSLV2_CLIENT_HELLO \u6536\u5230SSLv2 client-hello\u7684\u6570\u91cf TLS_HANDSHAKE_CHECK_RESUME_SESSION_CACHE \u68c0\u67e5session cache\uff0c\u5224\u5b9a\u662f\u5426\u53ef\u4ee5\u8fdb\u884c\u8fde\u63a5\u590d\u7528\u7684\u6570\u91cf TLS_HANDSHAKE_CHECK_RESUME_SESSION_TICKET \u68c0\u67e5session ticket\uff0c\u5224\u5b9a\u662f\u5426\u53ef\u4ee5\u8fdb\u884c\u8fde\u63a5\u590d\u7528\u7684\u6570\u91cf TLS_HANDSHAKE_FULL_ALL \u5b8c\u5168\u63e1\u624b\u7684\u6570\u91cf TLS_HANDSHAKE_FULL_SUCC \u6210\u529f\u5b8c\u6210\u5b8c\u5168\u63e1\u624b\u7684\u6570\u91cf TLS_HANDSHAKE_NO_SHARED_CIPHER_SUITE \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u5747\u65e0\u52a0\u5bc6\u5957\u4ef6\u7684\u6570\u91cf TLS_HANDSHAKE_OCSP_TIME_ERR ocsp time\u9519\u8bef\u7684\u6570\u91cf TLS_HANDSHAKE_READ_CLIENT_HELLO_ERR \u8bfbclient-hello\u9519\u8bef\u7684\u6570\u91cf TLS_HANDSHAKE_RESUME_ALL \u590d\u7528\u8fde\u63a5\u7684\u6570\u91cf TLS_HANDSHAKE_RESUME_SUCC \u590d\u7528\u8fde\u63a5\u6210\u529f\u7684\u6570\u91cf TLS_HANDSHAKE_SHOULD_RESUME_SESSION_CACHE \u901a\u8fc7session cache\u590d\u7528\u8fde\u63a5\u7684\u6570\u91cf TLS_HANDSHAKE_SHOULD_RESUME_SESSION_TICKET \u901a\u8fc7session ticket\u590d\u7528\u8fde\u63a5\u7684\u6570\u91cf TLS_HANDSHAKE_SSLV2_NOT_SUPPORT \u6536\u5230\u4e86\u4e0d\u652f\u6301\u7684SSLv2\u7684\u63e1\u624b\u8bf7\u6c42\u6570 TLS_HANDSHAKE_ZERO_DATA \u63e1\u624b\u8bf7\u6c42\u5185\u5bb9\u4e3a\u7a7a\u7684\u6570\u91cf TLS_STATUS_REQUEST_EXT_COUNT \u4f7f\u7528ocsp\u7684\u6570\u91cf","title":"SSL/TLS"},{"location":"monitor/tls_state/#tls","text":"","title":"TLS"},{"location":"monitor/tls_state/#_1","text":"tls_state \u662fTLS\u7684\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/tls_state/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 TLS_HANDSHAKE_ACCEPT_ECDHE_WITHOUT_EXT \u5904\u7406\u65e0\u6269\u5c55\u5185\u5bb9\u7684ECDHE\u7684\u6570\u91cf TLS_HANDSHAKE_ACCEPT_SSLV2_CLIENT_HELLO \u6536\u5230SSLv2 client-hello\u7684\u6570\u91cf TLS_HANDSHAKE_CHECK_RESUME_SESSION_CACHE \u68c0\u67e5session cache\uff0c\u5224\u5b9a\u662f\u5426\u53ef\u4ee5\u8fdb\u884c\u8fde\u63a5\u590d\u7528\u7684\u6570\u91cf TLS_HANDSHAKE_CHECK_RESUME_SESSION_TICKET \u68c0\u67e5session ticket\uff0c\u5224\u5b9a\u662f\u5426\u53ef\u4ee5\u8fdb\u884c\u8fde\u63a5\u590d\u7528\u7684\u6570\u91cf TLS_HANDSHAKE_FULL_ALL \u5b8c\u5168\u63e1\u624b\u7684\u6570\u91cf TLS_HANDSHAKE_FULL_SUCC \u6210\u529f\u5b8c\u6210\u5b8c\u5168\u63e1\u624b\u7684\u6570\u91cf TLS_HANDSHAKE_NO_SHARED_CIPHER_SUITE \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u5747\u65e0\u52a0\u5bc6\u5957\u4ef6\u7684\u6570\u91cf TLS_HANDSHAKE_OCSP_TIME_ERR ocsp time\u9519\u8bef\u7684\u6570\u91cf TLS_HANDSHAKE_READ_CLIENT_HELLO_ERR \u8bfbclient-hello\u9519\u8bef\u7684\u6570\u91cf TLS_HANDSHAKE_RESUME_ALL \u590d\u7528\u8fde\u63a5\u7684\u6570\u91cf TLS_HANDSHAKE_RESUME_SUCC \u590d\u7528\u8fde\u63a5\u6210\u529f\u7684\u6570\u91cf TLS_HANDSHAKE_SHOULD_RESUME_SESSION_CACHE \u901a\u8fc7session cache\u590d\u7528\u8fde\u63a5\u7684\u6570\u91cf TLS_HANDSHAKE_SHOULD_RESUME_SESSION_TICKET \u901a\u8fc7session ticket\u590d\u7528\u8fde\u63a5\u7684\u6570\u91cf TLS_HANDSHAKE_SSLV2_NOT_SUPPORT \u6536\u5230\u4e86\u4e0d\u652f\u6301\u7684SSLv2\u7684\u63e1\u624b\u8bf7\u6c42\u6570 TLS_HANDSHAKE_ZERO_DATA \u63e1\u624b\u8bf7\u6c42\u5185\u5bb9\u4e3a\u7a7a\u7684\u6570\u91cf TLS_STATUS_REQUEST_EXT_COUNT \u4f7f\u7528ocsp\u7684\u6570\u91cf","title":"\u76d1\u63a7\u9879"},{"location":"monitor/websocket_state/","text":"WebSocket \u7b80\u4ecb websocket_state \u662fwebsocket\u7684\u72b6\u6001\u4fe1\u606f\u3002 \u76d1\u63a7\u9879 \u76d1\u63a7\u9879 \u63cf\u8ff0 WEB_SOCKET_BYTES_RECV \u6536\u5230websocket bytes\u7684\u6570\u91cf WEB_SOCKET_BYTES_SENT \u53d1\u9001websocket bytes\u7684\u6570\u91cf WEB_SOCKET_ERR_BACKEND_REJECT \u540e\u7aef\u62d2\u7eddwebsocket\u8bf7\u6c42\u7684\u6570\u91cf WEB_SOCKET_ERR_BALANCE \u8d1f\u8f7d\u5747\u8861\u51fa\u9519\u7684\u6570\u91cf WEB_SOCKET_ERR_CONNECT \u8fde\u63a5\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_ERR_HANDSHAKE \u63e1\u624b\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_ERR_PROXY \u67e5\u627e\u540e\u7aef\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_ERR_TRANSFER \u8f6c\u53d1\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_PANIC_CONN \u8fde\u63a5\u51fa\u73b0panic\u7684\u6570\u91cf","title":"WebSocket"},{"location":"monitor/websocket_state/#websocket","text":"","title":"WebSocket"},{"location":"monitor/websocket_state/#_1","text":"websocket_state \u662fwebsocket\u7684\u72b6\u6001\u4fe1\u606f\u3002","title":"\u7b80\u4ecb"},{"location":"monitor/websocket_state/#_2","text":"\u76d1\u63a7\u9879 \u63cf\u8ff0 WEB_SOCKET_BYTES_RECV \u6536\u5230websocket bytes\u7684\u6570\u91cf WEB_SOCKET_BYTES_SENT \u53d1\u9001websocket bytes\u7684\u6570\u91cf WEB_SOCKET_ERR_BACKEND_REJECT \u540e\u7aef\u62d2\u7eddwebsocket\u8bf7\u6c42\u7684\u6570\u91cf WEB_SOCKET_ERR_BALANCE \u8d1f\u8f7d\u5747\u8861\u51fa\u9519\u7684\u6570\u91cf WEB_SOCKET_ERR_CONNECT \u8fde\u63a5\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_ERR_HANDSHAKE \u63e1\u624b\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_ERR_PROXY \u67e5\u627e\u540e\u7aef\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_ERR_TRANSFER \u8f6c\u53d1\u9519\u8bef\u7684\u6570\u91cf WEB_SOCKET_PANIC_CONN \u8fde\u63a5\u51fa\u73b0panic\u7684\u6570\u91cf","title":"\u76d1\u63a7\u9879"},{"location":"operation/capture_packet/","text":"\u6d41\u91cf\u6293\u5305\u5206\u6790 \u5229\u7528\u6293\u5305\u53ca\u5206\u6790\u5de5\u5177\u5b9a\u4f4d\u5206\u6790\u590d\u6742\u7684\u7f51\u7edc\u95ee\u9898 \u6d41\u91cf\u6293\u53d6 \u4f7f\u7528tcpdump\u6293\u53d6\u793a\u4f8b\uff1a # tcpdump tcp port 8443 -i any -s -w test.pcap \u6d41\u91cf\u5206\u6790 \u660e\u6587\u60c5\u51b5 \u53ef\u4f7f\u7528wireshark\u8f6f\u4ef6\u6253\u5f00\u6293\u5305\u6587\u4ef6\u5206\u6790 \u5bc6\u6587\u60c5\u51b5 \u5bf9\u4e8e\u57fa\u4e8eTLS\u7684\u52a0\u5bc6\u6d41\u91cf\uff0c\u53ef\u914d\u5408\u4f7f\u7528mod_key_log\u548cwireshark\u8fdb\u884c\u89e3\u5bc6\u5206\u6790\u3002\u64cd\u4f5c\u6b65\u9aa4: Step1: \u5728bfe\u5f00\u542fmod_key_log\u6a21\u5757\uff0c\u4fdd\u5b58TLS\u4f1a\u8bdd\u5bc6\u94a5\u5230key.log\u65e5\u5fd7\u6587\u4ef6\u4e2d \u6ce8\uff1a\u4fee\u6539bfe.conf\u6587\u4ef6\uff0c\u589e\u52a0\u542f\u7528mod_key_log\u6a21\u5757, \u6a21\u5757\u914d\u7f6e\u8be6\u89c1 mod_key_log [Server] Modules = mod_key_log Step2: \u5728wireshark\u4e2d\u8bbe\u7f6eMaster-Secret\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\u4e3akey.log \u6ce8\uff1a\u914d\u7f6e\u8def\u5f84Edit\u2192Preferences\u2192Protocols\u2192SSL\u2192(Pre)-Master-Secret log filename Step3: \u4f7f\u7528wireshark\u6253\u5f00\u5e76\u89e3\u5bc6\u6293\u5305\u6570\u636e","title":"\u6d41\u91cf\u6293\u5305\u5206\u6790"},{"location":"operation/capture_packet/#_1","text":"\u5229\u7528\u6293\u5305\u53ca\u5206\u6790\u5de5\u5177\u5b9a\u4f4d\u5206\u6790\u590d\u6742\u7684\u7f51\u7edc\u95ee\u9898","title":"\u6d41\u91cf\u6293\u5305\u5206\u6790"},{"location":"operation/capture_packet/#_2","text":"\u4f7f\u7528tcpdump\u6293\u53d6\u793a\u4f8b\uff1a # tcpdump tcp port 8443 -i any -s -w test.pcap","title":"\u6d41\u91cf\u6293\u53d6"},{"location":"operation/capture_packet/#_3","text":"","title":"\u6d41\u91cf\u5206\u6790"},{"location":"operation/capture_packet/#_4","text":"\u53ef\u4f7f\u7528wireshark\u8f6f\u4ef6\u6253\u5f00\u6293\u5305\u6587\u4ef6\u5206\u6790","title":"\u660e\u6587\u60c5\u51b5"},{"location":"operation/capture_packet/#_5","text":"\u5bf9\u4e8e\u57fa\u4e8eTLS\u7684\u52a0\u5bc6\u6d41\u91cf\uff0c\u53ef\u914d\u5408\u4f7f\u7528mod_key_log\u548cwireshark\u8fdb\u884c\u89e3\u5bc6\u5206\u6790\u3002\u64cd\u4f5c\u6b65\u9aa4: Step1: \u5728bfe\u5f00\u542fmod_key_log\u6a21\u5757\uff0c\u4fdd\u5b58TLS\u4f1a\u8bdd\u5bc6\u94a5\u5230key.log\u65e5\u5fd7\u6587\u4ef6\u4e2d \u6ce8\uff1a\u4fee\u6539bfe.conf\u6587\u4ef6\uff0c\u589e\u52a0\u542f\u7528mod_key_log\u6a21\u5757, \u6a21\u5757\u914d\u7f6e\u8be6\u89c1 mod_key_log [Server] Modules = mod_key_log Step2: \u5728wireshark\u4e2d\u8bbe\u7f6eMaster-Secret\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\u4e3akey.log \u6ce8\uff1a\u914d\u7f6e\u8def\u5f84Edit\u2192Preferences\u2192Protocols\u2192SSL\u2192(Pre)-Master-Secret log filename Step3: \u4f7f\u7528wireshark\u6253\u5f00\u5e76\u89e3\u5bc6\u6293\u5305\u6570\u636e","title":"\u5bc6\u6587\u60c5\u51b5"},{"location":"operation/command/","text":"\u547d\u4ee4\u884c\u5de5\u5177\u53ca\u53c2\u6570 bfe bfe [options] -c <config dir> \u914d\u7f6e\u6587\u4ef6\u7684\u6839\u76ee\u5f55\uff0c\u9ed8\u8ba4\u8def\u5f84./conf -l <log dir> \u65e5\u5fd7\u6587\u4ef6\u7684\u6839\u76ee\u5f55\uff0c\u9ed8\u8ba4\u8def\u5f84./log -s \u662f\u5426\u6253\u5370log\u5230stdout\uff0c\u9ed8\u8ba4\u5426 -d \u662f\u5426\u6253\u5370debug\u65e5\u5fd7\uff0c\u9ed8\u8ba4\u5426 -v \u662f\u5426\u663e\u793abfe\u7684\u7248\u672c\u53f7\u5e76\u9000\u51fa\uff0c\u9ed8\u8ba4\u5426 -V \u662f\u5426\u663e\u793abfe\u7684\u7248\u672c\u76f8\u5173\u4fe1\u606f\u5e76\u9000\u51fa\uff0c\u9ed8\u8ba4\u5426 -h \u662f\u5426\u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u5e76\u9000\u51fa\uff0c\u9ed8\u8ba4\u5426","title":"\u547d\u4ee4\u884c\u5de5\u5177\u53ca\u53c2\u6570"},{"location":"operation/command/#_1","text":"","title":"\u547d\u4ee4\u884c\u5de5\u5177\u53ca\u53c2\u6570"},{"location":"operation/command/#bfe","text":"bfe [options] -c <config dir> \u914d\u7f6e\u6587\u4ef6\u7684\u6839\u76ee\u5f55\uff0c\u9ed8\u8ba4\u8def\u5f84./conf -l <log dir> \u65e5\u5fd7\u6587\u4ef6\u7684\u6839\u76ee\u5f55\uff0c\u9ed8\u8ba4\u8def\u5f84./log -s \u662f\u5426\u6253\u5370log\u5230stdout\uff0c\u9ed8\u8ba4\u5426 -d \u662f\u5426\u6253\u5370debug\u65e5\u5fd7\uff0c\u9ed8\u8ba4\u5426 -v \u662f\u5426\u663e\u793abfe\u7684\u7248\u672c\u53f7\u5e76\u9000\u51fa\uff0c\u9ed8\u8ba4\u5426 -V \u662f\u5426\u663e\u793abfe\u7684\u7248\u672c\u76f8\u5173\u4fe1\u606f\u5e76\u9000\u51fa\uff0c\u9ed8\u8ba4\u5426 -h \u662f\u5426\u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u5e76\u9000\u51fa\uff0c\u9ed8\u8ba4\u5426","title":"bfe"},{"location":"operation/env_var/","text":"\u73af\u5883\u53d8\u91cf\u8bf4\u660e GODEBUG \u8f93\u51faHTTP2 Header\u65e5\u5fd7\u4fe1\u606f $ export GODEBUG = \"http2debug=1\" \u8f93\u51faHTTP2 Header\u53caHTTP2 Frame\u65e5\u5fd7\u4fe1\u606f $ export GODEBUG = \"http2debug=2\"","title":"\u73af\u5883\u53d8\u91cf\u8bf4\u660e"},{"location":"operation/env_var/#_1","text":"","title":"\u73af\u5883\u53d8\u91cf\u8bf4\u660e"},{"location":"operation/env_var/#godebug","text":"\u8f93\u51faHTTP2 Header\u65e5\u5fd7\u4fe1\u606f $ export GODEBUG = \"http2debug=1\" \u8f93\u51faHTTP2 Header\u53caHTTP2 Frame\u65e5\u5fd7\u4fe1\u606f $ export GODEBUG = \"http2debug=2\"","title":"GODEBUG"},{"location":"operation/log_rotation/","text":"\u65e5\u5fd7\u5207\u5272\u5907\u4efd \u7b80\u4ecb \u65e5\u5fd7\u6587\u4ef6\u968f\u7740\u65f6\u95f4\u63a8\u79fb\u4f1a\u53d8\u5927\u5e76\u5360\u7528\u8d8a\u6765\u591a\u8d8a\u7684\u78c1\u76d8\u7a7a\u95f4\u3002 BEF\u5185\u7f6e\u65e5\u5fd7\u81ea\u52a8\u5207\u5272\u53ca\u5907\u4efd\u529f\u80fd\uff0c\u53ef\u5b9a\u671f\u5207\u5272\u65e5\u5fd7\uff0c\u5220\u9664\u5e76\u4ec5\u4fdd\u7559\u6700\u8fd1\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 \u914d\u7f6e \u65e5\u5fd7\u540d\u79f0 \u65e5\u5fd7\u8def\u5f84 \u65e5\u5fd7\u5207\u5272\u53ca\u5907\u4efd\u914d\u7f6e Server Log log/bfe.log \u6309\u5929\u5207\u9694\u65e5\u5fd7\uff0c\u4fdd\u7559\u6700\u8fd17\u5929\u65e5\u5fd7 Access Log log/access.log \u89c1 conf/mod_access/mod_access.conf TLS Key Log log/key.log \u89c1 conf/mod_key_log/mod_key_log.conf","title":"\u65e5\u5fd7\u5207\u5272\u5907\u4efd"},{"location":"operation/log_rotation/#_1","text":"","title":"\u65e5\u5fd7\u5207\u5272\u5907\u4efd"},{"location":"operation/log_rotation/#_2","text":"\u65e5\u5fd7\u6587\u4ef6\u968f\u7740\u65f6\u95f4\u63a8\u79fb\u4f1a\u53d8\u5927\u5e76\u5360\u7528\u8d8a\u6765\u591a\u8d8a\u7684\u78c1\u76d8\u7a7a\u95f4\u3002 BEF\u5185\u7f6e\u65e5\u5fd7\u81ea\u52a8\u5207\u5272\u53ca\u5907\u4efd\u529f\u80fd\uff0c\u53ef\u5b9a\u671f\u5207\u5272\u65e5\u5fd7\uff0c\u5220\u9664\u5e76\u4ec5\u4fdd\u7559\u6700\u8fd1\u7684\u65e5\u5fd7\u6587\u4ef6\u3002","title":"\u7b80\u4ecb"},{"location":"operation/log_rotation/#_3","text":"\u65e5\u5fd7\u540d\u79f0 \u65e5\u5fd7\u8def\u5f84 \u65e5\u5fd7\u5207\u5272\u53ca\u5907\u4efd\u914d\u7f6e Server Log log/bfe.log \u6309\u5929\u5207\u9694\u65e5\u5fd7\uff0c\u4fdd\u7559\u6700\u8fd17\u5929\u65e5\u5fd7 Access Log log/access.log \u89c1 conf/mod_access/mod_access.conf TLS Key Log log/key.log \u89c1 conf/mod_key_log/mod_key_log.conf","title":"\u914d\u7f6e"},{"location":"operation/monitor/","text":"\u76d1\u63a7\u6307\u6807 BFE\u5185\u7f6e\u4e30\u5bcc\u7684\u76d1\u63a7\u6307\u6807\uff0c\u652f\u6301\u591a\u79cd\u683c\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7BFE\u5b9e\u4f8b\u7684\u76d1\u63a7\u63a5\u53e3\u83b7\u5f97\u3002 \u914d\u7f6e\u7ba1\u7406\u7aef\u53e3 \u5728BFE\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6(conf/bfe.conf)\u4e2d, \u914d\u7f6eMonitorPort [Server] MonitorPort = 8421 \u83b7\u53d6\u6307\u6807\u7c7b\u522b\u5217\u8868 \u8bbf\u95ee\u5982\u4e0b\u5730\u5740\uff0c\u4ee5\u83b7\u53d6\u76d1\u63a7\u9879\u5217\u8868\uff1a http://<addr>:8421/monitor \u83b7\u53d6\u6307\u6807\u8be6\u60c5 http://<addr>:8421/monitor/<category> \u8f93\u51fa\u683c\u5f0f \u5f53\u524d\u652f\u6301\u76d1\u63a7\u6570\u636e\u683c\u5f0f\u5982\u4e0b * prometheus * kv * json (\u9ed8\u8ba4\u683c\u5f0f) \u4f7f\u7528format\u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u7684\u683c\u5f0f, \u793a\u4f8b\uff1a http://<addr>:<port>/monitor/proxy_state?format=prometheus","title":"\u76d1\u63a7\u6307\u6807\u83b7\u53d6"},{"location":"operation/monitor/#_1","text":"BFE\u5185\u7f6e\u4e30\u5bcc\u7684\u76d1\u63a7\u6307\u6807\uff0c\u652f\u6301\u591a\u79cd\u683c\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7BFE\u5b9e\u4f8b\u7684\u76d1\u63a7\u63a5\u53e3\u83b7\u5f97\u3002","title":"\u76d1\u63a7\u6307\u6807"},{"location":"operation/monitor/#_2","text":"\u5728BFE\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6(conf/bfe.conf)\u4e2d, \u914d\u7f6eMonitorPort [Server] MonitorPort = 8421","title":"\u914d\u7f6e\u7ba1\u7406\u7aef\u53e3"},{"location":"operation/monitor/#_3","text":"\u8bbf\u95ee\u5982\u4e0b\u5730\u5740\uff0c\u4ee5\u83b7\u53d6\u76d1\u63a7\u9879\u5217\u8868\uff1a http://<addr>:8421/monitor","title":"\u83b7\u53d6\u6307\u6807\u7c7b\u522b\u5217\u8868"},{"location":"operation/monitor/#_4","text":"http://<addr>:8421/monitor/<category>","title":"\u83b7\u53d6\u6307\u6807\u8be6\u60c5"},{"location":"operation/monitor/#_5","text":"\u5f53\u524d\u652f\u6301\u76d1\u63a7\u6570\u636e\u683c\u5f0f\u5982\u4e0b * prometheus * kv * json (\u9ed8\u8ba4\u683c\u5f0f) \u4f7f\u7528format\u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u7684\u683c\u5f0f, \u793a\u4f8b\uff1a http://<addr>:<port>/monitor/proxy_state?format=prometheus","title":"\u8f93\u51fa\u683c\u5f0f"},{"location":"operation/performance/","text":"\u6027\u80fd\u6570\u636e\u91c7\u96c6 BFE\u5185\u7f6e\u4e86CPU profile\u63a5\u53e3\uff0c\u914d\u5408\u4f7f\u7528\u706b\u7130\u56fe\u5de5\u5177\uff0c\u7528\u4e8e\u5b9a\u4f4d\u5206\u6790\u6027\u80fd\u95ee\u9898 \u914d\u7f6e\u7ba1\u7406\u7aef\u53e3 \u5728BFE\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6(conf/bfe.conf)\u4e2d, \u914d\u7f6eMonitorPort [Server] MonitorPort = 8421 \u5de5\u5177\u51c6\u5907 FlameGragh $ git clone https://github.com/brendangregg/FlameGraph \u5176\u4e2d\u5305\u542bstackcollpase-go.pl\u548cflamegraph.pl \u64cd\u4f5c\u6b65\u9aa4 \u83b7\u53d6\u6027\u80fd\u91c7\u6837\u6570\u636e $ go tool pprof -seconds = 60 -raw -output = bfe.pprof http://<addr>:<port>/debug/pprof/profile \u6ce8\uff1aseconds=60 \u8868\u793a\u6293\u53d660s\u7684\u91c7\u6837\u6570\u636e \u8f6c\u6362\u5e76\u7ed8\u5236\u706b\u7130\u56fe $ ./stackcollpase-go.pl bfe.pporf > bfe.flame $ ./flamegraph.pl bfe.flame > bfe.svg \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00bfe.svg\u67e5\u770b","title":"\u6027\u80fd\u6570\u636e\u91c7\u96c6"},{"location":"operation/performance/#_1","text":"BFE\u5185\u7f6e\u4e86CPU profile\u63a5\u53e3\uff0c\u914d\u5408\u4f7f\u7528\u706b\u7130\u56fe\u5de5\u5177\uff0c\u7528\u4e8e\u5b9a\u4f4d\u5206\u6790\u6027\u80fd\u95ee\u9898","title":"\u6027\u80fd\u6570\u636e\u91c7\u96c6"},{"location":"operation/performance/#_2","text":"\u5728BFE\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6(conf/bfe.conf)\u4e2d, \u914d\u7f6eMonitorPort [Server] MonitorPort = 8421","title":"\u914d\u7f6e\u7ba1\u7406\u7aef\u53e3"},{"location":"operation/performance/#_3","text":"FlameGragh $ git clone https://github.com/brendangregg/FlameGraph \u5176\u4e2d\u5305\u542bstackcollpase-go.pl\u548cflamegraph.pl","title":"\u5de5\u5177\u51c6\u5907"},{"location":"operation/performance/#_4","text":"\u83b7\u53d6\u6027\u80fd\u91c7\u6837\u6570\u636e $ go tool pprof -seconds = 60 -raw -output = bfe.pprof http://<addr>:<port>/debug/pprof/profile \u6ce8\uff1aseconds=60 \u8868\u793a\u6293\u53d660s\u7684\u91c7\u6837\u6570\u636e \u8f6c\u6362\u5e76\u7ed8\u5236\u706b\u7130\u56fe $ ./stackcollpase-go.pl bfe.pporf > bfe.flame $ ./flamegraph.pl bfe.flame > bfe.svg \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00bfe.svg\u67e5\u770b","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"operation/reload/","text":"\u70ed\u52a0\u8f7d\u914d\u7f6e BFE\u5185\u7f6e\u914d\u7f6e\u70ed\u52a0\u8f7d\u529f\u80fd\uff0c\u901a\u8fc7\u8bf7\u6c42Reload HTTP API\u80fd\u591f\u52a0\u8f7d\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\u3002 \u914d\u7f6e\u7ba1\u7406\u7aef\u53e3 \u5728BFE\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6(conf/bfe.conf)\u4e2d, \u914d\u7f6eMonitorPort [Server] MonitorPort = 8421 \u4f7f\u7528\u65b9\u5f0f reload\u63a5\u53e3\u4ec5\u5141\u8bb8\u4f7f\u7528localhost\u8bbf\u95ee\uff08127.0.0.1/::1\uff09, \u4ec5\u652f\u6301GET\u8bf7\u6c42, \u793a\u4f8b: # \u91cd\u52a0\u8f7d\u5206\u6d41\u8f6c\u53d1\u914d\u7f6e $ curl http://localhost:8421/reload/server_data_conf \u5b8c\u6574\u7684Reload API\u5217\u8868\u53ef\u8bbf\u95eehttp://localhost:8421/reload\u67e5\u770b\u3002\u8be6\u89c1\u4e0b\u6587\u8bf4\u660e\u3002 \u63a5\u53e3\u8bf4\u660e \u57fa\u7840\u529f\u80fd \u529f\u80fd\u540d\u79f0 \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 \u70ed\u52a0\u8f7d\u63a5\u53e3 \u5185\u5bb9\u8def\u7531 server_data_conf/host_rule.data server_data_conf/vip_rule.data server_data_conf/route_rule.data server_data_conf/cluster_conf.data /reload/server_data_conf \u8d1f\u8f7d\u5747\u8861 cluster_conf/cluster_table.data cluster_conf/gslb.data /reload/gslb_data_conf \u540d\u5b57\u89e3\u6790 server_data_conf/name_conf.data /reload/name_conf TLS\u89c4\u5219 tls_conf/server_cert_conf.data tls_conf/tls_rule_conf.data /reload/tls_conf TLS session ticket key tls_conf/session_ticket_key.data /reload/tls_session_ticket_key \u6269\u5c55\u6a21\u5757 \u529f\u80fd\u540d\u79f0 \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 \u70ed\u52a0\u8f7d\u63a5\u53e3 mod_auth_basic mod_auth_basic/auth_basic_rule.data /reload/mod_auth_basic mod_auth_jwt mod_auth_jwt/mod_auth_jwt.conf /reload/mod_auth_jwt mod_block mod_block/block_rules.data mod_block/ip_blacklist.data /reload/mod_block.product_rule_table /reload/mod_block.global_ip_table mod_compress mod_compress/compress_rule.data /reload/mod_compress mod_errors mod_errors/errors_rule.data /reload/mod_errors mod_geo mod_geo/geo.db /reload/mod_geo mod_header mod_header/header_rule.data /reload/mod_header mod_redirect mod_redirect/redirect.data /reload/mod_redirect mod_rewrite mod_rewrite/rewrite.data /reload/mod_rewrite mod_static mod_static/static_rule.data mod_static/mime_type.data /reload/mod_static /reload/mod_static.mime_type mod_trust_clientip mod_trust_clientip/trust_client_ip.data /reload/mod_trust_clientip","title":"\u914d\u7f6e\u70ed\u52a0\u8f7d"},{"location":"operation/reload/#_1","text":"BFE\u5185\u7f6e\u914d\u7f6e\u70ed\u52a0\u8f7d\u529f\u80fd\uff0c\u901a\u8fc7\u8bf7\u6c42Reload HTTP API\u80fd\u591f\u52a0\u8f7d\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u70ed\u52a0\u8f7d\u914d\u7f6e"},{"location":"operation/reload/#_2","text":"\u5728BFE\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6(conf/bfe.conf)\u4e2d, \u914d\u7f6eMonitorPort [Server] MonitorPort = 8421","title":"\u914d\u7f6e\u7ba1\u7406\u7aef\u53e3"},{"location":"operation/reload/#_3","text":"reload\u63a5\u53e3\u4ec5\u5141\u8bb8\u4f7f\u7528localhost\u8bbf\u95ee\uff08127.0.0.1/::1\uff09, \u4ec5\u652f\u6301GET\u8bf7\u6c42, \u793a\u4f8b: # \u91cd\u52a0\u8f7d\u5206\u6d41\u8f6c\u53d1\u914d\u7f6e $ curl http://localhost:8421/reload/server_data_conf \u5b8c\u6574\u7684Reload API\u5217\u8868\u53ef\u8bbf\u95eehttp://localhost:8421/reload\u67e5\u770b\u3002\u8be6\u89c1\u4e0b\u6587\u8bf4\u660e\u3002","title":"\u4f7f\u7528\u65b9\u5f0f"},{"location":"operation/reload/#_4","text":"","title":"\u63a5\u53e3\u8bf4\u660e"},{"location":"operation/reload/#_5","text":"\u529f\u80fd\u540d\u79f0 \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 \u70ed\u52a0\u8f7d\u63a5\u53e3 \u5185\u5bb9\u8def\u7531 server_data_conf/host_rule.data server_data_conf/vip_rule.data server_data_conf/route_rule.data server_data_conf/cluster_conf.data /reload/server_data_conf \u8d1f\u8f7d\u5747\u8861 cluster_conf/cluster_table.data cluster_conf/gslb.data /reload/gslb_data_conf \u540d\u5b57\u89e3\u6790 server_data_conf/name_conf.data /reload/name_conf TLS\u89c4\u5219 tls_conf/server_cert_conf.data tls_conf/tls_rule_conf.data /reload/tls_conf TLS session ticket key tls_conf/session_ticket_key.data /reload/tls_session_ticket_key","title":"\u57fa\u7840\u529f\u80fd"},{"location":"operation/reload/#_6","text":"\u529f\u80fd\u540d\u79f0 \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 \u70ed\u52a0\u8f7d\u63a5\u53e3 mod_auth_basic mod_auth_basic/auth_basic_rule.data /reload/mod_auth_basic mod_auth_jwt mod_auth_jwt/mod_auth_jwt.conf /reload/mod_auth_jwt mod_block mod_block/block_rules.data mod_block/ip_blacklist.data /reload/mod_block.product_rule_table /reload/mod_block.global_ip_table mod_compress mod_compress/compress_rule.data /reload/mod_compress mod_errors mod_errors/errors_rule.data /reload/mod_errors mod_geo mod_geo/geo.db /reload/mod_geo mod_header mod_header/header_rule.data /reload/mod_header mod_redirect mod_redirect/redirect.data /reload/mod_redirect mod_rewrite mod_rewrite/rewrite.data /reload/mod_rewrite mod_static mod_static/static_rule.data mod_static/mime_type.data /reload/mod_static /reload/mod_static.mime_type mod_trust_clientip mod_trust_clientip/trust_client_ip.data /reload/mod_trust_clientip","title":"\u6269\u5c55\u6a21\u5757"},{"location":"operation/signal/","text":"\u7cfb\u7edf\u4fe1\u53f7\u8bf4\u660e SIGQUIT \u4f18\u96c5\u9000\u51faBFE\u8fdb\u7a0b \u6ce8\uff1aBFE\u8fdb\u7a0b\u4e0d\u518d\u63a5\u6536\u65b0\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u7ee7\u7eed\u5b8c\u6210\u6d3b\u8dc3\u8bf7\u6c42\u5904\u7406\u540e\u9000\u51fa, \u6216\u8d85\u8fc7GracefulShutdownTimeout(conf/bfe.conf)\u540e\u5f3a\u5236\u9000\u51fa SIGTERM \u5f3a\u5236\u9000\u51faBFE\u8fdb\u7a0b","title":"\u7cfb\u7edf\u4fe1\u53f7\u8bf4\u660e"},{"location":"operation/signal/#_1","text":"","title":"\u7cfb\u7edf\u4fe1\u53f7\u8bf4\u660e"},{"location":"operation/signal/#sigquit","text":"\u4f18\u96c5\u9000\u51faBFE\u8fdb\u7a0b \u6ce8\uff1aBFE\u8fdb\u7a0b\u4e0d\u518d\u63a5\u6536\u65b0\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u7ee7\u7eed\u5b8c\u6210\u6d3b\u8dc3\u8bf7\u6c42\u5904\u7406\u540e\u9000\u51fa, \u6216\u8d85\u8fc7GracefulShutdownTimeout(conf/bfe.conf)\u540e\u5f3a\u5236\u9000\u51fa","title":"SIGQUIT"},{"location":"operation/signal/#sigterm","text":"\u5f3a\u5236\u9000\u51faBFE\u8fdb\u7a0b","title":"SIGTERM"}]}